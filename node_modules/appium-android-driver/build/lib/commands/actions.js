"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.helpers = exports.commands = void 0;

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _androidHelpers = _interopRequireDefault(require("../android-helpers"));

var _lodash = _interopRequireDefault(require("lodash"));

var _temp = _interopRequireDefault(require("temp"));

var _appiumSupport = require("appium-support");

var _path = _interopRequireDefault(require("path"));

var _logger = _interopRequireDefault(require("../logger"));

var _bluebird = _interopRequireDefault(require("bluebird"));

var _jimp = _interopRequireDefault(require("jimp"));

var _teen_process = require("teen_process");

const swipeStepsPerSec = 28;
const dragStepsPerSec = 40;
const CONTAINER_PATH_MARKER = '@';
const CONTAINER_PATH_PATTERN = new RegExp(`^${CONTAINER_PATH_MARKER}([^/]+)/(.+)`);
const ANDROID_MEDIA_RESCAN_INTENT = 'android.intent.action.MEDIA_SCANNER_SCAN_FILE';
let commands = {},
    helpers = {},
    extensions = {};
exports.helpers = helpers;
exports.commands = commands;

commands.keyevent = function () {
  var _ref = (0, _asyncToGenerator2.default)(function* (keycode, metastate = null) {
    _logger.default.warn("keyevent will be deprecated use pressKeyCode");

    return yield this.pressKeyCode(keycode, metastate);
  });

  return function (_x) {
    return _ref.apply(this, arguments);
  };
}();

commands.pressKeyCode = function () {
  var _ref2 = (0, _asyncToGenerator2.default)(function* (keycode, metastate = null) {
    return yield this.bootstrap.sendAction("pressKeyCode", {
      keycode,
      metastate
    });
  });

  return function (_x2) {
    return _ref2.apply(this, arguments);
  };
}();

commands.longPressKeyCode = function () {
  var _ref3 = (0, _asyncToGenerator2.default)(function* (keycode, metastate = null) {
    return yield this.bootstrap.sendAction("longPressKeyCode", {
      keycode,
      metastate
    });
  });

  return function (_x3) {
    return _ref3.apply(this, arguments);
  };
}();

commands.getOrientation = (0, _asyncToGenerator2.default)(function* () {
  let params = {
    naturalOrientation: !!this.opts.androidNaturalOrientation
  };
  let orientation = yield this.bootstrap.sendAction("orientation", params);
  return orientation.toUpperCase();
});

commands.setOrientation = function () {
  var _ref5 = (0, _asyncToGenerator2.default)(function* (orientation) {
    orientation = orientation.toUpperCase();
    let params = {
      orientation,
      naturalOrientation: !!this.opts.androidNaturalOrientation
    };
    return yield this.bootstrap.sendAction("orientation", params);
  });

  return function (_x4) {
    return _ref5.apply(this, arguments);
  };
}();

commands.fakeFlick = function () {
  var _ref6 = (0, _asyncToGenerator2.default)(function* (xSpeed, ySpeed) {
    return yield this.bootstrap.sendAction('flick', {
      xSpeed,
      ySpeed
    });
  });

  return function (_x5, _x6) {
    return _ref6.apply(this, arguments);
  };
}();

commands.fakeFlickElement = function () {
  var _ref7 = (0, _asyncToGenerator2.default)(function* (elementId, xoffset, yoffset, speed) {
    let params = {
      xoffset,
      yoffset,
      speed,
      elementId
    };
    return yield this.bootstrap.sendAction('element:flick', params);
  });

  return function (_x7, _x8, _x9, _x10) {
    return _ref7.apply(this, arguments);
  };
}();

commands.swipe = function () {
  var _ref8 = (0, _asyncToGenerator2.default)(function* (startX, startY, endX, endY, duration, touchCount, elId) {
    if (startX === 'null') {
      startX = 0.5;
    }

    if (startY === 'null') {
      startY = 0.5;
    }

    let swipeOpts = {
      startX,
      startY,
      endX,
      endY,
      steps: Math.round(duration * swipeStepsPerSec)
    };

    if (_appiumSupport.util.hasValue(elId)) {
      swipeOpts.elementId = elId;
    }

    return yield this.doSwipe(swipeOpts);
  });

  return function (_x11, _x12, _x13, _x14, _x15, _x16, _x17) {
    return _ref8.apply(this, arguments);
  };
}();

commands.doSwipe = function () {
  var _ref9 = (0, _asyncToGenerator2.default)(function* (swipeOpts) {
    if (_appiumSupport.util.hasValue(swipeOpts.elementId)) {
      return yield this.bootstrap.sendAction("element:swipe", swipeOpts);
    } else {
      return yield this.bootstrap.sendAction("swipe", swipeOpts);
    }
  });

  return function (_x18) {
    return _ref9.apply(this, arguments);
  };
}();

commands.pinchClose = function () {
  var _ref10 = (0, _asyncToGenerator2.default)(function* (startX, startY, endX, endY, duration, percent, steps, elId) {
    let pinchOpts = {
      direction: 'in',
      elementId: elId,
      percent,
      steps
    };
    return yield this.bootstrap.sendAction("element:pinch", pinchOpts);
  });

  return function (_x19, _x20, _x21, _x22, _x23, _x24, _x25, _x26) {
    return _ref10.apply(this, arguments);
  };
}();

commands.pinchOpen = function () {
  var _ref11 = (0, _asyncToGenerator2.default)(function* (startX, startY, endX, endY, duration, percent, steps, elId) {
    let pinchOpts = {
      direction: 'out',
      elementId: elId,
      percent,
      steps
    };
    return yield this.bootstrap.sendAction("element:pinch", pinchOpts);
  });

  return function (_x27, _x28, _x29, _x30, _x31, _x32, _x33, _x34) {
    return _ref11.apply(this, arguments);
  };
}();

commands.flick = function () {
  var _ref12 = (0, _asyncToGenerator2.default)(function* (element, xSpeed, ySpeed, xOffset, yOffset, speed) {
    if (element) {
      yield this.fakeFlickElement(element, xOffset, yOffset, speed);
    } else {
      yield this.fakeFlick(xSpeed, ySpeed);
    }
  });

  return function (_x35, _x36, _x37, _x38, _x39, _x40) {
    return _ref12.apply(this, arguments);
  };
}();

commands.drag = function () {
  var _ref13 = (0, _asyncToGenerator2.default)(function* (startX, startY, endX, endY, duration, touchCount, elementId, destElId) {
    let dragOpts = {
      elementId,
      destElId,
      startX,
      startY,
      endX,
      endY,
      steps: Math.round(duration * dragStepsPerSec)
    };
    return yield this.doDrag(dragOpts);
  });

  return function (_x41, _x42, _x43, _x44, _x45, _x46, _x47, _x48) {
    return _ref13.apply(this, arguments);
  };
}();

commands.doDrag = function () {
  var _ref14 = (0, _asyncToGenerator2.default)(function* (dragOpts) {
    if (_appiumSupport.util.hasValue(dragOpts.elementId)) {
      return yield this.bootstrap.sendAction("element:drag", dragOpts);
    } else {
      return yield this.bootstrap.sendAction("drag", dragOpts);
    }
  });

  return function (_x49) {
    return _ref14.apply(this, arguments);
  };
}();

commands.lock = function () {
  var _ref15 = (0, _asyncToGenerator2.default)(function* (seconds) {
    yield this.adb.lock();

    if (isNaN(seconds)) {
      return;
    }

    const floatSeconds = parseFloat(seconds);

    if (floatSeconds <= 0) {
      return;
    }

    yield _bluebird.default.delay(1000 * floatSeconds);
    yield this.unlock();
  });

  return function (_x50) {
    return _ref15.apply(this, arguments);
  };
}();

commands.isLocked = (0, _asyncToGenerator2.default)(function* () {
  return yield this.adb.isScreenLocked();
});
commands.unlock = (0, _asyncToGenerator2.default)(function* () {
  return yield _androidHelpers.default.unlock(this, this.adb, this.caps);
});
commands.openNotifications = (0, _asyncToGenerator2.default)(function* () {
  return yield this.bootstrap.sendAction("openNotification");
});

commands.setLocation = function () {
  var _ref19 = (0, _asyncToGenerator2.default)(function* (latitude, longitude) {
    return yield this.adb.sendTelnetCommand(`geo fix ${longitude} ${latitude}`);
  });

  return function (_x51, _x52) {
    return _ref19.apply(this, arguments);
  };
}();

function parseContainerPath(remotePath) {
  const match = CONTAINER_PATH_PATTERN.exec(remotePath);

  if (!match) {
    _logger.default.errorAndThrow(`It is expected that package identifier is separated from the relative path with a single slash. ` + `'${remotePath}' is given instead`);
  }

  return [match[1], _path.default.posix.resolve(`/data/data/${match[1]}`, match[2])];
}

commands.pullFile = function () {
  var _ref20 = (0, _asyncToGenerator2.default)(function* (remotePath) {
    if (remotePath.endsWith('/')) {
      _logger.default.errorAndThrow(`It is expected that remote path points to a file and not to a folder. ` + `'${remotePath}' is given instead`);
    }

    let tmpDestination = null;

    if (remotePath.startsWith(CONTAINER_PATH_MARKER)) {
      const _parseContainerPath = parseContainerPath(remotePath),
            _parseContainerPath2 = (0, _slicedToArray2.default)(_parseContainerPath, 2),
            packageId = _parseContainerPath2[0],
            pathInContainer = _parseContainerPath2[1];

      _logger.default.info(`Parsed package identifier '${packageId}' from '${remotePath}'. Will get the data from '${pathInContainer}'`);

      tmpDestination = `/data/local/tmp/${_path.default.posix.basename(pathInContainer)}`;

      try {
        yield this.adb.shell(['run-as', packageId, `chmod 777 '${pathInContainer.replace(/'/g, '\\\'')}'`]);
        yield this.adb.shell(['cp', '-f', pathInContainer, tmpDestination]);
      } catch (e) {
        _logger.default.errorAndThrow(`Cannot access the container of '${packageId}' application. ` + `Is the application installed and has 'debuggable' build option set to true? ` + `Original error: ${e.message}`);
      }
    }

    const localFile = _temp.default.path({
      prefix: 'appium',
      suffix: '.tmp'
    });

    try {
      yield this.adb.pull(_lodash.default.isString(tmpDestination) ? tmpDestination : remotePath, localFile);
      const data = yield _appiumSupport.fs.readFile(localFile);
      return Buffer.from(data).toString('base64');
    } finally {
      if (yield _appiumSupport.fs.exists(localFile)) {
        yield _appiumSupport.fs.unlink(localFile);
      }

      if (_lodash.default.isString(tmpDestination)) {
        yield this.adb.shell(['rm', '-f', tmpDestination]);
      }
    }
  });

  return function (_x53) {
    return _ref20.apply(this, arguments);
  };
}();

commands.pushFile = function () {
  var _ref21 = (0, _asyncToGenerator2.default)(function* (remotePath, base64Data) {
    if (remotePath.endsWith('/')) {
      _logger.default.errorAndThrow(`It is expected that remote path points to a file and not to a folder. ` + `'${remotePath}' is given instead`);
    }

    const localFile = _temp.default.path({
      prefix: 'appium',
      suffix: '.tmp'
    });

    if (_lodash.default.isArray(base64Data)) {
      base64Data = Buffer.from(base64Data).toString('utf8');
    }

    const content = Buffer.from(base64Data, 'base64');
    let tmpDestination = null;

    try {
      yield _appiumSupport.fs.writeFile(localFile, content.toString('binary'), 'binary');

      if (remotePath.startsWith(CONTAINER_PATH_MARKER)) {
        const _parseContainerPath3 = parseContainerPath(remotePath),
              _parseContainerPath4 = (0, _slicedToArray2.default)(_parseContainerPath3, 2),
              packageId = _parseContainerPath4[0],
              pathInContainer = _parseContainerPath4[1];

        _logger.default.info(`Parsed package identifier '${packageId}' from '${remotePath}'. Will put the data into '${pathInContainer}'`);

        tmpDestination = `/data/local/tmp/${_path.default.posix.basename(pathInContainer)}`;

        try {
          yield this.adb.shell(['run-as', packageId, `mkdir -p '${_path.default.posix.dirname(pathInContainer).replace(/'/g, '\\\'')}'`]);
          yield this.adb.shell(['run-as', packageId, `touch '${pathInContainer.replace(/'/g, '\\\'')}'`]);
          yield this.adb.shell(['run-as', packageId, `chmod 777 '${pathInContainer.replace(/'/g, '\\\'')}'`]);
          yield this.adb.push(localFile, tmpDestination);
          yield this.adb.shell(['cp', '-f', tmpDestination, pathInContainer]);
        } catch (e) {
          _logger.default.errorAndThrow(`Cannot access the container of '${packageId}' application. ` + `Is the application installed and has 'debuggable' build option set to true? ` + `Original error: ${e.message}`);
        }
      } else {
        yield this.adb.push(localFile, remotePath);

        _logger.default.info("After pushing media file, broadcasting media scan intent");

        try {
          yield this.adb.shell(['am', 'broadcast', '-a', ANDROID_MEDIA_RESCAN_INTENT, '-d', `file://${remotePath}`]);
        } catch (e) {
          _logger.default.warn(`Got error broadcasting media scan intent: ${e.message}; ignoring`);
        }
      }
    } finally {
      if (yield _appiumSupport.fs.exists(localFile)) {
        yield _appiumSupport.fs.unlink(localFile);
      }

      if (_lodash.default.isString(tmpDestination)) {
        yield this.adb.shell(['rm', '-f', tmpDestination]);
      }
    }
  });

  return function (_x54, _x55) {
    return _ref21.apply(this, arguments);
  };
}();

commands.pullFolder = function () {
  var _ref22 = (0, _asyncToGenerator2.default)(function* (remotePath) {
    let localFolder = _temp.default.path({
      prefix: 'appium'
    });

    yield this.adb.pull(remotePath, localFolder);
    return (yield _appiumSupport.zip.toInMemoryZip(localFolder)).toString('base64');
  });

  return function (_x56) {
    return _ref22.apply(this, arguments);
  };
}();

commands.fingerprint = function () {
  var _ref23 = (0, _asyncToGenerator2.default)(function* (fingerprintId) {
    if (!this.isEmulator()) {
      _logger.default.errorAndThrow("fingerprint method is only available for emulators");
    }

    yield this.adb.fingerprint(fingerprintId);
  });

  return function (_x57) {
    return _ref23.apply(this, arguments);
  };
}();

commands.sendSMS = function () {
  var _ref24 = (0, _asyncToGenerator2.default)(function* (phoneNumber, message) {
    if (!this.isEmulator()) {
      _logger.default.errorAndThrow("sendSMS method is only available for emulators");
    }

    yield this.adb.sendSMS(phoneNumber, message);
  });

  return function (_x58, _x59) {
    return _ref24.apply(this, arguments);
  };
}();

commands.gsmCall = function () {
  var _ref25 = (0, _asyncToGenerator2.default)(function* (phoneNumber, action) {
    if (!this.isEmulator()) {
      _logger.default.errorAndThrow("gsmCall method is only available for emulators");
    }

    yield this.adb.gsmCall(phoneNumber, action);
  });

  return function (_x60, _x61) {
    return _ref25.apply(this, arguments);
  };
}();

commands.gsmSignal = function () {
  var _ref26 = (0, _asyncToGenerator2.default)(function* (signalStrengh) {
    if (!this.isEmulator()) {
      _logger.default.errorAndThrow("gsmSignal method is only available for emulators");
    }

    yield this.adb.gsmSignal(signalStrengh);
  });

  return function (_x62) {
    return _ref26.apply(this, arguments);
  };
}();

commands.gsmVoice = function () {
  var _ref27 = (0, _asyncToGenerator2.default)(function* (state) {
    if (!this.isEmulator()) {
      _logger.default.errorAndThrow("gsmVoice method is only available for emulators");
    }

    yield this.adb.gsmVoice(state);
  });

  return function (_x63) {
    return _ref27.apply(this, arguments);
  };
}();

commands.powerAC = function () {
  var _ref28 = (0, _asyncToGenerator2.default)(function* (state) {
    if (!this.isEmulator()) {
      _logger.default.errorAndThrow("powerAC method is only available for emulators");
    }

    yield this.adb.powerAC(state);
  });

  return function (_x64) {
    return _ref28.apply(this, arguments);
  };
}();

commands.powerCapacity = function () {
  var _ref29 = (0, _asyncToGenerator2.default)(function* (batteryPercent) {
    if (!this.isEmulator()) {
      _logger.default.errorAndThrow("powerCapacity method is only available for emulators");
    }

    yield this.adb.powerCapacity(batteryPercent);
  });

  return function (_x65) {
    return _ref29.apply(this, arguments);
  };
}();

commands.networkSpeed = function () {
  var _ref30 = (0, _asyncToGenerator2.default)(function* (networkSpeed) {
    if (!this.isEmulator()) {
      _logger.default.errorAndThrow("networkSpeed method is only available for emulators");
    }

    yield this.adb.networkSpeed(networkSpeed);
  });

  return function (_x66) {
    return _ref30.apply(this, arguments);
  };
}();

helpers.getScreenshotDataWithAdbShell = function () {
  var _ref31 = (0, _asyncToGenerator2.default)(function* (adb, opts) {
    const localFile = _temp.default.path({
      prefix: 'appium',
      suffix: '.png'
    });

    if (yield _appiumSupport.fs.exists(localFile)) {
      yield _appiumSupport.fs.unlink(localFile);
    }

    try {
      const pngDir = opts.androidScreenshotPath || '/data/local/tmp/';

      const png = _path.default.posix.resolve(pngDir, 'screenshot.png');

      const cmd = ['/system/bin/rm', `${png};`, '/system/bin/screencap', '-p', png];
      yield adb.shell(cmd);

      if (!(yield adb.fileSize(png))) {
        throw new Error('The size of the taken screenshot equals to zero.');
      }

      yield adb.pull(png, localFile);
      return yield _jimp.default.read(localFile);
    } finally {
      if (yield _appiumSupport.fs.exists(localFile)) {
        yield _appiumSupport.fs.unlink(localFile);
      }
    }
  });

  return function (_x67, _x68) {
    return _ref31.apply(this, arguments);
  };
}();

helpers.getScreenshotDataWithAdbExecOut = function () {
  var _ref32 = (0, _asyncToGenerator2.default)(function* (adb) {
    let _ref33 = yield (0, _teen_process.exec)(adb.executable.path, adb.executable.defaultArgs.concat(['exec-out', '/system/bin/screencap', '-p']), {
      encoding: 'binary',
      isBuffer: true
    }),
        stdout = _ref33.stdout,
        stderr = _ref33.stderr,
        code = _ref33.code;

    if (code || stderr.length) {
      throw new Error(`Screenshot returned error, code: '${code}', stderr: '${stderr.toString()}'`);
    }

    if (!stdout.length) {
      throw new Error('Screenshot returned no data');
    }

    return yield _jimp.default.read(stdout);
  });

  return function (_x69) {
    return _ref32.apply(this, arguments);
  };
}();

commands.getScreenshot = (0, _asyncToGenerator2.default)(function* () {
  const apiLevel = yield this.adb.getApiLevel();
  let image = null;

  if (apiLevel > 20) {
    try {
      image = yield this.getScreenshotDataWithAdbExecOut(this.adb);
    } catch (e) {
      _logger.default.info(`Cannot get screenshot data with 'adb exec-out' because of '${e.message}'. ` + `Defaulting to 'adb shell' call`);
    }
  }

  if (!image) {
    try {
      image = yield this.getScreenshotDataWithAdbShell(this.adb, this.opts);
    } catch (e) {
      const err = `Cannot get screenshot data because of '${e.message}'. ` + `Make sure the 'LayoutParams.FLAG_SECURE' is not set for ` + `the current view`;

      _logger.default.errorAndThrow(err);
    }
  }

  if (apiLevel < 23) {
    let screenOrientation = yield this.adb.getScreenOrientation();

    try {
      image = yield image.rotate(-90 * screenOrientation);
    } catch (err) {
      _logger.default.warn(`Could not rotate screenshot due to error: ${err}`);
    }
  }

  const getBuffer = _bluebird.default.promisify(image.getBuffer, {
    context: image
  });

  const imgBuffer = yield getBuffer(_jimp.default.MIME_PNG);
  return imgBuffer.toString('base64');
});
Object.assign(extensions, commands, helpers);
var _default = extensions;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9jb21tYW5kcy9hY3Rpb25zLmpzIl0sIm5hbWVzIjpbInN3aXBlU3RlcHNQZXJTZWMiLCJkcmFnU3RlcHNQZXJTZWMiLCJDT05UQUlORVJfUEFUSF9NQVJLRVIiLCJDT05UQUlORVJfUEFUSF9QQVRURVJOIiwiUmVnRXhwIiwiQU5EUk9JRF9NRURJQV9SRVNDQU5fSU5URU5UIiwiY29tbWFuZHMiLCJoZWxwZXJzIiwiZXh0ZW5zaW9ucyIsImtleWV2ZW50Iiwia2V5Y29kZSIsIm1ldGFzdGF0ZSIsImxvZyIsIndhcm4iLCJwcmVzc0tleUNvZGUiLCJib290c3RyYXAiLCJzZW5kQWN0aW9uIiwibG9uZ1ByZXNzS2V5Q29kZSIsImdldE9yaWVudGF0aW9uIiwicGFyYW1zIiwibmF0dXJhbE9yaWVudGF0aW9uIiwib3B0cyIsImFuZHJvaWROYXR1cmFsT3JpZW50YXRpb24iLCJvcmllbnRhdGlvbiIsInRvVXBwZXJDYXNlIiwic2V0T3JpZW50YXRpb24iLCJmYWtlRmxpY2siLCJ4U3BlZWQiLCJ5U3BlZWQiLCJmYWtlRmxpY2tFbGVtZW50IiwiZWxlbWVudElkIiwieG9mZnNldCIsInlvZmZzZXQiLCJzcGVlZCIsInN3aXBlIiwic3RhcnRYIiwic3RhcnRZIiwiZW5kWCIsImVuZFkiLCJkdXJhdGlvbiIsInRvdWNoQ291bnQiLCJlbElkIiwic3dpcGVPcHRzIiwic3RlcHMiLCJNYXRoIiwicm91bmQiLCJ1dGlsIiwiaGFzVmFsdWUiLCJkb1N3aXBlIiwicGluY2hDbG9zZSIsInBlcmNlbnQiLCJwaW5jaE9wdHMiLCJkaXJlY3Rpb24iLCJwaW5jaE9wZW4iLCJmbGljayIsImVsZW1lbnQiLCJ4T2Zmc2V0IiwieU9mZnNldCIsImRyYWciLCJkZXN0RWxJZCIsImRyYWdPcHRzIiwiZG9EcmFnIiwibG9jayIsInNlY29uZHMiLCJhZGIiLCJpc05hTiIsImZsb2F0U2Vjb25kcyIsInBhcnNlRmxvYXQiLCJCIiwiZGVsYXkiLCJ1bmxvY2siLCJpc0xvY2tlZCIsImlzU2NyZWVuTG9ja2VkIiwiYW5kcm9pZEhlbHBlcnMiLCJjYXBzIiwib3Blbk5vdGlmaWNhdGlvbnMiLCJzZXRMb2NhdGlvbiIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwic2VuZFRlbG5ldENvbW1hbmQiLCJwYXJzZUNvbnRhaW5lclBhdGgiLCJyZW1vdGVQYXRoIiwibWF0Y2giLCJleGVjIiwiZXJyb3JBbmRUaHJvdyIsInBhdGgiLCJwb3NpeCIsInJlc29sdmUiLCJwdWxsRmlsZSIsImVuZHNXaXRoIiwidG1wRGVzdGluYXRpb24iLCJzdGFydHNXaXRoIiwicGFja2FnZUlkIiwicGF0aEluQ29udGFpbmVyIiwiaW5mbyIsImJhc2VuYW1lIiwic2hlbGwiLCJyZXBsYWNlIiwiZSIsIm1lc3NhZ2UiLCJsb2NhbEZpbGUiLCJ0ZW1wIiwicHJlZml4Iiwic3VmZml4IiwicHVsbCIsIl8iLCJpc1N0cmluZyIsImRhdGEiLCJmcyIsInJlYWRGaWxlIiwiQnVmZmVyIiwiZnJvbSIsInRvU3RyaW5nIiwiZXhpc3RzIiwidW5saW5rIiwicHVzaEZpbGUiLCJiYXNlNjREYXRhIiwiaXNBcnJheSIsImNvbnRlbnQiLCJ3cml0ZUZpbGUiLCJkaXJuYW1lIiwicHVzaCIsInB1bGxGb2xkZXIiLCJsb2NhbEZvbGRlciIsInppcCIsInRvSW5NZW1vcnlaaXAiLCJmaW5nZXJwcmludCIsImZpbmdlcnByaW50SWQiLCJpc0VtdWxhdG9yIiwic2VuZFNNUyIsInBob25lTnVtYmVyIiwiZ3NtQ2FsbCIsImFjdGlvbiIsImdzbVNpZ25hbCIsInNpZ25hbFN0cmVuZ2giLCJnc21Wb2ljZSIsInN0YXRlIiwicG93ZXJBQyIsInBvd2VyQ2FwYWNpdHkiLCJiYXR0ZXJ5UGVyY2VudCIsIm5ldHdvcmtTcGVlZCIsImdldFNjcmVlbnNob3REYXRhV2l0aEFkYlNoZWxsIiwicG5nRGlyIiwiYW5kcm9pZFNjcmVlbnNob3RQYXRoIiwicG5nIiwiY21kIiwiZmlsZVNpemUiLCJFcnJvciIsImppbXAiLCJyZWFkIiwiZ2V0U2NyZWVuc2hvdERhdGFXaXRoQWRiRXhlY091dCIsImV4ZWN1dGFibGUiLCJkZWZhdWx0QXJncyIsImNvbmNhdCIsImVuY29kaW5nIiwiaXNCdWZmZXIiLCJzdGRvdXQiLCJzdGRlcnIiLCJjb2RlIiwibGVuZ3RoIiwiZ2V0U2NyZWVuc2hvdCIsImFwaUxldmVsIiwiZ2V0QXBpTGV2ZWwiLCJpbWFnZSIsImVyciIsInNjcmVlbk9yaWVudGF0aW9uIiwiZ2V0U2NyZWVuT3JpZW50YXRpb24iLCJyb3RhdGUiLCJnZXRCdWZmZXIiLCJwcm9taXNpZnkiLCJjb250ZXh0IiwiaW1nQnVmZmVyIiwiTUlNRV9QTkciLCJPYmplY3QiLCJhc3NpZ24iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFFQSxNQUFNQSxnQkFBZ0IsR0FBRyxFQUF6QjtBQUNBLE1BQU1DLGVBQWUsR0FBRyxFQUF4QjtBQUNBLE1BQU1DLHFCQUFxQixHQUFHLEdBQTlCO0FBRUEsTUFBTUMsc0JBQXNCLEdBQUcsSUFBSUMsTUFBSixDQUFZLElBQUdGLHFCQUFzQixjQUFyQyxDQUEvQjtBQUNBLE1BQU1HLDJCQUEyQixHQUFHLCtDQUFwQztBQUVBLElBQUlDLFFBQVEsR0FBRyxFQUFmO0FBQUEsSUFBbUJDLE9BQU8sR0FBRyxFQUE3QjtBQUFBLElBQWlDQyxVQUFVLEdBQUcsRUFBOUM7Ozs7QUFFQUYsUUFBUSxDQUFDRyxRQUFUO0FBQUEsNkNBQW9CLFdBQWdCQyxPQUFoQixFQUF5QkMsU0FBUyxHQUFHLElBQXJDLEVBQTJDO0FBRTdEQyxvQkFBSUMsSUFBSixDQUFTLDhDQUFUOztBQUNBLGlCQUFhLEtBQUtDLFlBQUwsQ0FBa0JKLE9BQWxCLEVBQTJCQyxTQUEzQixDQUFiO0FBQ0QsR0FKRDs7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFNQUwsUUFBUSxDQUFDUSxZQUFUO0FBQUEsOENBQXdCLFdBQWdCSixPQUFoQixFQUF5QkMsU0FBUyxHQUFHLElB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Q0FBQ0ssU0FBbEIsRUFBNkI7QUFBQ0UsSUFBQUEsT0FBTyxFQUFFUDtBQUFWLEdBQTdCLENBQWxCOztBQUNBLFFBQU1RLFNBQVMsU0FBU0gsU0FBUyxDQUFDcEIsY0FBS3dCLFFBQU4sQ0FBakM7QUFDQSxTQUFPRCxTQUFTLENBQUMzRCxRQUFWLENBQW1CLFFBQW5CLENBQVA7QUFDRCxDQW5DRDtBQXFDQTZELE1BQU0sQ0FBQ0MsTUFBUCxDQUFjdEssVUFBZCxFQUEwQkYsUUFBMUIsRUFBb0NDLE9BQXBDO2VBRWVDLFUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYW5kcm9pZEhlbHBlcnMgZnJvbSAnLi4vYW5kcm9pZC1oZWxwZXJzJztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgdGVtcCBmcm9tICd0ZW1wJztcbmltcG9ydCB7IGZzLCB1dGlsLCB6aXAgfSBmcm9tICdhcHBpdW0tc3VwcG9ydCc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCBsb2cgZnJvbSAnLi4vbG9nZ2VyJztcbmltcG9ydCBCIGZyb20gJ2JsdWViaXJkJztcbmltcG9ydCBqaW1wIGZyb20gJ2ppbXAnO1xuaW1wb3J0IHsgZXhlYyB9IGZyb20gJ3RlZW5fcHJvY2Vzcyc7XG5cbmNvbnN0IHN3aXBlU3RlcHNQZXJTZWMgPSAyODtcbmNvbnN0IGRyYWdTdGVwc1BlclNlYyA9IDQwO1xuY29uc3QgQ09OVEFJTkVSX1BBVEhfTUFSS0VSID0gJ0AnO1xuLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci9QTGRCMEcvMlxuY29uc3QgQ09OVEFJTkVSX1BBVEhfUEFUVEVSTiA9IG5ldyBSZWdFeHAoYF4ke0NPTlRBSU5FUl9QQVRIX01BUktFUn0oW14vXSspLyguKylgKTtcbmNvbnN0IEFORFJPSURfTUVESUFfUkVTQ0FOX0lOVEVOVCA9ICdhbmRyb2lkLmludGVudC5hY3Rpb24uTUVESUFfU0NBTk5FUl9TQ0FOX0ZJTEUnO1xuXG5sZXQgY29tbWFuZHMgPSB7fSwgaGVscGVycyA9IHt9LCBleHRlbnNpb25zID0ge307XG5cbmNvbW1hbmRzLmtleWV2ZW50ID0gYXN5bmMgZnVuY3Rpb24gKGtleWNvZGUsIG1ldGFzdGF0ZSA9IG51bGwpIHtcbiAgLy8gVE9ETyBkZXByZWNhdGUga2V5ZXZlbnQ7IGN1cnJlbnRseSB3ZCBvbmx5IGltcGxlbWVudHMga2V5ZXZlbnRcbiAgbG9nLndhcm4oXCJrZXlldmVudCB3aWxsIGJlIGRlcHJlY2F0ZWQgdXNlIHByZXNzS2V5Q29kZVwiKTtcbiAgcmV0dXJuIGF3YWl0IHRoaXMucHJlc3NLZXlDb2RlKGtleWNvZGUsIG1ldGFzdGF0ZSk7XG59O1xuXG5jb21tYW5kcy5wcmVzc0tleUNvZGUgPSBhc3luYyBmdW5jdGlvbiAoa2V5Y29kZSwgbWV0YXN0YXRlID0gbnVsbCkge1xuICByZXR1cm4gYXdhaXQgdGhpcy5ib290c3RyYXAuc2VuZEFjdGlvbihcInByZXNzS2V5Q29kZVwiLCB7a2V5Y29kZSwgbWV0YXN0YXRlfSk7XG59O1xuXG5jb21tYW5kcy5sb25nUHJlc3NLZXlDb2RlID0gYXN5bmMgZnVuY3Rpb24gKGtleWNvZGUsIG1ldGFzdGF0ZSA9IG51bGwpIHtcbiAgcmV0dXJuIGF3YWl0IHRoaXMuYm9vdHN0cmFwLnNlbmRBY3Rpb24oXCJsb25nUHJlc3NLZXlDb2RlXCIsIHtrZXljb2RlLCBtZXRhc3RhdGV9KTtcbn07XG5cbmNvbW1hbmRzLmdldE9yaWVudGF0aW9uID0gYXN5bmMgZnVuY3Rpb24gKCkge1xuICBsZXQgcGFyYW1zID0ge1xuICAgIG5hdHVyYWxPcmllbnRhdGlvbjogISF0aGlzLm9wdHMuYW5kcm9pZE5hdHVyYWxPcmllbnRhdGlvbixcbiAgfTtcbiAgbGV0IG9yaWVudGF0aW9uID0gYXdhaXQgdGhpcy5ib290c3RyYXAuc2VuZEFjdGlvbihcIm9yaWVudGF0aW9uXCIsIHBhcmFtcyk7XG4gIHJldHVybiBvcmllbnRhdGlvbi50b1VwcGVyQ2FzZSgpO1xufTtcblxuY29tbWFuZHMuc2V0T3JpZW50YXRpb24gPSBhc3luYyBmdW5jdGlvbiAob3JpZW50YXRpb24pIHtcbiAgb3JpZW50YXRpb24gPSBvcmllbnRhdGlvbi50b1VwcGVyQ2FzZSgpO1xuICBsZXQgcGFyYW1zID0ge1xuICAgIG9yaWVudGF0aW9uLFxuICAgIG5hdHVyYWxPcmllbnRhdGlvbjogISF0aGlzLm9wdHMuYW5kcm9pZE5hdHVyYWxPcmllbnRhdGlvbixcbiAgfTtcbiAgcmV0dXJuIGF3YWl0IHRoaXMuYm9vdHN0cmFwLnNlbmRBY3Rpb24oXCJvcmllbnRhdGlvblwiLCBwYXJhbXMpO1xufTtcblxuY29tbWFuZHMuZmFrZUZsaWNrID0gYXN5bmMgZnVuY3Rpb24gKHhTcGVlZCwgeVNwZWVkKSB7XG4gIHJldHVybiBhd2FpdCB0aGlzLmJvb3RzdHJhcC5zZW5kQWN0aW9uKCdmbGljaycsIHt4U3BlZWQsIHlTcGVlZH0pO1xufTtcblxuY29tbWFuZHMuZmFrZUZsaWNrRWxlbWVudCA9IGFzeW5jIGZ1bmN0aW9uIChlbGVtZW50SWQsIHhvZmZzZXQsIHlvZmZzZXQsIHNwZWVkKSB7XG4gIGxldCBwYXJhbXMgPSB7eG9mZnNldCwgeW9mZnNldCwgc3BlZWQsIGVsZW1lbnRJZH07XG4gIHJldHVybiBhd2FpdCB0aGlzLmJvb3RzdHJhcC5zZW5kQWN0aW9uKCdlbGVtZW50OmZsaWNrJywgcGFyYW1zKTtcbn07XG5cbmNvbW1hbmRzLnN3aXBlID0gYXN5bmMgZnVuY3Rpb24gKHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZLCBkdXJhdGlvbiwgdG91Y2hDb3VudCwgZWxJZCkge1xuICBpZiAoc3RhcnRYID09PSAnbnVsbCcpIHtcbiAgICBzdGFydFggPSAwLjU7XG4gIH1cbiAgaWYgKHN0YXJ0WSA9PT0gJ251bGwnKSB7XG4gICAgc3RhcnRZID0gMC41O1xuICB9XG4gIGxldCBzd2lwZU9wdHMgPSB7c3RhcnRYLCBzdGFydFksIGVuZFgsIGVuZFksXG4gICAgICAgICAgICAgICAgICAgc3RlcHM6IE1hdGgucm91bmQoZHVyYXRpb24gKiBzd2lwZVN0ZXBzUGVyU2VjKX07XG4gIC8vIGdvaW5nIHRoZSBsb25nIHdheSBhbmQgY2hlY2tpbmcgZm9yIHVuZGVmaW5lZCBhbmQgbnVsbCBzaW5jZVxuICAvLyB3ZSBjYW4ndCBiZSBhc3N1cmVkIGBlbElkYCBpcyBhIHN0cmluZyBhbmQgbm90IGFuIGludFxuICBpZiAodXRpbC5oYXNWYWx1ZShlbElkKSkge1xuICAgIHN3aXBlT3B0cy5lbGVtZW50SWQgPSBlbElkO1xuICB9XG4gIHJldHVybiBhd2FpdCB0aGlzLmRvU3dpcGUoc3dpcGVPcHRzKTtcbn07XG5cbmNvbW1hbmRzLmRvU3dpcGUgPSBhc3luYyBmdW5jdGlvbiAoc3dpcGVPcHRzKSB7XG4gIGlmICh1dGlsLmhhc1ZhbHVlKHN3aXBlT3B0cy5lbGVtZW50SWQpKSB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuYm9vdHN0cmFwLnNlbmRBY3Rpb24oXCJlbGVtZW50OnN3aXBlXCIsIHN3aXBlT3B0cyk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuYm9vdHN0cmFwLnNlbmRBY3Rpb24oXCJzd2lwZVwiLCBzd2lwZU9wdHMpO1xuICB9XG59O1xuXG5jb21tYW5kcy5waW5jaENsb3NlID0gYXN5bmMgZnVuY3Rpb24gKHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZLCBkdXJhdGlvbiwgcGVyY2VudCwgc3RlcHMsIGVsSWQpIHtcbiAgbGV0IHBpbmNoT3B0cyA9IHtcbiAgICBkaXJlY3Rpb246ICdpbicsXG4gICAgZWxlbWVudElkOiBlbElkLFxuICAgIHBlcmNlbnQsXG4gICAgc3RlcHNcbiAgfTtcbiAgcmV0dXJuIGF3YWl0IHRoaXMuYm9vdHN0cmFwLnNlbmRBY3Rpb24oXCJlbGVtZW50OnBpbmNoXCIsIHBpbmNoT3B0cyk7XG59O1xuXG5jb21tYW5kcy5waW5jaE9wZW4gPSBhc3luYyBmdW5jdGlvbiAoc3RhcnRYLCBzdGFydFksIGVuZFgsIGVuZFksIGR1cmF0aW9uLCBwZXJjZW50LCBzdGVwcywgZWxJZCkge1xuICBsZXQgcGluY2hPcHRzID0ge2RpcmVjdGlvbjogJ291dCcsIGVsZW1lbnRJZDogZWxJZCwgcGVyY2VudCwgc3RlcHN9O1xuICByZXR1cm4gYXdhaXQgdGhpcy5ib290c3RyYXAuc2VuZEFjdGlvbihcImVsZW1lbnQ6cGluY2hcIiwgcGluY2hPcHRzKTtcbn07XG5cbmNvbW1hbmRzLmZsaWNrID0gYXN5bmMgZnVuY3Rpb24gKGVsZW1lbnQsIHhTcGVlZCwgeVNwZWVkLCB4T2Zmc2V0LCB5T2Zmc2V0LCBzcGVlZCkge1xuICBpZiAoZWxlbWVudCkge1xuICAgIGF3YWl0IHRoaXMuZmFrZUZsaWNrRWxlbWVudChlbGVtZW50LCB4T2Zmc2V0LCB5T2Zmc2V0LCBzcGVlZCk7XG4gIH0gZWxzZSB7XG4gICAgYXdhaXQgdGhpcy5mYWtlRmxpY2soeFNwZWVkLCB5U3BlZWQpO1xuICB9XG59O1xuXG5jb21tYW5kcy5kcmFnID0gYXN5bmMgZnVuY3Rpb24gKHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZLCBkdXJhdGlvbiwgdG91Y2hDb3VudCwgZWxlbWVudElkLCBkZXN0RWxJZCkge1xuICBsZXQgZHJhZ09wdHMgPSB7XG4gICAgZWxlbWVudElkLCBkZXN0RWxJZCwgc3RhcnRYLCBzdGFydFksIGVuZFgsIGVuZFksXG4gICAgc3RlcHM6IE1hdGgucm91bmQoZHVyYXRpb24gKiBkcmFnU3RlcHNQZXJTZWMpXG4gIH07XG4gIHJldHVybiBhd2FpdCB0aGlzLmRvRHJhZyhkcmFnT3B0cyk7XG5cbn07XG5cbmNvbW1hbmRzLmRvRHJhZyA9IGFzeW5jIGZ1bmN0aW9uIChkcmFnT3B0cykge1xuICBpZiAodXRpbC5oYXNWYWx1ZShkcmFnT3B0cy5lbGVtZW50SWQpKSB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuYm9vdHN0cmFwLnNlbmRBY3Rpb24oXCJlbGVtZW50OmRyYWdcIiwgZHJhZ09wdHMpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLmJvb3RzdHJhcC5zZW5kQWN0aW9uKFwiZHJhZ1wiLCBkcmFnT3B0cyk7XG4gIH1cbn07XG5cbmNvbW1hbmRzLmxvY2sgPSBhc3luYyBmdW5jdGlvbiAoc2Vjb25kcykge1xuICBhd2FpdCB0aGlzLmFkYi5sb2NrKCk7XG4gIGlmIChpc05hTihzZWNvbmRzKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IGZsb2F0U2Vjb25kcyA9IHBhcnNlRmxvYXQoc2Vjb25kcyk7XG4gIGlmIChmbG9hdFNlY29uZHMgPD0gMCkge1xuICAgIHJldHVybjtcbiAgfVxuICBhd2FpdCBCLmRlbGF5KDEwMDAgKiBmbG9hdFNlY29uZHMpO1xuICBhd2FpdCB0aGlzLnVubG9jaygpO1xufTtcblxuY29tbWFuZHMuaXNMb2NrZWQgPSBhc3luYyBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBhd2FpdCB0aGlzLmFkYi5pc1NjcmVlbkxvY2tlZCgpO1xufTtcblxuY29tbWFuZHMudW5sb2NrID0gYXN5bmMgZnVuY3Rpb24gKCkge1xuICByZXR1cm4gYXdhaXQgYW5kcm9pZEhlbHBlcnMudW5sb2NrKHRoaXMsIHRoaXMuYWRiLCB0aGlzLmNhcHMpO1xufTtcblxuY29tbWFuZHMub3Blbk5vdGlmaWNhdGlvbnMgPSBhc3luYyBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBhd2FpdCB0aGlzLmJvb3RzdHJhcC5zZW5kQWN0aW9uKFwib3Blbk5vdGlmaWNhdGlvblwiKTtcbn07XG5cbmNvbW1hbmRzLnNldExvY2F0aW9uID0gYXN5bmMgZnVuY3Rpb24gKGxhdGl0dWRlLCBsb25naXR1ZGUpIHtcbiAgcmV0dXJuIGF3YWl0IHRoaXMuYWRiLnNlbmRUZWxuZXRDb21tYW5kKGBnZW8gZml4ICR7bG9uZ2l0dWRlfSAke2xhdGl0dWRlfWApO1xufTtcblxuZnVuY3Rpb24gcGFyc2VDb250YWluZXJQYXRoIChyZW1vdGVQYXRoKSB7XG4gIGNvbnN0IG1hdGNoID0gQ09OVEFJTkVSX1BBVEhfUEFUVEVSTi5leGVjKHJlbW90ZVBhdGgpO1xuICBpZiAoIW1hdGNoKSB7XG4gICAgbG9nLmVycm9yQW5kVGhyb3coYEl0IGlzIGV4cGVjdGVkIHRoYXQgcGFja2FnZSBpZGVudGlmaWVyIGlzIHNlcGFyYXRlZCBmcm9tIHRoZSByZWxhdGl2ZSBwYXRoIHdpdGggYSBzaW5nbGUgc2xhc2guIGAgK1xuICAgICAgICAgICAgICAgICAgICAgIGAnJHtyZW1vdGVQYXRofScgaXMgZ2l2ZW4gaW5zdGVhZGApO1xuICB9XG4gIHJldHVybiBbbWF0Y2hbMV0sIHBhdGgucG9zaXgucmVzb2x2ZShgL2RhdGEvZGF0YS8ke21hdGNoWzFdfWAsIG1hdGNoWzJdKV07XG59XG5cbmNvbW1hbmRzLnB1bGxGaWxlID0gYXN5bmMgZnVuY3Rpb24gKHJlbW90ZVBhdGgpIHtcbiAgaWYgKHJlbW90ZVBhdGguZW5kc1dpdGgoJy8nKSkge1xuICAgIGxvZy5lcnJvckFuZFRocm93KGBJdCBpcyBleHBlY3RlZCB0aGF0IHJlbW90ZSBwYXRoIHBvaW50cyB0byBhIGZpbGUgYW5kIG5vdCB0byBhIGZvbGRlci4gYCArXG4gICAgICAgICAgICAgICAgICAgICAgYCcke3JlbW90ZVBhdGh9JyBpcyBnaXZlbiBpbnN0ZWFkYCk7XG4gIH1cbiAgbGV0IHRtcERlc3RpbmF0aW9uID0gbnVsbDtcbiAgaWYgKHJlbW90ZVBhdGguc3RhcnRzV2l0aChDT05UQUlORVJfUEFUSF9NQVJLRVIpKSB7XG4gICAgY29uc3QgW3BhY2thZ2VJZCwgcGF0aEluQ29udGFpbmVyXSA9IHBhcnNlQ29udGFpbmVyUGF0aChyZW1vdGVQYXRoKTtcbiAgICBsb2cuaW5mbyhgUGFyc2VkIHBhY2thZ2UgaWRlbnRpZmllciAnJHtwYWNrYWdlSWR9JyBmcm9tICcke3JlbW90ZVBhdGh9Jy4gV2lsbCBnZXQgdGhlIGRhdGEgZnJvbSAnJHtwYXRoSW5Db250YWluZXJ9J2ApO1xuICAgIHRtcERlc3RpbmF0aW9uID0gYC9kYXRhL2xvY2FsL3RtcC8ke3BhdGgucG9zaXguYmFzZW5hbWUocGF0aEluQ29udGFpbmVyKX1gO1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLmFkYi5zaGVsbChbJ3J1bi1hcycsIHBhY2thZ2VJZCwgYGNobW9kIDc3NyAnJHtwYXRoSW5Db250YWluZXIucmVwbGFjZSgvJy9nLCAnXFxcXFxcJycpfSdgXSk7XG4gICAgICBhd2FpdCB0aGlzLmFkYi5zaGVsbChbJ2NwJywgJy1mJywgcGF0aEluQ29udGFpbmVyLCB0bXBEZXN0aW5hdGlvbl0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGxvZy5lcnJvckFuZFRocm93KGBDYW5ub3QgYWNjZXNzIHRoZSBjb250YWluZXIgb2YgJyR7cGFja2FnZUlkfScgYXBwbGljYXRpb24uIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYElzIHRoZSBhcHBsaWNhdGlvbiBpbnN0YWxsZWQgYW5kIGhhcyAnZGVidWdnYWJsZScgYnVpbGQgb3B0aW9uIHNldCB0byB0cnVlPyBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBPcmlnaW5hbCBlcnJvcjogJHtlLm1lc3NhZ2V9YCk7XG4gICAgfVxuICB9XG4gIGNvbnN0IGxvY2FsRmlsZSA9IHRlbXAucGF0aCh7cHJlZml4OiAnYXBwaXVtJywgc3VmZml4OiAnLnRtcCd9KTtcbiAgdHJ5IHtcbiAgICBhd2FpdCB0aGlzLmFkYi5wdWxsKF8uaXNTdHJpbmcodG1wRGVzdGluYXRpb24pID8gdG1wRGVzdGluYXRpb24gOiByZW1vdGVQYXRoLCBsb2NhbEZpbGUpO1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBmcy5yZWFkRmlsZShsb2NhbEZpbGUpO1xuICAgIHJldHVybiBCdWZmZXIuZnJvbShkYXRhKS50b1N0cmluZygnYmFzZTY0Jyk7XG4gIH0gZmluYWxseSB7XG4gICAgaWYgKGF3YWl0IGZzLmV4aXN0cyhsb2NhbEZpbGUpKSB7XG4gICAgICBhd2FpdCBmcy51bmxpbmsobG9jYWxGaWxlKTtcbiAgICB9XG4gICAgaWYgKF8uaXNTdHJpbmcodG1wRGVzdGluYXRpb24pKSB7XG4gICAgICBhd2FpdCB0aGlzLmFkYi5zaGVsbChbJ3JtJywgJy1mJywgdG1wRGVzdGluYXRpb25dKTtcbiAgICB9XG4gIH1cbn07XG5cbmNvbW1hbmRzLnB1c2hGaWxlID0gYXN5bmMgZnVuY3Rpb24gKHJlbW90ZVBhdGgsIGJhc2U2NERhdGEpIHtcbiAgaWYgKHJlbW90ZVBhdGguZW5kc1dpdGgoJy8nKSkge1xuICAgIGxvZy5lcnJvckFuZFRocm93KGBJdCBpcyBleHBlY3RlZCB0aGF0IHJlbW90ZSBwYXRoIHBvaW50cyB0byBhIGZpbGUgYW5kIG5vdCB0byBhIGZvbGRlci4gYCArXG4gICAgICAgICAgICAgICAgICAgICAgYCcke3JlbW90ZVBhdGh9JyBpcyBnaXZlbiBpbnN0ZWFkYCk7XG4gIH1cbiAgY29uc3QgbG9jYWxGaWxlID0gdGVtcC5wYXRoKHtwcmVmaXg6ICdhcHBpdW0nLCBzdWZmaXg6ICcudG1wJ30pO1xuICBpZiAoXy5pc0FycmF5KGJhc2U2NERhdGEpKSB7XG4gICAgLy8gc29tZSBjbGllbnRzIChhaGVtKSBqYXZhLCBzZW5kIGEgYnl0ZSBhcnJheSBlbmNvZGluZyB1dGY4IGNoYXJhY3RlcnNcbiAgICAvLyBpbnN0ZWFkIG9mIGEgc3RyaW5nLCB3aGljaCB3b3VsZCBiZSBpbmZpbml0ZWx5IGJldHRlciFcbiAgICBiYXNlNjREYXRhID0gQnVmZmVyLmZyb20oYmFzZTY0RGF0YSkudG9TdHJpbmcoJ3V0ZjgnKTtcbiAgfVxuICBjb25zdCBjb250ZW50ID0gQnVmZmVyLmZyb20oYmFzZTY0RGF0YSwgJ2Jhc2U2NCcpO1xuICBsZXQgdG1wRGVzdGluYXRpb24gPSBudWxsO1xuICB0cnkge1xuICAgIGF3YWl0IGZzLndyaXRlRmlsZShsb2NhbEZpbGUsIGNvbnRlbnQudG9TdHJpbmcoJ2JpbmFyeScpLCAnYmluYXJ5Jyk7XG4gICAgaWYgKHJlbW90ZVBhdGguc3RhcnRzV2l0aChDT05UQUlORVJfUEFUSF9NQVJLRVIpKSB7XG4gICAgICBjb25zdCBbcGFja2FnZUlkLCBwYXRoSW5Db250YWluZXJdID0gcGFyc2VDb250YWluZXJQYXRoKHJlbW90ZVBhdGgpO1xuICAgICAgbG9nLmluZm8oYFBhcnNlZCBwYWNrYWdlIGlkZW50aWZpZXIgJyR7cGFja2FnZUlkfScgZnJvbSAnJHtyZW1vdGVQYXRofScuIFdpbGwgcHV0IHRoZSBkYXRhIGludG8gJyR7cGF0aEluQ29udGFpbmVyfSdgKTtcbiAgICAgIHRtcERlc3RpbmF0aW9uID0gYC9kYXRhL2xvY2FsL3RtcC8ke3BhdGgucG9zaXguYmFzZW5hbWUocGF0aEluQ29udGFpbmVyKX1gO1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgdGhpcy5hZGIuc2hlbGwoXG4gICAgICAgICAgWydydW4tYXMnLCBwYWNrYWdlSWQsIGBta2RpciAtcCAnJHtwYXRoLnBvc2l4LmRpcm5hbWUocGF0aEluQ29udGFpbmVyKS5yZXBsYWNlKC8nL2csICdcXFxcXFwnJyl9J2BdXG4gICAgICAgICk7XG4gICAgICAgIGF3YWl0IHRoaXMuYWRiLnNoZWxsKFsncnVuLWFzJywgcGFja2FnZUlkLCBgdG91Y2ggJyR7cGF0aEluQ29udGFpbmVyLnJlcGxhY2UoLycvZywgJ1xcXFxcXCcnKX0nYF0pO1xuICAgICAgICBhd2FpdCB0aGlzLmFkYi5zaGVsbChbJ3J1bi1hcycsIHBhY2thZ2VJZCwgYGNobW9kIDc3NyAnJHtwYXRoSW5Db250YWluZXIucmVwbGFjZSgvJy9nLCAnXFxcXFxcJycpfSdgXSk7XG4gICAgICAgIGF3YWl0IHRoaXMuYWRiLnB1c2gobG9jYWxGaWxlLCB0bXBEZXN0aW5hdGlvbik7XG4gICAgICAgIGF3YWl0IHRoaXMuYWRiLnNoZWxsKFsnY3AnLCAnLWYnLCB0bXBEZXN0aW5hdGlvbiwgcGF0aEluQ29udGFpbmVyXSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGxvZy5lcnJvckFuZFRocm93KGBDYW5ub3QgYWNjZXNzIHRoZSBjb250YWluZXIgb2YgJyR7cGFja2FnZUlkfScgYXBwbGljYXRpb24uIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICBgSXMgdGhlIGFwcGxpY2F0aW9uIGluc3RhbGxlZCBhbmQgaGFzICdkZWJ1Z2dhYmxlJyBidWlsZCBvcHRpb24gc2V0IHRvIHRydWU/IGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICBgT3JpZ2luYWwgZXJyb3I6ICR7ZS5tZXNzYWdlfWApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBhZGIgcHVzaCBjcmVhdGVzIGZvbGRlcnMgYW5kIG92ZXJ3cml0ZXMgZXhpc3RpbmcgZmlsZXMuXG4gICAgICBhd2FpdCB0aGlzLmFkYi5wdXNoKGxvY2FsRmlsZSwgcmVtb3RlUGF0aCk7XG5cbiAgICAgIC8vIGlmIHdlIGhhdmUgcHVzaGVkIGEgZmlsZSwgaXQgbWlnaHQgYmUgYSBtZWRpYSBmaWxlLCBzbyBlbnN1cmUgdGhhdFxuICAgICAgLy8gYXBwcyBrbm93IGFib3V0IGl0XG4gICAgICBsb2cuaW5mbyhcIkFmdGVyIHB1c2hpbmcgbWVkaWEgZmlsZSwgYnJvYWRjYXN0aW5nIG1lZGlhIHNjYW4gaW50ZW50XCIpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgdGhpcy5hZGIuc2hlbGwoWydhbScsICdicm9hZGNhc3QnLCAnLWEnLFxuICAgICAgICAgIEFORFJPSURfTUVESUFfUkVTQ0FOX0lOVEVOVCwgJy1kJywgYGZpbGU6Ly8ke3JlbW90ZVBhdGh9YF0pO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBsb2cud2FybihgR290IGVycm9yIGJyb2FkY2FzdGluZyBtZWRpYSBzY2FuIGludGVudDogJHtlLm1lc3NhZ2V9OyBpZ25vcmluZ2ApO1xuICAgICAgfVxuICAgIH1cbiAgfSBmaW5hbGx5IHtcbiAgICBpZiAoYXdhaXQgZnMuZXhpc3RzKGxvY2FsRmlsZSkpIHtcbiAgICAgIGF3YWl0IGZzLnVubGluayhsb2NhbEZpbGUpO1xuICAgIH1cbiAgICBpZiAoXy5pc1N0cmluZyh0bXBEZXN0aW5hdGlvbikpIHtcbiAgICAgIGF3YWl0IHRoaXMuYWRiLnNoZWxsKFsncm0nLCAnLWYnLCB0bXBEZXN0aW5hdGlvbl0pO1xuICAgIH1cbiAgfVxufTtcblxuY29tbWFuZHMucHVsbEZvbGRlciA9IGFzeW5jIGZ1bmN0aW9uIChyZW1vdGVQYXRoKSB7XG4gIGxldCBsb2NhbEZvbGRlciA9IHRlbXAucGF0aCh7cHJlZml4OiAnYXBwaXVtJ30pO1xuICBhd2FpdCB0aGlzLmFkYi5wdWxsKHJlbW90ZVBhdGgsIGxvY2FsRm9sZGVyKTtcbiAgcmV0dXJuIChhd2FpdCB6aXAudG9Jbk1lbW9yeVppcChsb2NhbEZvbGRlcikpLnRvU3RyaW5nKCdiYXNlNjQnKTtcbn07XG5cbmNvbW1hbmRzLmZpbmdlcnByaW50ID0gYXN5bmMgZnVuY3Rpb24gKGZpbmdlcnByaW50SWQpIHtcbiAgaWYgKCF0aGlzLmlzRW11bGF0b3IoKSkge1xuICAgIGxvZy5lcnJvckFuZFRocm93KFwiZmluZ2VycHJpbnQgbWV0aG9kIGlzIG9ubHkgYXZhaWxhYmxlIGZvciBlbXVsYXRvcnNcIik7XG4gIH1cbiAgYXdhaXQgdGhpcy5hZGIuZmluZ2VycHJpbnQoZmluZ2VycHJpbnRJZCk7XG59O1xuXG5jb21tYW5kcy5zZW5kU01TID0gYXN5bmMgZnVuY3Rpb24gKHBob25lTnVtYmVyLCBtZXNzYWdlKSB7XG4gIGlmICghdGhpcy5pc0VtdWxhdG9yKCkpIHtcbiAgICBsb2cuZXJyb3JBbmRUaHJvdyhcInNlbmRTTVMgbWV0aG9kIGlzIG9ubHkgYXZhaWxhYmxlIGZvciBlbXVsYXRvcnNcIik7XG4gIH1cbiAgYXdhaXQgdGhpcy5hZGIuc2VuZFNNUyhwaG9uZU51bWJlciwgbWVzc2FnZSk7XG59O1xuXG5jb21tYW5kcy5nc21DYWxsID0gYXN5bmMgZnVuY3Rpb24gKHBob25lTnVtYmVyLCBhY3Rpb24pIHtcbiAgaWYgKCF0aGlzLmlzRW11bGF0b3IoKSkge1xuICAgIGxvZy5lcnJvckFuZFRocm93KFwiZ3NtQ2FsbCBtZXRob2QgaXMgb25seSBhdmFpbGFibGUgZm9yIGVtdWxhdG9yc1wiKTtcbiAgfVxuICBhd2FpdCB0aGlzLmFkYi5nc21DYWxsKHBob25lTnVtYmVyLCBhY3Rpb24pO1xufTtcblxuY29tbWFuZHMuZ3NtU2lnbmFsID0gYXN5bmMgZnVuY3Rpb24gKHNpZ25hbFN0cmVuZ2gpIHtcbiAgaWYgKCF0aGlzLmlzRW11bGF0b3IoKSkge1xuICAgIGxvZy5lcnJvckFuZFRocm93KFwiZ3NtU2lnbmFsIG1ldGhvZCBpcyBvbmx5IGF2YWlsYWJsZSBmb3IgZW11bGF0b3JzXCIpO1xuICB9XG4gIGF3YWl0IHRoaXMuYWRiLmdzbVNpZ25hbChzaWduYWxTdHJlbmdoKTtcbn07XG5cbmNvbW1hbmRzLmdzbVZvaWNlID0gYXN5bmMgZnVuY3Rpb24gKHN0YXRlKSB7XG4gIGlmICghdGhpcy5pc0VtdWxhdG9yKCkpIHtcbiAgICBsb2cuZXJyb3JBbmRUaHJvdyhcImdzbVZvaWNlIG1ldGhvZCBpcyBvbmx5IGF2YWlsYWJsZSBmb3IgZW11bGF0b3JzXCIpO1xuICB9XG4gIGF3YWl0IHRoaXMuYWRiLmdzbVZvaWNlKHN0YXRlKTtcbn07XG5cbmNvbW1hbmRzLnBvd2VyQUMgPSBhc3luYyBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgaWYgKCF0aGlzLmlzRW11bGF0b3IoKSkge1xuICAgIGxvZy5lcnJvckFuZFRocm93KFwicG93ZXJBQyBtZXRob2QgaXMgb25seSBhdmFpbGFibGUgZm9yIGVtdWxhdG9yc1wiKTtcbiAgfVxuICBhd2FpdCB0aGlzLmFkYi5wb3dlckFDKHN0YXRlKTtcbn07XG5cbmNvbW1hbmRzLnBvd2VyQ2FwYWNpdHkgPSBhc3luYyBmdW5jdGlvbiAoYmF0dGVyeVBlcmNlbnQpIHtcbiAgaWYgKCF0aGlzLmlzRW11bGF0b3IoKSkge1xuICAgIGxvZy5lcnJvckFuZFRocm93KFwicG93ZXJDYXBhY2l0eSBtZXRob2QgaXMgb25seSBhdmFpbGFibGUgZm9yIGVtdWxhdG9yc1wiKTtcbiAgfVxuICBhd2FpdCB0aGlzLmFkYi5wb3dlckNhcGFjaXR5KGJhdHRlcnlQZXJjZW50KTtcbn07XG5cbmNvbW1hbmRzLm5ldHdvcmtTcGVlZCA9IGFzeW5jIGZ1bmN0aW9uIChuZXR3b3JrU3BlZWQpIHtcbiAgaWYgKCF0aGlzLmlzRW11bGF0b3IoKSkge1xuICAgIGxvZy5lcnJvckFuZFRocm93KFwibmV0d29ya1NwZWVkIG1ldGhvZCBpcyBvbmx5IGF2YWlsYWJsZSBmb3IgZW11bGF0b3JzXCIpO1xuICB9XG4gIGF3YWl0IHRoaXMuYWRiLm5ldHdvcmtTcGVlZChuZXR3b3JrU3BlZWQpO1xufTtcblxuaGVscGVycy5nZXRTY3JlZW5zaG90RGF0YVdpdGhBZGJTaGVsbCA9IGFzeW5jIGZ1bmN0aW9uIChhZGIsIG9wdHMpIHtcbiAgY29uc3QgbG9jYWxGaWxlID0gdGVtcC5wYXRoKHtwcmVmaXg6ICdhcHBpdW0nLCBzdWZmaXg6ICcucG5nJ30pO1xuICBpZiAoYXdhaXQgZnMuZXhpc3RzKGxvY2FsRmlsZSkpIHtcbiAgICBhd2FpdCBmcy51bmxpbmsobG9jYWxGaWxlKTtcbiAgfVxuICB0cnkge1xuICAgIGNvbnN0IHBuZ0RpciA9IG9wdHMuYW5kcm9pZFNjcmVlbnNob3RQYXRoIHx8ICcvZGF0YS9sb2NhbC90bXAvJztcbiAgICBjb25zdCBwbmcgPSBwYXRoLnBvc2l4LnJlc29sdmUocG5nRGlyLCAnc2NyZWVuc2hvdC5wbmcnKTtcbiAgICBjb25zdCBjbWQgPSBbJy9zeXN0ZW0vYmluL3JtJywgYCR7cG5nfTtgLCAnL3N5c3RlbS9iaW4vc2NyZWVuY2FwJywgJy1wJywgcG5nXTtcbiAgICBhd2FpdCBhZGIuc2hlbGwoY21kKTtcbiAgICBpZiAoIWF3YWl0IGFkYi5maWxlU2l6ZShwbmcpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBzaXplIG9mIHRoZSB0YWtlbiBzY3JlZW5zaG90IGVxdWFscyB0byB6ZXJvLicpO1xuICAgIH1cbiAgICBhd2FpdCBhZGIucHVsbChwbmcsIGxvY2FsRmlsZSk7XG4gICAgcmV0dXJuIGF3YWl0IGppbXAucmVhZChsb2NhbEZpbGUpO1xuICB9IGZpbmFsbHkge1xuICAgIGlmIChhd2FpdCBmcy5leGlzdHMobG9jYWxGaWxlKSkge1xuICAgICAgYXdhaXQgZnMudW5saW5rKGxvY2FsRmlsZSk7XG4gICAgfVxuICB9XG59O1xuXG5oZWxwZXJzLmdldFNjcmVlbnNob3REYXRhV2l0aEFkYkV4ZWNPdXQgPSBhc3luYyBmdW5jdGlvbiAoYWRiKSB7XG4gIGxldCB7c3Rkb3V0LCBzdGRlcnIsIGNvZGV9ID0gYXdhaXQgZXhlYyhhZGIuZXhlY3V0YWJsZS5wYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRiLmV4ZWN1dGFibGUuZGVmYXVsdEFyZ3NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvbmNhdChbJ2V4ZWMtb3V0JywgJy9zeXN0ZW0vYmluL3NjcmVlbmNhcCcsICctcCddKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlbmNvZGluZzogJ2JpbmFyeScsIGlzQnVmZmVyOiB0cnVlfSk7XG4gIC8vIGlmIHRoZXJlIGlzIGFuIGVycm9yLCB0aHJvd1xuICBpZiAoY29kZSB8fCBzdGRlcnIubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBTY3JlZW5zaG90IHJldHVybmVkIGVycm9yLCBjb2RlOiAnJHtjb2RlfScsIHN0ZGVycjogJyR7c3RkZXJyLnRvU3RyaW5nKCl9J2ApO1xuICB9XG4gIC8vIGlmIHdlIGRvbid0IGdldCBhbnl0aGluZyBhdCBhbGwsIHRocm93XG4gIGlmICghc3Rkb3V0Lmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBFcnJvcignU2NyZWVuc2hvdCByZXR1cm5lZCBubyBkYXRhJyk7XG4gIH1cblxuICByZXR1cm4gYXdhaXQgamltcC5yZWFkKHN0ZG91dCk7XG59O1xuXG5jb21tYW5kcy5nZXRTY3JlZW5zaG90ID0gYXN5bmMgZnVuY3Rpb24gKCkge1xuICBjb25zdCBhcGlMZXZlbCA9IGF3YWl0IHRoaXMuYWRiLmdldEFwaUxldmVsKCk7XG4gIGxldCBpbWFnZSA9IG51bGw7XG4gIGlmIChhcGlMZXZlbCA+IDIwKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFRoaXMgc2NyZWVuc2hvdGluZyBhcHByb2FjaCBpcyB3YXkgZmFzdGVyLCBzaW5jZSBpdCByZXF1aXJlcyBsZXNzIGV4dGVybmFsIGNvbW1hbmRzXG4gICAgICAvLyB0byBiZSBleGVjdXRlZC4gVW5mb3J0dW5hdGVseSwgZXhlYy1vdXQgb3B0aW9uIGlzIG9ubHkgc3VwcG9ydGVkIGJ5IG5ld2VyIEFuZHJvaWQvU0RLIHZlcnNpb25zICg1LjAgYW5kIGxhdGVyKVxuICAgICAgaW1hZ2UgPSBhd2FpdCB0aGlzLmdldFNjcmVlbnNob3REYXRhV2l0aEFkYkV4ZWNPdXQodGhpcy5hZGIpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGxvZy5pbmZvKGBDYW5ub3QgZ2V0IHNjcmVlbnNob3QgZGF0YSB3aXRoICdhZGIgZXhlYy1vdXQnIGJlY2F1c2Ugb2YgJyR7ZS5tZXNzYWdlfScuIGAgK1xuICAgICAgICAgICAgICAgYERlZmF1bHRpbmcgdG8gJ2FkYiBzaGVsbCcgY2FsbGApO1xuICAgIH1cbiAgfVxuICBpZiAoIWltYWdlKSB7XG4gICAgdHJ5IHtcbiAgICAgIGltYWdlID0gYXdhaXQgdGhpcy5nZXRTY3JlZW5zaG90RGF0YVdpdGhBZGJTaGVsbCh0aGlzLmFkYiwgdGhpcy5vcHRzKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zdCBlcnIgPSBgQ2Fubm90IGdldCBzY3JlZW5zaG90IGRhdGEgYmVjYXVzZSBvZiAnJHtlLm1lc3NhZ2V9Jy4gYCArXG4gICAgICAgICAgICAgICAgICBgTWFrZSBzdXJlIHRoZSAnTGF5b3V0UGFyYW1zLkZMQUdfU0VDVVJFJyBpcyBub3Qgc2V0IGZvciBgICtcbiAgICAgICAgICAgICAgICAgIGB0aGUgY3VycmVudCB2aWV3YDtcbiAgICAgIGxvZy5lcnJvckFuZFRocm93KGVycik7XG4gICAgfVxuICB9XG4gIGlmIChhcGlMZXZlbCA8IDIzKSB7XG4gICAgLy8gQW5kcm9pZCBidWcgODQzMzc0MiAtIHJvdGF0ZSBzY3JlZW5zaG90IGlmIHNjcmVlbiBpcyByb3RhdGVkXG4gICAgbGV0IHNjcmVlbk9yaWVudGF0aW9uID0gYXdhaXQgdGhpcy5hZGIuZ2V0U2NyZWVuT3JpZW50YXRpb24oKTtcbiAgICB0cnkge1xuICAgICAgaW1hZ2UgPSBhd2FpdCBpbWFnZS5yb3RhdGUoLTkwICogc2NyZWVuT3JpZW50YXRpb24pO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgbG9nLndhcm4oYENvdWxkIG5vdCByb3RhdGUgc2NyZWVuc2hvdCBkdWUgdG8gZXJyb3I6ICR7ZXJyfWApO1xuICAgIH1cbiAgfVxuICBjb25zdCBnZXRCdWZmZXIgPSBCLnByb21pc2lmeShpbWFnZS5nZXRCdWZmZXIsIHtjb250ZXh0OiBpbWFnZX0pO1xuICBjb25zdCBpbWdCdWZmZXIgPSBhd2FpdCBnZXRCdWZmZXIoamltcC5NSU1FX1BORyk7XG4gIHJldHVybiBpbWdCdWZmZXIudG9TdHJpbmcoJ2Jhc2U2NCcpO1xufTtcblxuT2JqZWN0LmFzc2lnbihleHRlbnNpb25zLCBjb21tYW5kcywgaGVscGVycyk7XG5leHBvcnQgeyBjb21tYW5kcywgaGVscGVycyB9O1xuZXhwb3J0IGRlZmF1bHQgZXh0ZW5zaW9ucztcbiJdLCJmaWxlIjoibGliL2NvbW1hbmRzL2FjdGlvbnMuanMiLCJzb3VyY2VSb290IjoiLi4vLi4vLi4ifQ==
