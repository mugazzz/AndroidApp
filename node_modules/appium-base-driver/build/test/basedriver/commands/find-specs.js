"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _chai = _interopRequireDefault(require("chai"));

var _path = _interopRequireDefault(require("path"));

var _chaiAsPromised = _interopRequireDefault(require("chai-as-promised"));

var _sinon = _interopRequireDefault(require("sinon"));

var _ = require("../../..");

var _find = require("../../../lib/basedriver/commands/find");

var _appiumSupport = require("appium-support");

_chai.default.should();

_chai.default.use(_chaiAsPromised.default);

class TestDriver extends _.BaseDriver {
  getWindowSize() {
    return (0, _asyncToGenerator2.default)(function* () {})();
  }

  getScreenshot() {
    return (0, _asyncToGenerator2.default)(function* () {})();
  }

}

const CUSTOM_FIND_MODULE = _path.default.resolve(__dirname, "..", "..", "..", "..", "test", "basedriver", "fixtures", "custom-element-finder");

const BAD_CUSTOM_FIND_MODULE = _path.default.resolve(__dirname, "..", "..", "..", "..", "test", "basedriver", "fixtures", "custom-element-finder-bad");

const TINY_PNG = "iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6N0NDMDM4MDM4N0U2MTFFOEEzMzhGMTRFNUUwNzIwNUIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6N0NDMDM4MDQ4N0U2MTFFOEEzMzhGMTRFNUUwNzIwNUIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3Q0MwMzgwMTg3RTYxMUU4QTMzOEYxNEU1RTA3MjA1QiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3Q0MwMzgwMjg3RTYxMUU4QTMzOEYxNEU1RTA3MjA1QiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PpdvJjQAAAAlSURBVHjaJInBEQAACIKw/Xe2Ul5wYBtwmJqkk4+zfvUQVoABAEg0EfrZwc0hAAAAAElFTkSuQmCC";
const TINY_PNG_DIMS = [4, 4];
describe('finding elements by image', function () {
  describe('findElement', function () {
    it('should use a different special method to find element by image', (0, _asyncToGenerator2.default)(function* () {
      const d = new TestDriver();

      _sinon.default.stub(d, 'findByImage').returns(true);

      _sinon.default.stub(d, 'findElOrElsWithProcessing').returns(false);

      yield d.findElement(_find.IMAGE_STRATEGY, 'foo').should.eventually.be.true;
      yield d.findElements(_find.IMAGE_STRATEGY, 'foo').should.eventually.be.true;
    }));
    it('should not be able to find image element from any other element', (0, _asyncToGenerator2.default)(function* () {
      const d = new TestDriver();
      yield d.findElementFromElement(_find.IMAGE_STRATEGY, 'foo', 'elId').should.eventually.be.rejectedWith(/Locator Strategy.+is not supported/);
      yield d.findElementsFromElement(_find.IMAGE_STRATEGY, 'foo', 'elId').should.eventually.be.rejectedWith(/Locator Strategy.+is not supported/);
    }));
  });
  describe('findByImage', function () {
    const rect = {
      x: 10,
      y: 20,
      width: 30,
      height: 40
    };
    const size = {
      width: 100,
      height: 200
    };
    const screenshot = 'iVBORfoo';
    const template = 'iVBORbar';

    function basicStub(driver) {
      const sizeStub = _sinon.default.stub(driver, 'getWindowSize').returns(size);

      const screenStub = _sinon.default.stub(driver, 'getScreenshotForImageFind').returns(screenshot);

      const compareStub = _sinon.default.stub(driver, 'compareImages').returns({
        rect
      });

      return {
        sizeStub,
        screenStub,
        compareStub
      };
    }

    function basicImgElVerify(imgElProto, driver) {
      const imgElId = imgElProto.ELEMENT;
      driver._imgElCache.has(imgElId).should.be.true;

      const imgEl = driver._imgElCache.get(imgElId);

      (imgEl instanceof _.ImageElement).should.be.true;
      imgEl.rect.should.eql(rect);
      return imgEl;
    }

    it('should find an image element happypath', (0, _asyncToGenerator2.default)(function* () {
      const d = new TestDriver();
      basicStub(d);
      const imgElProto = yield d.findByImage(template, {
        multiple: false
      });
      basicImgElVerify(imgElProto, d);
    }));
    it('should find image elements happypath', (0, _asyncToGenerator2.default)(function* () {
      const d = new TestDriver();
      basicStub(d);
      const els = yield d.findByImage(template, {
        multiple: true
      });
      els.should.have.length(1);
      basicImgElVerify(els[0], d);
    }));
    it('should fail if driver does not support getWindowSize', (0, _asyncToGenerator2.default)(function* () {
      const d = new _.BaseDriver();
      yield d.findByImage(template, {
        multiple: false
      }).should.eventually.be.rejectedWith(/driver does not support/);
    }));
    it('should fix template size if requested', (0, _asyncToGenerator2.default)(function* () {
      const d = new TestDriver();
      const newTemplate = 'iVBORbaz';

      const _basicStub = basicStub(d),
            compareStub = _basicStub.compareStub;

      yield d.settings.update({
        fixImageTemplateSize: true
      });

      _sinon.default.stub(d, 'ensureTemplateSize').returns(newTemplate);

      const imgElProto = yield d.findByImage(template, {
        multiple: false
      });
      const imgEl = basicImgElVerify(imgElProto, d);
      imgEl.template.should.eql(newTemplate);
      compareStub.args[0][2].should.eql(newTemplate);
    }));
    it('should throw an error if template match fails', (0, _asyncToGenerator2.default)(function* () {
      const d = new TestDriver();

      const _basicStub2 = basicStub(d),
            compareStub = _basicStub2.compareStub;

      compareStub.throws(new Error('Cannot find any occurrences'));
      yield d.findByImage(template, {
        multiple: false
      }).should.eventually.be.rejectedWith(/element could not be located/);
    }));
    it('should return empty array for multiple elements if template match fails', (0, _asyncToGenerator2.default)(function* () {
      const d = new TestDriver();

      const _basicStub3 = basicStub(d),
            compareStub = _basicStub3.compareStub;

      compareStub.throws(new Error('Cannot find any occurrences'));
      yield d.findByImage(template, {
        multiple: true
      }).should.eventually.eql([]);
    }));
    it('should respect implicit wait', (0, _asyncToGenerator2.default)(function* () {
      const d = new TestDriver();
      d.setImplicitWait(10);

      const _basicStub4 = basicStub(d),
            compareStub = _basicStub4.compareStub;

      compareStub.onCall(0).throws(new Error('Cannot find any occurrences'));
      const imgElProto = yield d.findByImage(template, {
        multiple: false
      });
      basicImgElVerify(imgElProto, d);
      compareStub.callCount.should.eql(2);
    }));
    it('should not add element to cache and return it directly when checking staleness', (0, _asyncToGenerator2.default)(function* () {
      const d = new TestDriver();
      basicStub(d);
      const imgEl = yield d.findByImage(template, {
        multiple: false,
        shouldCheckStaleness: true
      });
      (imgEl instanceof _.ImageElement).should.be.true;
      d._imgElCache.has(imgEl.id).should.be.false;
      imgEl.rect.should.eql(rect);
    }));
  });
  describe('ensureTemplateSize', function () {
    it('should not resize the template if it is smaller than the screen', (0, _asyncToGenerator2.default)(function* () {
      const screen = TINY_PNG_DIMS.map(n => n * 2);
      const d = new TestDriver();
      yield d.ensureTemplateSize(TINY_PNG, ...screen).should.eventually.eql(TINY_PNG);
    }));
    it('should not resize the template if it is the same size as the screen', (0, _asyncToGenerator2.default)(function* () {
      const d = new TestDriver();
      yield d.ensureTemplateSize(TINY_PNG, ...TINY_PNG_DIMS).should.eventually.eql(TINY_PNG);
    }));
    it('should resize the template if it is bigger than the screen', (0, _asyncToGenerator2.default)(function* () {
      const d = new TestDriver();
      const screen = TINY_PNG_DIMS.map(n => n / 2);
      const newTemplate = yield d.ensureTemplateSize(TINY_PNG, ...screen);
      newTemplate.should.not.eql(TINY_PNG);
      newTemplate.length.should.be.below(TINY_PNG.length);
    }));
  });
  describe('getScreenshotForImageFind', function () {
    it('should fail if driver does not support getScreenshot', (0, _asyncToGenerator2.default)(function* () {
      const d = new _.BaseDriver();
      yield d.getScreenshotForImageFind().should.eventually.be.rejectedWith(/driver does not support/);
    }));
    it('should not adjust or verify screenshot if asked not to by settings', (0, _asyncToGenerator2.default)(function* () {
      const d = new TestDriver();

      _sinon.default.stub(d, 'getScreenshot').returns(TINY_PNG);

      d.settings.update({
        fixImageFindScreenshotDims: false
      });
      const screen = TINY_PNG_DIMS.map(n => n + 1);
      yield d.getScreenshotForImageFind(...screen).should.eventually.eql(TINY_PNG);
    }));
    it('should return screenshot without adjustment if it matches screen size', (0, _asyncToGenerator2.default)(function* () {
      const d = new TestDriver();

      _sinon.default.stub(d, 'getScreenshot').returns(TINY_PNG);

      yield d.getScreenshotForImageFind(...TINY_PNG_DIMS).should.eventually.eql(TINY_PNG);
    }));
    it('should return scaled screenshot with same aspect ratio if matching screen aspect ratio', (0, _asyncToGenerator2.default)(function* () {
      const d = new TestDriver();

      _sinon.default.stub(d, 'getScreenshot').returns(TINY_PNG);

      const screen = TINY_PNG_DIMS.map(n => n * 1.5);
      const newScreenshot = yield d.getScreenshotForImageFind(...screen);
      newScreenshot.should.not.eql(TINY_PNG);
      const screenshotObj = yield _appiumSupport.imageUtil.getJimpImage(newScreenshot);
      screenshotObj.bitmap.width.should.eql(screen[0]);
      screenshotObj.bitmap.height.should.eql(screen[1]);
    }));
    it('should return scaled screenshot with different aspect ratio if not matching screen aspect ratio', (0, _asyncToGenerator2.default)(function* () {
      const d = new TestDriver();

      _sinon.default.stub(d, 'getScreenshot').returns(TINY_PNG);

      let screen = [TINY_PNG_DIMS[0] * 2, TINY_PNG_DIMS[1] * 3];
      let newScreenshot = yield d.getScreenshotForImageFind(...screen);
      newScreenshot.should.not.eql(TINY_PNG);
      let screenshotObj = yield _appiumSupport.imageUtil.getJimpImage(newScreenshot);
      screenshotObj.bitmap.width.should.eql(screen[0]);
      screenshotObj.bitmap.height.should.eql(screen[1]);
      screen = [TINY_PNG_DIMS[0] * 3, TINY_PNG_DIMS[1] * 2];
      newScreenshot = yield d.getScreenshotForImageFind(...screen);
      newScreenshot.should.not.eql(TINY_PNG);
      screenshotObj = yield _appiumSupport.imageUtil.getJimpImage(newScreenshot);
      screenshotObj.bitmap.width.should.eql(screen[0]);
      screenshotObj.bitmap.height.should.eql(screen[1]);
    }));
  });
});
describe('custom element finding plugins', function () {
  it('should find a single element using a custom finder', (0, _asyncToGenerator2.default)(function* () {
    const d = new _.BaseDriver();
    d.opts.customFindModules = {
      f: CUSTOM_FIND_MODULE
    };
    yield d.findElement(_find.CUSTOM_STRATEGY, "f:foo").should.eventually.eql("bar");
  }));
  it('should not require selector prefix if only one find plugin is registered', (0, _asyncToGenerator2.default)(function* () {
    const d = new _.BaseDriver();
    d.opts.customFindModules = {
      f: CUSTOM_FIND_MODULE
    };
    yield d.findElement(_find.CUSTOM_STRATEGY, "foo").should.eventually.eql("bar");
  }));
  it('should find multiple elements using a custom finder', (0, _asyncToGenerator2.default)(function* () {
    const d = new _.BaseDriver();
    d.opts.customFindModules = {
      f: CUSTOM_FIND_MODULE
    };
    yield d.findElements(_find.CUSTOM_STRATEGY, "f:foos").should.eventually.eql(["baz1", "baz2"]);
  }));
  it('should give a hint to the plugin about whether multiple are requested', (0, _asyncToGenerator2.default)(function* () {
    const d = new _.BaseDriver();
    d.opts.customFindModules = {
      f: CUSTOM_FIND_MODULE
    };
    yield d.findElement(_find.CUSTOM_STRATEGY, "f:foos").should.eventually.eql("bar1");
  }));
  it('should be able to use multiple find modules', (0, _asyncToGenerator2.default)(function* () {
    const d = new _.BaseDriver();
    d.opts.customFindModules = {
      f: CUSTOM_FIND_MODULE,
      g: CUSTOM_FIND_MODULE
    };
    yield d.findElement(_find.CUSTOM_STRATEGY, "f:foo").should.eventually.eql("bar");
    yield d.findElement(_find.CUSTOM_STRATEGY, "g:foo").should.eventually.eql("bar");
  }));
  it('should throw an error if customFindModules is not set', (0, _asyncToGenerator2.default)(function* () {
    const d = new _.BaseDriver();
    yield d.findElement(_find.CUSTOM_STRATEGY, "f:foo").should.eventually.be.rejectedWith(/customFindModules/);
  }));
  it('should throw an error if customFindModules is the wrong shape', (0, _asyncToGenerator2.default)(function* () {
    const d = new _.BaseDriver();
    d.opts.customFindModules = CUSTOM_FIND_MODULE;
    yield d.findElement(_find.CUSTOM_STRATEGY, "f:foo").should.eventually.be.rejectedWith(/customFindModules/);
  }));
  it('should throw an error if customFindModules is size > 1 and no selector prefix is used', (0, _asyncToGenerator2.default)(function* () {
    const d = new _.BaseDriver();
    d.opts.customFindModules = {
      f: CUSTOM_FIND_MODULE,
      g: CUSTOM_FIND_MODULE
    };
    yield d.findElement(_find.CUSTOM_STRATEGY, "foo").should.eventually.be.rejectedWith(/multiple element finding/i);
  }));
  it('should throw an error in attempt to use unregistered plugin', (0, _asyncToGenerator2.default)(function* () {
    const d = new _.BaseDriver();
    d.opts.customFindModules = {
      f: CUSTOM_FIND_MODULE,
      g: CUSTOM_FIND_MODULE
    };
    yield d.findElement(_find.CUSTOM_STRATEGY, "z:foo").should.eventually.be.rejectedWith(/was not registered/);
  }));
  it('should throw an error if plugin cannot be loaded', (0, _asyncToGenerator2.default)(function* () {
    const d = new _.BaseDriver();
    d.opts.customFindModules = {
      f: "./foo.js"
    };
    yield d.findElement(_find.CUSTOM_STRATEGY, "f:foo").should.eventually.be.rejectedWith(/could not load/i);
  }));
  it('should throw an error if plugin is not the right shape', (0, _asyncToGenerator2.default)(function* () {
    const d = new _.BaseDriver();
    d.opts.customFindModules = {
      f: BAD_CUSTOM_FIND_MODULE
    };
    yield d.findElement(_find.CUSTOM_STRATEGY, "f:foo").should.eventually.be.rejectedWith(/constructed correctly/i);
  }));
  it('should pass on an error thrown by the finder itself', (0, _asyncToGenerator2.default)(function* () {
    const d = new _.BaseDriver();
    d.opts.customFindModules = {
      f: CUSTOM_FIND_MODULE
    };
    yield d.findElement(_find.CUSTOM_STRATEGY, "f:error").should.eventually.be.rejectedWith(/plugin error/i);
  }));
  it('should throw no such element error if element not found', (0, _asyncToGenerator2.default)(function* () {
    const d = new _.BaseDriver();
    d.opts.customFindModules = {
      f: CUSTOM_FIND_MODULE
    };
    yield d.findElement(_find.CUSTOM_STRATEGY, "f:nope").should.eventually.be.rejectedWith(/could not be located/);
  }));
});require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvYmFzZWRyaXZlci9jb21tYW5kcy9maW5kLXNwZWNzLmpzIl0sIm5hbWVzIjpbImNoYWkiLCJzaG91bGQiLCJ1c2UiLCJjaGFpQXNQcm9taXNlZCIsIlRlc3REcml2ZXIiLCJCYXNlRHJpdmVyIiwiZ2V0V2luZG93U2l6ZSIsImdldFNjcmVlbnNob3QiLCJDVVNUT01fRklORF9NT0RVTEUiLCJwYXRoIiwicmVzb2x2ZSIsIl9fZGlybmFtZSIsIkJBRF9DVVNUT01fRklORF9NT0RVTEUiLCJUSU5ZX1BORyIsIlRJTllfUE5HX0RJTVMiLCJkZXNjcmliZSIsIml0IiwiZCIsInNpbm9uIiwic3R1YiIsInJldHVybnMiLCJmaW5kRWxlbWVudCIsIklNQUdFX1NUUkFURUdZIiwiZXZlbnR1YWxseSIsImJlIiwidHJ1ZSIsImZpbmRFbGVtZW50cyIsImZpbmRFbGVtZW50RnJvbUVsZW1lbnQiLCJyZWplY3RlZFdpdGgiLCJmaW5kRWxlbWVudHNGcm9tRWxlbWVudCIsInJlY3QiLCJ4IiwieSIsIndpZHRoIiwiaGVpZ2h0Iiwic2l6ZSIsInNjcmVlbnNob3QiLCJ0ZW1wbGF0ZSIsImJhc2ljU3R1YiIsImRyaXZlciIsInNpemVTdHViIiwic2NyZWVuU3R1YiIsImNvbXBhcmVTdHViIiwiYmFzaWNJbWdFbFZlcmlmeSIsImltZ0VsUHJvdG8iLCJpbWdFbElkIiwiRUxFTUVOVCIsIl9pbWdFbENhY2hlIiwiaGFzIiwiaW1nRWwiLCJnZXQiLCJJbWFnZUVsZW1lbnQiLCJlcWwiLCJmaW5kQnlJbWFnZSIsIm11bHRpcGxlIiwiZWxzIiwiaGF2ZSIsImxlbmd0aCIsIm5ld1RlbXBsYXRlIiwic2V0dGluZ3MiLCJ1cGRhdGUiLCJmaXhJbWFnZVRlbXBsYXRlU2l6ZSIsImFyZ3MiLCJ0aHJvd3MiLCJFcnJvciIsInNldEltcGxpY2l0V2FpdCIsIm9uQ2FsbCIsImNhbGxDb3VudCIsInNob3VsZENoZWNrU3RhbGVuZXNzIiwiaWQiLCJmYWxzZSIsInNjcmVlbiIsIm1hcCIsIm4iLCJlbnN1cmVUZW1wbGF0ZVNpemUiLCJub3QiLCJiZWxvdyIsImdldFNjcmVlbnNob3RGb3JJbWFnZUZpbmQiLCJmaXhJbWFnZUZpbmRTY3JlZW5zaG90RGltcyIsIm5ld1NjcmVlbnNob3QiLCJzY3JlZW5zaG90T2JqIiwiaW1hZ2VVdGlsIiwiZ2V0SmltcEltYWdlIiwiYml0bWFwIiwib3B0cyIsImN1c3RvbUZpbmRNb2R1bGVzIiwiZiIsIkNVU1RPTV9TVFJBVEVHWSIsImciXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUdBQSxjQUFLQyxNQUFMOztBQUNBRCxjQUFLRSxHQUFMLENBQVNDLHVCQUFUOztBQUVBLE1BQU1DLFVBQU4sU0FBeUJDLFlBQXpCLENBQW9DO0FBQzVCQyxFQUFBQSxhQUFOLEdBQXVCO0FBQUE7QUFBRTs7QUFDbkJDLEVBQUFBLGFBQU4sR0FBdUI7QUFBQTtBQUFFOztBQUZTOztBQUtwQyxNQUFNQyxrQkFBa0IsR0FBR0MsY0FBS0MsT0FBTCxDQUFhQyxTQUFiLEVBQXdCLElBQXhCLEVBQThCLElBQTlCLEVBQW9DLElBQXBDLEVBQTBDLElBQTFDLEVBQ3pCLE1BRHlCLEVBQ2pCLFlBRGlCLEVBQ0gsVUFERyxFQUNTLHVCQURULENBQTNCOztBQUVBLE1BQU1DLHNCQUFzQixHQUFHSCxjQUFLQyxPQUFMLENBQWFDLFNBQWIsRUFBd0IsSUFBeEIsRUFBOEIsSUFBOUIsRUFBb0MsSUFBcEMsRUFBMEMsSUFBMUMsRUFDN0IsTUFENkIsRUFDckIsWUFEcUIsRUFDUCxVQURPLEVBQ0ssMkJBREwsQ0FBL0I7O0FBR0EsTUFBTUUsUUFBUSxHQUFHLHN2Q0FBakI7QUFDQSxNQUFNQyxhQUFhLEdBQUcsQ0FBQyxDQUFELEVBQUksQ0FBSixDQUF0QjtBQUVBQyxRQUFRLENBQUMsMkJBQUQsRUFBOEIsWUFBWTtBQUNoREEsRUFBQUEsUUFBUSxDQUFDLGFBQUQsRUFBZ0IsWUFBWTtBQUNsQ0MsSUFBQUEsRUFBRSxD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aURzQixVQUFqRCxDQUE0REMsRUFBNUQsQ0FBK0RJLFlBQS9ELENBQTRFLGVBQTVFLENBQU47QUFDRCxHQUpDLEVBQUY7QUFLQVosRUFBQUEsRUFBRSxDQUFDLHlEQUFELGtDQUE0RCxhQUFrQjtBQUM5RSxVQUFNQyxDQUFDLEdBQUcsSUFBSVosWUFBSixFQUFWO0FBQ0FZLElBQUFBLENBQUMsQ0FBQ21FLElBQUYsQ0FBT0MsaUJBQVAsR0FBMkI7QUFBQ0MsTUFBQUEsQ0FBQyxFQUFFOUU7QUFBSixLQUEzQjtBQUNBLFVBQU1TLENBQUMsQ0FBQ0ksV0FBRixDQUFja0UscUJBQWQsRUFBK0IsUUFBL0IsRUFBeUN0RixNQUF6QyxDQUFnRHNCLFVBQWhELENBQTJEQyxFQUEzRCxDQUE4REksWUFBOUQsQ0FBMkUsc0JBQTNFLENBQU47QUFDRCxHQUpDLEVBQUY7QUFLRCxDQXJFTyxDQUFSIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNoYWkgZnJvbSAnY2hhaSc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCBjaGFpQXNQcm9taXNlZCBmcm9tICdjaGFpLWFzLXByb21pc2VkJztcbmltcG9ydCBzaW5vbiBmcm9tICdzaW5vbic7XG5pbXBvcnQgeyBCYXNlRHJpdmVyLCBJbWFnZUVsZW1lbnQgfSBmcm9tICcuLi8uLi8uLic7XG5pbXBvcnQgeyBJTUFHRV9TVFJBVEVHWSwgQ1VTVE9NX1NUUkFURUdZIH0gZnJvbSAnLi4vLi4vLi4vbGliL2Jhc2Vkcml2ZXIvY29tbWFuZHMvZmluZCc7XG5pbXBvcnQgeyBpbWFnZVV0aWwgfSBmcm9tICdhcHBpdW0tc3VwcG9ydCc7XG5cblxuY2hhaS5zaG91bGQoKTtcbmNoYWkudXNlKGNoYWlBc1Byb21pc2VkKTtcblxuY2xhc3MgVGVzdERyaXZlciBleHRlbmRzIEJhc2VEcml2ZXIge1xuICBhc3luYyBnZXRXaW5kb3dTaXplICgpIHt9XG4gIGFzeW5jIGdldFNjcmVlbnNob3QgKCkge31cbn1cblxuY29uc3QgQ1VTVE9NX0ZJTkRfTU9EVUxFID0gcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgXCIuLlwiLCBcIi4uXCIsIFwiLi5cIiwgXCIuLlwiLFxuICBcInRlc3RcIiwgXCJiYXNlZHJpdmVyXCIsIFwiZml4dHVyZXNcIiwgXCJjdXN0b20tZWxlbWVudC1maW5kZXJcIik7XG5jb25zdCBCQURfQ1VTVE9NX0ZJTkRfTU9EVUxFID0gcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgXCIuLlwiLCBcIi4uXCIsIFwiLi5cIiwgXCIuLlwiLFxuICBcInRlc3RcIiwgXCJiYXNlZHJpdmVyXCIsIFwiZml4dHVyZXNcIiwgXCJjdXN0b20tZWxlbWVudC1maW5kZXItYmFkXCIpO1xuXG5jb25zdCBUSU5ZX1BORyA9IFwiaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUFRQUFBQUVDQUlBQUFBbWt3a3BBQUFBR1hSRldIUlRiMlowZDJGeVpRQkJaRzlpWlNCSmJXRm5aVkpsWVdSNWNjbGxQQUFBQXlocFZGaDBXRTFNT21OdmJTNWhaRzlpWlM1NGJYQUFBQUFBQUR3L2VIQmhZMnRsZENCaVpXZHBiajBpNzd1L0lpQnBaRDBpVnpWTk1FMXdRMlZvYVVoNmNtVlRlazVVWTNwcll6bGtJajgrSUR4NE9uaHRjRzFsZEdFZ2VHMXNibk02ZUQwaVlXUnZZbVU2Ym5NNmJXVjBZUzhpSUhnNmVHMXdkR3M5SWtGa2IySmxJRmhOVUNCRGIzSmxJRFV1Tmkxak1UUXdJRGM1TGpFMk1EUTFNU3dnTWpBeE55OHdOUzh3Tmkwd01Ub3dPRG95TVNBZ0lDQWdJQ0FnSWo0Z1BISmtaanBTUkVZZ2VHMXNibk02Y21SbVBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1THpBeUx6SXlMWEprWmkxemVXNTBZWGd0Ym5NaklqNGdQSEprWmpwRVpYTmpjbWx3ZEdsdmJpQnlaR1k2WVdKdmRYUTlJaUlnZUcxc2JuTTZlRzF3UFNKb2RIUndPaTh2Ym5NdVlXUnZZbVV1WTI5dEwzaGhjQzh4TGpBdklpQjRiV3h1Y3pwNGJYQk5UVDBpYUhSMGNEb3ZMMjV6TG1Ga2IySmxMbU52YlM5NFlYQXZNUzR3TDIxdEx5SWdlRzFzYm5NNmMzUlNaV1k5SW1oMGRIQTZMeTl1Y3k1aFpHOWlaUzVqYjIwdmVHRndMekV1TUM5elZIbHdaUzlTWlhOdmRYSmpaVkpsWmlNaUlIaHRjRHBEY21WaGRHOXlWRzl2YkQwaVFXUnZZbVVnVUdodmRHOXphRzl3SUVORElESXdNVGdnS0UxaFkybHVkRzl6YUNraUlIaHRjRTFOT2tsdWMzUmhibU5sU1VROUluaHRjQzVwYVdRNk4wTkRNRE00TURNNE4wVTJNVEZGT0VFek16aEdNVFJGTlVVd056SXdOVUlpSUhodGNFMU5Pa1J2WTNWdFpXNTBTVVE5SW5odGNDNWthV1E2TjBORE1ETTRNRFE0TjBVMk1URkZPRUV6TXpoR01UUkZOVVV3TnpJd05VSWlQaUE4ZUcxd1RVMDZSR1Z5YVhabFpFWnliMjBnYzNSU1pXWTZhVzV6ZEdGdVkyVkpSRDBpZUcxd0xtbHBaRG8zUTBNd016Z3dNVGczUlRZeE1VVTRRVE16T0VZeE5FVTFSVEEzTWpBMVFpSWdjM1JTWldZNlpHOWpkVzFsYm5SSlJEMGllRzF3TG1ScFpEbzNRME13TXpnd01qZzNSVFl4TVVVNFFUTXpPRVl4TkVVMVJUQTNNakExUWlJdlBpQThMM0prWmpwRVpYTmpjbWx3ZEdsdmJqNGdQQzl5WkdZNlVrUkdQaUE4TDNnNmVHMXdiV1YwWVQ0Z1BEOTRjR0ZqYTJWMElHVnVaRDBpY2lJL1BwZHZKalFBQUFBbFNVUkJWSGphSkluQkVRQUFDSUt3L1hlMlVsNXdZQnR3bUpxa2s0K3pmdlVRVm9BQkFFZzBFZnJad2MwaEFBQUFBRWxGVGtTdVFtQ0NcIjtcbmNvbnN0IFRJTllfUE5HX0RJTVMgPSBbNCwgNF07XG5cbmRlc2NyaWJlKCdmaW5kaW5nIGVsZW1lbnRzIGJ5IGltYWdlJywgZnVuY3Rpb24gKCkge1xuICBkZXNjcmliZSgnZmluZEVsZW1lbnQnLCBmdW5jdGlvbiAoKSB7XG4gICAgaXQoJ3Nob3VsZCB1c2UgYSBkaWZmZXJlbnQgc3BlY2lhbCBtZXRob2QgdG8gZmluZCBlbGVtZW50IGJ5IGltYWdlJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3QgZCA9IG5ldyBUZXN0RHJpdmVyKCk7XG4gICAgICBzaW5vbi5zdHViKGQsICdmaW5kQnlJbWFnZScpLnJldHVybnModHJ1ZSk7XG4gICAgICBzaW5vbi5zdHViKGQsICdmaW5kRWxPckVsc1dpdGhQcm9jZXNzaW5nJykucmV0dXJucyhmYWxzZSk7XG4gICAgICBhd2FpdCBkLmZpbmRFbGVtZW50KElNQUdFX1NUUkFURUdZLCAnZm9vJykuc2hvdWxkLmV2ZW50dWFsbHkuYmUudHJ1ZTtcbiAgICAgIGF3YWl0IGQuZmluZEVsZW1lbnRzKElNQUdFX1NUUkFURUdZLCAnZm9vJykuc2hvdWxkLmV2ZW50dWFsbHkuYmUudHJ1ZTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIG5vdCBiZSBhYmxlIHRvIGZpbmQgaW1hZ2UgZWxlbWVudCBmcm9tIGFueSBvdGhlciBlbGVtZW50JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3QgZCA9IG5ldyBUZXN0RHJpdmVyKCk7XG4gICAgICBhd2FpdCBkLmZpbmRFbGVtZW50RnJvbUVsZW1lbnQoSU1BR0VfU1RSQVRFR1ksICdmb28nLCAnZWxJZCcpXG4gICAgICAgIC5zaG91bGQuZXZlbnR1YWxseS5iZS5yZWplY3RlZFdpdGgoL0xvY2F0b3IgU3RyYXRlZ3kuK2lzIG5vdCBzdXBwb3J0ZWQvKTtcbiAgICAgIGF3YWl0IGQuZmluZEVsZW1lbnRzRnJvbUVsZW1lbnQoSU1BR0VfU1RSQVRFR1ksICdmb28nLCAnZWxJZCcpXG4gICAgICAgIC5zaG91bGQuZXZlbnR1YWxseS5iZS5yZWplY3RlZFdpdGgoL0xvY2F0b3IgU3RyYXRlZ3kuK2lzIG5vdCBzdXBwb3J0ZWQvKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2ZpbmRCeUltYWdlJywgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IHJlY3QgPSB7eDogMTAsIHk6IDIwLCB3aWR0aDogMzAsIGhlaWdodDogNDB9O1xuICAgIGNvbnN0IHNpemUgPSB7d2lkdGg6IDEwMCwgaGVpZ2h0OiAyMDB9O1xuICAgIGNvbnN0IHNjcmVlbnNob3QgPSAnaVZCT1Jmb28nO1xuICAgIGNvbnN0IHRlbXBsYXRlID0gJ2lWQk9SYmFyJztcblxuICAgIGZ1bmN0aW9uIGJhc2ljU3R1YiAoZHJpdmVyKSB7XG4gICAgICBjb25zdCBzaXplU3R1YiA9IHNpbm9uLnN0dWIoZHJpdmVyLCAnZ2V0V2luZG93U2l6ZScpLnJldHVybnMoc2l6ZSk7XG4gICAgICBjb25zdCBzY3JlZW5TdHViID0gc2lub24uc3R1Yihkcml2ZXIsICdnZXRTY3JlZW5zaG90Rm9ySW1hZ2VGaW5kJykucmV0dXJucyhzY3JlZW5zaG90KTtcbiAgICAgIGNvbnN0IGNvbXBhcmVTdHViID0gc2lub24uc3R1Yihkcml2ZXIsICdjb21wYXJlSW1hZ2VzJykucmV0dXJucyh7cmVjdH0pO1xuICAgICAgcmV0dXJuIHtzaXplU3R1Yiwgc2NyZWVuU3R1YiwgY29tcGFyZVN0dWJ9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJhc2ljSW1nRWxWZXJpZnkgKGltZ0VsUHJvdG8sIGRyaXZlcikge1xuICAgICAgY29uc3QgaW1nRWxJZCA9IGltZ0VsUHJvdG8uRUxFTUVOVDtcbiAgICAgIGRyaXZlci5faW1nRWxDYWNoZS5oYXMoaW1nRWxJZCkuc2hvdWxkLmJlLnRydWU7XG4gICAgICBjb25zdCBpbWdFbCA9IGRyaXZlci5faW1nRWxDYWNoZS5nZXQoaW1nRWxJZCk7XG4gICAgICAoaW1nRWwgaW5zdGFuY2VvZiBJbWFnZUVsZW1lbnQpLnNob3VsZC5iZS50cnVlO1xuICAgICAgaW1nRWwucmVjdC5zaG91bGQuZXFsKHJlY3QpO1xuICAgICAgcmV0dXJuIGltZ0VsO1xuICAgIH1cblxuICAgIGl0KCdzaG91bGQgZmluZCBhbiBpbWFnZSBlbGVtZW50IGhhcHB5cGF0aCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IGQgPSBuZXcgVGVzdERyaXZlcigpO1xuICAgICAgYmFzaWNTdHViKGQpO1xuICAgICAgY29uc3QgaW1nRWxQcm90byA9IGF3YWl0IGQuZmluZEJ5SW1hZ2UodGVtcGxhdGUsIHttdWx0aXBsZTogZmFsc2V9KTtcbiAgICAgIGJhc2ljSW1nRWxWZXJpZnkoaW1nRWxQcm90bywgZCk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBmaW5kIGltYWdlIGVsZW1lbnRzIGhhcHB5cGF0aCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IGQgPSBuZXcgVGVzdERyaXZlcigpO1xuICAgICAgYmFzaWNTdHViKGQpO1xuICAgICAgY29uc3QgZWxzID0gYXdhaXQgZC5maW5kQnlJbWFnZSh0ZW1wbGF0ZSwge211bHRpcGxlOiB0cnVlfSk7XG4gICAgICBlbHMuc2hvdWxkLmhhdmUubGVuZ3RoKDEpO1xuICAgICAgYmFzaWNJbWdFbFZlcmlmeShlbHNbMF0sIGQpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgZmFpbCBpZiBkcml2ZXIgZG9lcyBub3Qgc3VwcG9ydCBnZXRXaW5kb3dTaXplJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3QgZCA9IG5ldyBCYXNlRHJpdmVyKCk7XG4gICAgICBhd2FpdCBkLmZpbmRCeUltYWdlKHRlbXBsYXRlLCB7bXVsdGlwbGU6IGZhbHNlfSlcbiAgICAgICAgLnNob3VsZC5ldmVudHVhbGx5LmJlLnJlamVjdGVkV2l0aCgvZHJpdmVyIGRvZXMgbm90IHN1cHBvcnQvKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIGZpeCB0ZW1wbGF0ZSBzaXplIGlmIHJlcXVlc3RlZCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IGQgPSBuZXcgVGVzdERyaXZlcigpO1xuICAgICAgY29uc3QgbmV3VGVtcGxhdGUgPSAnaVZCT1JiYXonO1xuICAgICAgY29uc3Qge2NvbXBhcmVTdHVifSA9IGJhc2ljU3R1YihkKTtcbiAgICAgIGF3YWl0IGQuc2V0dGluZ3MudXBkYXRlKHtmaXhJbWFnZVRlbXBsYXRlU2l6ZTogdHJ1ZX0pO1xuICAgICAgc2lub24uc3R1YihkLCAnZW5zdXJlVGVtcGxhdGVTaXplJykucmV0dXJucyhuZXdUZW1wbGF0ZSk7XG4gICAgICBjb25zdCBpbWdFbFByb3RvID0gYXdhaXQgZC5maW5kQnlJbWFnZSh0ZW1wbGF0ZSwge211bHRpcGxlOiBmYWxzZX0pO1xuICAgICAgY29uc3QgaW1nRWwgPSBiYXNpY0ltZ0VsVmVyaWZ5KGltZ0VsUHJvdG8sIGQpO1xuICAgICAgaW1nRWwudGVtcGxhdGUuc2hvdWxkLmVxbChuZXdUZW1wbGF0ZSk7XG4gICAgICBjb21wYXJlU3R1Yi5hcmdzWzBdWzJdLnNob3VsZC5lcWwobmV3VGVtcGxhdGUpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgdGhyb3cgYW4gZXJyb3IgaWYgdGVtcGxhdGUgbWF0Y2ggZmFpbHMnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCBkID0gbmV3IFRlc3REcml2ZXIoKTtcbiAgICAgIGNvbnN0IHtjb21wYXJlU3R1Yn0gPSBiYXNpY1N0dWIoZCk7XG4gICAgICBjb21wYXJlU3R1Yi50aHJvd3MobmV3IEVycm9yKCdDYW5ub3QgZmluZCBhbnkgb2NjdXJyZW5jZXMnKSk7XG4gICAgICBhd2FpdCBkLmZpbmRCeUltYWdlKHRlbXBsYXRlLCB7bXVsdGlwbGU6IGZhbHNlfSlcbiAgICAgICAgLnNob3VsZC5ldmVudHVhbGx5LmJlLnJlamVjdGVkV2l0aCgvZWxlbWVudCBjb3VsZCBub3QgYmUgbG9jYXRlZC8pO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIGVtcHR5IGFycmF5IGZvciBtdWx0aXBsZSBlbGVtZW50cyBpZiB0ZW1wbGF0ZSBtYXRjaCBmYWlscycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IGQgPSBuZXcgVGVzdERyaXZlcigpO1xuICAgICAgY29uc3Qge2NvbXBhcmVTdHVifSA9IGJhc2ljU3R1YihkKTtcbiAgICAgIGNvbXBhcmVTdHViLnRocm93cyhuZXcgRXJyb3IoJ0Nhbm5vdCBmaW5kIGFueSBvY2N1cnJlbmNlcycpKTtcbiAgICAgIGF3YWl0IGQuZmluZEJ5SW1hZ2UodGVtcGxhdGUsIHttdWx0aXBsZTogdHJ1ZX0pLnNob3VsZC5ldmVudHVhbGx5LmVxbChbXSk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCByZXNwZWN0IGltcGxpY2l0IHdhaXQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCBkID0gbmV3IFRlc3REcml2ZXIoKTtcbiAgICAgIGQuc2V0SW1wbGljaXRXYWl0KDEwKTtcbiAgICAgIGNvbnN0IHtjb21wYXJlU3R1Yn0gPSBiYXNpY1N0dWIoZCk7XG4gICAgICBjb21wYXJlU3R1Yi5vbkNhbGwoMCkudGhyb3dzKG5ldyBFcnJvcignQ2Fubm90IGZpbmQgYW55IG9jY3VycmVuY2VzJykpO1xuICAgICAgY29uc3QgaW1nRWxQcm90byA9IGF3YWl0IGQuZmluZEJ5SW1hZ2UodGVtcGxhdGUsIHttdWx0aXBsZTogZmFsc2V9KTtcbiAgICAgIGJhc2ljSW1nRWxWZXJpZnkoaW1nRWxQcm90bywgZCk7XG4gICAgICBjb21wYXJlU3R1Yi5jYWxsQ291bnQuc2hvdWxkLmVxbCgyKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIG5vdCBhZGQgZWxlbWVudCB0byBjYWNoZSBhbmQgcmV0dXJuIGl0IGRpcmVjdGx5IHdoZW4gY2hlY2tpbmcgc3RhbGVuZXNzJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3QgZCA9IG5ldyBUZXN0RHJpdmVyKCk7XG4gICAgICBiYXNpY1N0dWIoZCk7XG4gICAgICBjb25zdCBpbWdFbCA9IGF3YWl0IGQuZmluZEJ5SW1hZ2UodGVtcGxhdGUsIHttdWx0aXBsZTogZmFsc2UsIHNob3VsZENoZWNrU3RhbGVuZXNzOiB0cnVlfSk7XG4gICAgICAoaW1nRWwgaW5zdGFuY2VvZiBJbWFnZUVsZW1lbnQpLnNob3VsZC5iZS50cnVlO1xuICAgICAgZC5faW1nRWxDYWNoZS5oYXMoaW1nRWwuaWQpLnNob3VsZC5iZS5mYWxzZTtcbiAgICAgIGltZ0VsLnJlY3Quc2hvdWxkLmVxbChyZWN0KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2Vuc3VyZVRlbXBsYXRlU2l6ZScsIGZ1bmN0aW9uICgpIHtcbiAgICBpdCgnc2hvdWxkIG5vdCByZXNpemUgdGhlIHRlbXBsYXRlIGlmIGl0IGlzIHNtYWxsZXIgdGhhbiB0aGUgc2NyZWVuJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3Qgc2NyZWVuID0gVElOWV9QTkdfRElNUy5tYXAobiA9PiBuICogMik7XG4gICAgICBjb25zdCBkID0gbmV3IFRlc3REcml2ZXIoKTtcbiAgICAgIGF3YWl0IGQuZW5zdXJlVGVtcGxhdGVTaXplKFRJTllfUE5HLCAuLi5zY3JlZW4pXG4gICAgICAgIC5zaG91bGQuZXZlbnR1YWxseS5lcWwoVElOWV9QTkcpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgbm90IHJlc2l6ZSB0aGUgdGVtcGxhdGUgaWYgaXQgaXMgdGhlIHNhbWUgc2l6ZSBhcyB0aGUgc2NyZWVuJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3QgZCA9IG5ldyBUZXN0RHJpdmVyKCk7XG4gICAgICBhd2FpdCBkLmVuc3VyZVRlbXBsYXRlU2l6ZShUSU5ZX1BORywgLi4uVElOWV9QTkdfRElNUylcbiAgICAgICAgLnNob3VsZC5ldmVudHVhbGx5LmVxbChUSU5ZX1BORyk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCByZXNpemUgdGhlIHRlbXBsYXRlIGlmIGl0IGlzIGJpZ2dlciB0aGFuIHRoZSBzY3JlZW4nLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCBkID0gbmV3IFRlc3REcml2ZXIoKTtcbiAgICAgIGNvbnN0IHNjcmVlbiA9IFRJTllfUE5HX0RJTVMubWFwKG4gPT4gbiAvIDIpO1xuICAgICAgY29uc3QgbmV3VGVtcGxhdGUgPSBhd2FpdCBkLmVuc3VyZVRlbXBsYXRlU2l6ZShUSU5ZX1BORywgLi4uc2NyZWVuKTtcbiAgICAgIG5ld1RlbXBsYXRlLnNob3VsZC5ub3QuZXFsKFRJTllfUE5HKTtcbiAgICAgIG5ld1RlbXBsYXRlLmxlbmd0aC5zaG91bGQuYmUuYmVsb3coVElOWV9QTkcubGVuZ3RoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2dldFNjcmVlbnNob3RGb3JJbWFnZUZpbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgaXQoJ3Nob3VsZCBmYWlsIGlmIGRyaXZlciBkb2VzIG5vdCBzdXBwb3J0IGdldFNjcmVlbnNob3QnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCBkID0gbmV3IEJhc2VEcml2ZXIoKTtcbiAgICAgIGF3YWl0IGQuZ2V0U2NyZWVuc2hvdEZvckltYWdlRmluZCgpXG4gICAgICAgIC5zaG91bGQuZXZlbnR1YWxseS5iZS5yZWplY3RlZFdpdGgoL2RyaXZlciBkb2VzIG5vdCBzdXBwb3J0Lyk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBub3QgYWRqdXN0IG9yIHZlcmlmeSBzY3JlZW5zaG90IGlmIGFza2VkIG5vdCB0byBieSBzZXR0aW5ncycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IGQgPSBuZXcgVGVzdERyaXZlcigpO1xuICAgICAgc2lub24uc3R1YihkLCAnZ2V0U2NyZWVuc2hvdCcpLnJldHVybnMoVElOWV9QTkcpO1xuICAgICAgZC5zZXR0aW5ncy51cGRhdGUoe2ZpeEltYWdlRmluZFNjcmVlbnNob3REaW1zOiBmYWxzZX0pO1xuICAgICAgY29uc3Qgc2NyZWVuID0gVElOWV9QTkdfRElNUy5tYXAobiA9PiBuICsgMSk7XG4gICAgICBhd2FpdCBkLmdldFNjcmVlbnNob3RGb3JJbWFnZUZpbmQoLi4uc2NyZWVuKVxuICAgICAgICAuc2hvdWxkLmV2ZW50dWFsbHkuZXFsKFRJTllfUE5HKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBzY3JlZW5zaG90IHdpdGhvdXQgYWRqdXN0bWVudCBpZiBpdCBtYXRjaGVzIHNjcmVlbiBzaXplJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3QgZCA9IG5ldyBUZXN0RHJpdmVyKCk7XG4gICAgICBzaW5vbi5zdHViKGQsICdnZXRTY3JlZW5zaG90JykucmV0dXJucyhUSU5ZX1BORyk7XG4gICAgICBhd2FpdCBkLmdldFNjcmVlbnNob3RGb3JJbWFnZUZpbmQoLi4uVElOWV9QTkdfRElNUylcbiAgICAgICAgLnNob3VsZC5ldmVudHVhbGx5LmVxbChUSU5ZX1BORyk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gc2NhbGVkIHNjcmVlbnNob3Qgd2l0aCBzYW1lIGFzcGVjdCByYXRpbyBpZiBtYXRjaGluZyBzY3JlZW4gYXNwZWN0IHJhdGlvJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3QgZCA9IG5ldyBUZXN0RHJpdmVyKCk7XG4gICAgICBzaW5vbi5zdHViKGQsICdnZXRTY3JlZW5zaG90JykucmV0dXJucyhUSU5ZX1BORyk7XG4gICAgICBjb25zdCBzY3JlZW4gPSBUSU5ZX1BOR19ESU1TLm1hcChuID0+IG4gKiAxLjUpO1xuICAgICAgY29uc3QgbmV3U2NyZWVuc2hvdCA9IGF3YWl0IGQuZ2V0U2NyZWVuc2hvdEZvckltYWdlRmluZCguLi5zY3JlZW4pO1xuICAgICAgbmV3U2NyZWVuc2hvdC5zaG91bGQubm90LmVxbChUSU5ZX1BORyk7XG4gICAgICBjb25zdCBzY3JlZW5zaG90T2JqID0gYXdhaXQgaW1hZ2VVdGlsLmdldEppbXBJbWFnZShuZXdTY3JlZW5zaG90KTtcbiAgICAgIHNjcmVlbnNob3RPYmouYml0bWFwLndpZHRoLnNob3VsZC5lcWwoc2NyZWVuWzBdKTtcbiAgICAgIHNjcmVlbnNob3RPYmouYml0bWFwLmhlaWdodC5zaG91bGQuZXFsKHNjcmVlblsxXSk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gc2NhbGVkIHNjcmVlbnNob3Qgd2l0aCBkaWZmZXJlbnQgYXNwZWN0IHJhdGlvIGlmIG5vdCBtYXRjaGluZyBzY3JlZW4gYXNwZWN0IHJhdGlvJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3QgZCA9IG5ldyBUZXN0RHJpdmVyKCk7XG4gICAgICBzaW5vbi5zdHViKGQsICdnZXRTY3JlZW5zaG90JykucmV0dXJucyhUSU5ZX1BORyk7XG5cbiAgICAgIC8vIHRyeSBmaXJzdCB3aXRoIHBvcnRyYWl0IHNjcmVlblxuICAgICAgbGV0IHNjcmVlbiA9IFtUSU5ZX1BOR19ESU1TWzBdICogMiwgVElOWV9QTkdfRElNU1sxXSAqIDNdO1xuICAgICAgbGV0IG5ld1NjcmVlbnNob3QgPSBhd2FpdCBkLmdldFNjcmVlbnNob3RGb3JJbWFnZUZpbmQoLi4uc2NyZWVuKTtcbiAgICAgIG5ld1NjcmVlbnNob3Quc2hvdWxkLm5vdC5lcWwoVElOWV9QTkcpO1xuICAgICAgbGV0IHNjcmVlbnNob3RPYmogPSBhd2FpdCBpbWFnZVV0aWwuZ2V0SmltcEltYWdlKG5ld1NjcmVlbnNob3QpO1xuICAgICAgc2NyZWVuc2hvdE9iai5iaXRtYXAud2lkdGguc2hvdWxkLmVxbChzY3JlZW5bMF0pO1xuICAgICAgc2NyZWVuc2hvdE9iai5iaXRtYXAuaGVpZ2h0LnNob3VsZC5lcWwoc2NyZWVuWzFdKTtcblxuICAgICAgLy8gdGhlbiB3aXRoIGxhbmRzY2FwZSBzY3JlZW5cbiAgICAgIHNjcmVlbiA9IFtUSU5ZX1BOR19ESU1TWzBdICogMywgVElOWV9QTkdfRElNU1sxXSAqIDJdO1xuICAgICAgbmV3U2NyZWVuc2hvdCA9IGF3YWl0IGQuZ2V0U2NyZWVuc2hvdEZvckltYWdlRmluZCguLi5zY3JlZW4pO1xuICAgICAgbmV3U2NyZWVuc2hvdC5zaG91bGQubm90LmVxbChUSU5ZX1BORyk7XG4gICAgICBzY3JlZW5zaG90T2JqID0gYXdhaXQgaW1hZ2VVdGlsLmdldEppbXBJbWFnZShuZXdTY3JlZW5zaG90KTtcbiAgICAgIHNjcmVlbnNob3RPYmouYml0bWFwLndpZHRoLnNob3VsZC5lcWwoc2NyZWVuWzBdKTtcbiAgICAgIHNjcmVlbnNob3RPYmouYml0bWFwLmhlaWdodC5zaG91bGQuZXFsKHNjcmVlblsxXSk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKCdjdXN0b20gZWxlbWVudCBmaW5kaW5nIHBsdWdpbnMnLCBmdW5jdGlvbiAoKSB7XG4gIC8vIGhhcHB5c1xuICBpdCgnc2hvdWxkIGZpbmQgYSBzaW5nbGUgZWxlbWVudCB1c2luZyBhIGN1c3RvbSBmaW5kZXInLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgZCA9IG5ldyBCYXNlRHJpdmVyKCk7XG4gICAgZC5vcHRzLmN1c3RvbUZpbmRNb2R1bGVzID0ge2Y6IENVU1RPTV9GSU5EX01PRFVMRX07XG4gICAgYXdhaXQgZC5maW5kRWxlbWVudChDVVNUT01fU1RSQVRFR1ksIFwiZjpmb29cIikuc2hvdWxkLmV2ZW50dWFsbHkuZXFsKFwiYmFyXCIpO1xuICB9KTtcbiAgaXQoJ3Nob3VsZCBub3QgcmVxdWlyZSBzZWxlY3RvciBwcmVmaXggaWYgb25seSBvbmUgZmluZCBwbHVnaW4gaXMgcmVnaXN0ZXJlZCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBkID0gbmV3IEJhc2VEcml2ZXIoKTtcbiAgICBkLm9wdHMuY3VzdG9tRmluZE1vZHVsZXMgPSB7ZjogQ1VTVE9NX0ZJTkRfTU9EVUxFfTtcbiAgICBhd2FpdCBkLmZpbmRFbGVtZW50KENVU1RPTV9TVFJBVEVHWSwgXCJmb29cIikuc2hvdWxkLmV2ZW50dWFsbHkuZXFsKFwiYmFyXCIpO1xuICB9KTtcbiAgaXQoJ3Nob3VsZCBmaW5kIG11bHRpcGxlIGVsZW1lbnRzIHVzaW5nIGEgY3VzdG9tIGZpbmRlcicsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBkID0gbmV3IEJhc2VEcml2ZXIoKTtcbiAgICBkLm9wdHMuY3VzdG9tRmluZE1vZHVsZXMgPSB7ZjogQ1VTVE9NX0ZJTkRfTU9EVUxFfTtcbiAgICBhd2FpdCBkLmZpbmRFbGVtZW50cyhDVVNUT01fU1RSQVRFR1ksIFwiZjpmb29zXCIpLnNob3VsZC5ldmVudHVhbGx5LmVxbChbXCJiYXoxXCIsIFwiYmF6MlwiXSk7XG4gIH0pO1xuICBpdCgnc2hvdWxkIGdpdmUgYSBoaW50IHRvIHRoZSBwbHVnaW4gYWJvdXQgd2hldGhlciBtdWx0aXBsZSBhcmUgcmVxdWVzdGVkJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGQgPSBuZXcgQmFzZURyaXZlcigpO1xuICAgIGQub3B0cy5jdXN0b21GaW5kTW9kdWxlcyA9IHtmOiBDVVNUT01fRklORF9NT0RVTEV9O1xuICAgIGF3YWl0IGQuZmluZEVsZW1lbnQoQ1VTVE9NX1NUUkFURUdZLCBcImY6Zm9vc1wiKS5zaG91bGQuZXZlbnR1YWxseS5lcWwoXCJiYXIxXCIpO1xuICB9KTtcbiAgaXQoJ3Nob3VsZCBiZSBhYmxlIHRvIHVzZSBtdWx0aXBsZSBmaW5kIG1vZHVsZXMnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgZCA9IG5ldyBCYXNlRHJpdmVyKCk7XG4gICAgZC5vcHRzLmN1c3RvbUZpbmRNb2R1bGVzID0ge2Y6IENVU1RPTV9GSU5EX01PRFVMRSwgZzogQ1VTVE9NX0ZJTkRfTU9EVUxFfTtcbiAgICBhd2FpdCBkLmZpbmRFbGVtZW50KENVU1RPTV9TVFJBVEVHWSwgXCJmOmZvb1wiKS5zaG91bGQuZXZlbnR1YWxseS5lcWwoXCJiYXJcIik7XG4gICAgYXdhaXQgZC5maW5kRWxlbWVudChDVVNUT01fU1RSQVRFR1ksIFwiZzpmb29cIikuc2hvdWxkLmV2ZW50dWFsbHkuZXFsKFwiYmFyXCIpO1xuICB9KTtcblxuICAvLyBlcnJvcnNcbiAgaXQoJ3Nob3VsZCB0aHJvdyBhbiBlcnJvciBpZiBjdXN0b21GaW5kTW9kdWxlcyBpcyBub3Qgc2V0JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGQgPSBuZXcgQmFzZURyaXZlcigpO1xuICAgIGF3YWl0IGQuZmluZEVsZW1lbnQoQ1VTVE9NX1NUUkFURUdZLCBcImY6Zm9vXCIpLnNob3VsZC5ldmVudHVhbGx5LmJlLnJlamVjdGVkV2l0aCgvY3VzdG9tRmluZE1vZHVsZXMvKTtcbiAgfSk7XG4gIGl0KCdzaG91bGQgdGhyb3cgYW4gZXJyb3IgaWYgY3VzdG9tRmluZE1vZHVsZXMgaXMgdGhlIHdyb25nIHNoYXBlJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGQgPSBuZXcgQmFzZURyaXZlcigpO1xuICAgIGQub3B0cy5jdXN0b21GaW5kTW9kdWxlcyA9IENVU1RPTV9GSU5EX01PRFVMRTtcbiAgICBhd2FpdCBkLmZpbmRFbGVtZW50KENVU1RPTV9TVFJBVEVHWSwgXCJmOmZvb1wiKS5zaG91bGQuZXZlbnR1YWxseS5iZS5yZWplY3RlZFdpdGgoL2N1c3RvbUZpbmRNb2R1bGVzLyk7XG4gIH0pO1xuICBpdCgnc2hvdWxkIHRocm93IGFuIGVycm9yIGlmIGN1c3RvbUZpbmRNb2R1bGVzIGlzIHNpemUgPiAxIGFuZCBubyBzZWxlY3RvciBwcmVmaXggaXMgdXNlZCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBkID0gbmV3IEJhc2VEcml2ZXIoKTtcbiAgICBkLm9wdHMuY3VzdG9tRmluZE1vZHVsZXMgPSB7ZjogQ1VTVE9NX0ZJTkRfTU9EVUxFLCBnOiBDVVNUT01fRklORF9NT0RVTEV9O1xuICAgIGF3YWl0IGQuZmluZEVsZW1lbnQoQ1VTVE9NX1NUUkFURUdZLCBcImZvb1wiKS5zaG91bGQuZXZlbnR1YWxseS5iZS5yZWplY3RlZFdpdGgoL211bHRpcGxlIGVsZW1lbnQgZmluZGluZy9pKTtcbiAgfSk7XG4gIGl0KCdzaG91bGQgdGhyb3cgYW4gZXJyb3IgaW4gYXR0ZW1wdCB0byB1c2UgdW5yZWdpc3RlcmVkIHBsdWdpbicsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBkID0gbmV3IEJhc2VEcml2ZXIoKTtcbiAgICBkLm9wdHMuY3VzdG9tRmluZE1vZHVsZXMgPSB7ZjogQ1VTVE9NX0ZJTkRfTU9EVUxFLCBnOiBDVVNUT01fRklORF9NT0RVTEV9O1xuICAgIGF3YWl0IGQuZmluZEVsZW1lbnQoQ1VTVE9NX1NUUkFURUdZLCBcIno6Zm9vXCIpLnNob3VsZC5ldmVudHVhbGx5LmJlLnJlamVjdGVkV2l0aCgvd2FzIG5vdCByZWdpc3RlcmVkLyk7XG4gIH0pO1xuICBpdCgnc2hvdWxkIHRocm93IGFuIGVycm9yIGlmIHBsdWdpbiBjYW5ub3QgYmUgbG9hZGVkJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGQgPSBuZXcgQmFzZURyaXZlcigpO1xuICAgIGQub3B0cy5jdXN0b21GaW5kTW9kdWxlcyA9IHtmOiBcIi4vZm9vLmpzXCJ9O1xuICAgIGF3YWl0IGQuZmluZEVsZW1lbnQoQ1VTVE9NX1NUUkFURUdZLCBcImY6Zm9vXCIpLnNob3VsZC5ldmVudHVhbGx5LmJlLnJlamVjdGVkV2l0aCgvY291bGQgbm90IGxvYWQvaSk7XG4gIH0pO1xuICBpdCgnc2hvdWxkIHRocm93IGFuIGVycm9yIGlmIHBsdWdpbiBpcyBub3QgdGhlIHJpZ2h0IHNoYXBlJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGQgPSBuZXcgQmFzZURyaXZlcigpO1xuICAgIGQub3B0cy5jdXN0b21GaW5kTW9kdWxlcyA9IHtmOiBCQURfQ1VTVE9NX0ZJTkRfTU9EVUxFfTtcbiAgICBhd2FpdCBkLmZpbmRFbGVtZW50KENVU1RPTV9TVFJBVEVHWSwgXCJmOmZvb1wiKS5zaG91bGQuZXZlbnR1YWxseS5iZS5yZWplY3RlZFdpdGgoL2NvbnN0cnVjdGVkIGNvcnJlY3RseS9pKTtcbiAgfSk7XG4gIGl0KCdzaG91bGQgcGFzcyBvbiBhbiBlcnJvciB0aHJvd24gYnkgdGhlIGZpbmRlciBpdHNlbGYnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgZCA9IG5ldyBCYXNlRHJpdmVyKCk7XG4gICAgZC5vcHRzLmN1c3RvbUZpbmRNb2R1bGVzID0ge2Y6IENVU1RPTV9GSU5EX01PRFVMRX07XG4gICAgYXdhaXQgZC5maW5kRWxlbWVudChDVVNUT01fU1RSQVRFR1ksIFwiZjplcnJvclwiKS5zaG91bGQuZXZlbnR1YWxseS5iZS5yZWplY3RlZFdpdGgoL3BsdWdpbiBlcnJvci9pKTtcbiAgfSk7XG4gIGl0KCdzaG91bGQgdGhyb3cgbm8gc3VjaCBlbGVtZW50IGVycm9yIGlmIGVsZW1lbnQgbm90IGZvdW5kJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGQgPSBuZXcgQmFzZURyaXZlcigpO1xuICAgIGQub3B0cy5jdXN0b21GaW5kTW9kdWxlcyA9IHtmOiBDVVNUT01fRklORF9NT0RVTEV9O1xuICAgIGF3YWl0IGQuZmluZEVsZW1lbnQoQ1VTVE9NX1NUUkFURUdZLCBcImY6bm9wZVwiKS5zaG91bGQuZXZlbnR1YWxseS5iZS5yZWplY3RlZFdpdGgoL2NvdWxkIG5vdCBiZSBsb2NhdGVkLyk7XG4gIH0pO1xufSk7XG4iXSwiZmlsZSI6InRlc3QvYmFzZWRyaXZlci9jb21tYW5kcy9maW5kLXNwZWNzLmpzIiwic291cmNlUm9vdCI6Ii4uLy4uLy4uLy4uIn0=
