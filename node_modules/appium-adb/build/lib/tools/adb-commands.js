"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _logger = _interopRequireDefault(require("../logger.js"));

var _helpers = require("../helpers.js");

var _path = _interopRequireDefault(require("path"));

var _lodash = _interopRequireDefault(require("lodash"));

var _appiumSupport = require("appium-support");

var _net = _interopRequireDefault(require("net"));

var _logcat = _interopRequireDefault(require("../logcat"));

var _asyncbox = require("asyncbox");

var _teen_process = require("teen_process");

var _bluebird = _interopRequireDefault(require("bluebird"));

var _shellQuote = require("shell-quote");

const SETTINGS_HELPER_ID = 'io.appium.settings';
const WIFI_CONNECTION_SETTING_RECEIVER = `${SETTINGS_HELPER_ID}/.receivers.WiFiConnectionSettingReceiver`;
const WIFI_CONNECTION_SETTING_ACTION = `${SETTINGS_HELPER_ID}.wifi`;
const DATA_CONNECTION_SETTING_RECEIVER = `${SETTINGS_HELPER_ID}/.receivers.DataConnectionSettingReceiver`;
const DATA_CONNECTION_SETTING_ACTION = `${SETTINGS_HELPER_ID}.data_connection`;
const ANIMATION_SETTING_RECEIVER = `${SETTINGS_HELPER_ID}/.receivers.AnimationSettingReceiver`;
const ANIMATION_SETTING_ACTION = `${SETTINGS_HELPER_ID}.animation`;
const LOCALE_SETTING_RECEIVER = `${SETTINGS_HELPER_ID}/.receivers.LocaleSettingReceiver`;
const LOCALE_SETTING_ACTION = `${SETTINGS_HELPER_ID}.locale`;
const LOCATION_SERVICE = `${SETTINGS_HELPER_ID}/.LocationService`;
const LOCATION_RECEIVER = `${SETTINGS_HELPER_ID}/.receivers.LocationInfoReceiver`;
const LOCATION_RETRIEVAL_ACTION = `${SETTINGS_HELPER_ID}.location`;
const APPIUM_IME = `${SETTINGS_HELPER_ID}/.AppiumIME`;
const MAX_SHELL_BUFFER_LENGTH = 1000;
const NOT_CHANGEABLE_PERM_ERROR = 'not a changeable permission type';
let methods = {};
methods.getAdbWithCorrectAdbPath = (0, _asyncToGenerator2.default)(function* () {
  this.executable.path = yield this.getSdkBinaryPath("adb");
  this.binaries.adb = this.executable.path;
  return this.adb;
});
methods.initAapt = (0, _asyncToGenerator2.default)(function* () {
  this.binaries.aapt = yield this.getSdkBinaryPath("aapt");
});
methods.initZipAlign = (0, _asyncToGenerator2.default)(function* () {
  this.binaries.zipalign = yield this.getSdkBinaryPath("zipalign");
});
methods.initBundletool = (0, _asyncToGenerator2.default)(function* () {
  try {
    this.binaries.bundletool = yield _appiumSupport.fs.which('bundletool.jar');
  } catch (err) {
    throw new Error('bundletool.jar binary is expected to be present in PATH. ' + 'Visit https://github.com/google/bundletool for more details.');
  }
});
methods.getApiLevel = (0, _asyncToGenerator2.default)(function* () {
  if (!_lodash.default.isInteger(this._apiLevel)) {
    try {
      const strOutput = yield this.getDeviceProperty('ro.build.version.sdk');
      this._apiLevel = parseInt(strOutput.trim(), 10);

      if (isNaN(this._apiLevel)) {
        throw new Error(`The actual output "${strOutput}" cannot be converted to an integer`);
      }
    } catch (e) {
      throw new Error(`Error getting device API level. Original error: ${e.message}`);
    }
  }

  _logger.default.debug(`Device API level: ${this._apiLevel}`);

  return this._apiLevel;
});
methods.getPlatformVersion = (0, _asyncToGenerator2.default)(function* () {
  _logger.default.info("Getting device platform version");

  try {
    return yield this.getDeviceProperty('ro.build.version.release');
  } catch (e) {
    throw new Error(`Error getting device platform version. Original error: ${e.message}`);
  }
});
methods.isDeviceConnected = (0, _asyncToGenerator2.default)(function* () {
  let devices = yield this.getConnectedDevices();
  return devices.length > 0;
});

methods.mkdir = function () {
  var _ref8 = (0, _asyncToGenerator2.default)(function* (remotePath) {
    return yield this.shell(['mkdir', '-p', remotePath]);
  });

  return function (_x) {
    return _ref8.apply(this, arguments);
  };
}();

methods.isValidClass = function (classString) {
  return new RegExp(/^[a-zA-Z0-9./_]+$/).exec(classString);
};

methods.forceStop = function () {
  var _ref9 = (0, _asyncToGenerator2.default)(function* (pkg) {
    return yield this.shell(['am', 'force-stop', pkg]);
  });

  return function (_x2) {
    return _ref9.apply(this, arguments);
  };
}();

methods.killPackage = function () {
  var _killPackage = (0, _asyncToGenerator2.default)(function* (pkg) {
    return yield this.shell(['am', 'kill', pkg]);
  });

  return function killPackage(_x3) {
    return _killPackage.apply(this, arguments);
  };
}();

methods.clear = function () {
  var _ref10 = (0, _asyncToGenerator2.default)(function* (pkg) {
    return yield this.shell(['pm', 'clear', pkg]);
  });

  return function (_x4) {
    return _ref10.apply(this, arguments);
  };
}();

methods.grantAllPermissions = function () {
  var _ref11 = (0, _asyncToGenerator2.default)(function* (pkg, apk) {
    const apiLevel = yield this.getApiLevel();
    let targetSdk = 0;
    let dumpsysOutput = null;

    try {
      if (!apk) {
        dumpsysOutput = yield this.shell(['dumpsys', 'package', pkg]);
        targetSdk = yield this.targetSdkVersionUsingPKG(pkg, dumpsysOutput);
      } else {
        targetSdk = yield this.targetSdkVersionFromManifest(apk);
      }
    } catch (e) {
      _logger.default.warn(`Ran into problem getting target SDK version; ignoring...`);
    }

    if (apiLevel >= 23 && targetSdk >= 23) {
      dumpsysOutput = dumpsysOutput || (yield this.shell(['dumpsys', 'package', pkg]));
      const requestedPermissions = yield this.getReqPermissions(pkg, dumpsysOutput);
      const grantedPermissions = yield this.getGrantedPermissions(pkg, dumpsysOutput);

      const permissionsToGrant = _lodash.default.difference(requestedPermissions, grantedPermissions);

      if (_lodash.default.isEmpty(permissionsToGrant)) {
        _logger.default.info(`${pkg} contains no permissions available for granting`);
      } else {
        yield this.grantPermissions(pkg, permissionsToGrant);
      }
    }
  });

  return function (_x5, _x6) {
    return _ref11.apply(this, arguments);
  };
}();

methods.grantPermissions = function () {
  var _ref12 = (0, _asyncToGenerator2.default)(function* (pkg, permissions) {
    _logger.default.debug(`Granting permissions ${JSON.stringify(permissions)} to '${pkg}'`);

    const commands = [];
    let cmdChunk = [];
    var _iteratorNormalCompletion = true;
    var _didIteratorError = false;
    var _iteratorError = undefined;

    try {
      for (var _iterator = permissions[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
        const permission = _step.value;
        const nextCmd = ['pm', 'grant', pkg, permission, ';'];

        if (nextCmd.join(' ').length + cmdChunk.join(' ').length >= MAX_SHELL_BUFFER_LENGTH) {
          commands.push(cmdChunk);
          cmdChunk = [];
        }

        cmdChunk = [...cmdChunk, ...nextCmd];
      }
    } catch (err) {
      _didIteratorError = true;
      _iteratorError = err;
    } finally {
      try {
        if (!_iteratorNormalCompletion && _iterator.return != null) {
          _iterator.return();
        }
      } finally {
        if (_didIteratorError) {
          throw _iteratorError;
        }
      }
    }

    if (!_lodash.default.isEmpty(cmdChunk)) {
      commands.push(cmdChunk);
    }

    _logger.default.debug(`Got the following command chunks to execute: ${JSON.stringify(commands)}`);

    let lastError = null;

    for (var _i = 0; _i < commands.length; _i++) {
      const cmd = commands[_i];

      try {
        yield this.shell(cmd);
      } catch (e) {
        if (!e.message.includes(NOT_CHANGEABLE_PERM_ERROR)) {
          lastError = e;
        }
      }
    }

    if (lastError) {
      throw lastError;
    }
  });

  return function (_x7, _x8) {
    return _ref12.apply(this, arguments);
  };
}();

methods.grantPermission = function () {
  var _ref13 = (0, _asyncToGenerator2.default)(function* (pkg, permission) {
    try {
      yield this.shell(['pm', 'grant', pkg, permission]);
    } catch (error) {
      if (!error.message.includes(NOT_CHANGEABLE_PERM_ERROR)) {
        throw error;
      }
    }
  });

  return function (_x9, _x10) {
    return _ref13.apply(this, arguments);
  };
}();

methods.revokePermission = function () {
  var _ref14 = (0, _asyncToGenerator2.default)(function* (pkg, permission) {
    try {
      yield this.shell(['pm', 'revoke', pkg, permission]);
    } catch (error) {
      if (!error.message.includes(NOT_CHANGEABLE_PERM_ERROR)) {
        throw error;
      }
    }
  });

  return function (_x11, _x12) {
    return _ref14.apply(this, arguments);
  };
}();

methods.getGrantedPermissions = function () {
  var _ref15 = (0, _asyncToGenerator2.default)(function* (pkg, cmdOutput = null) {
    _logger.default.debug('Retrieving granted permissions');

    const stdout = cmdOutput || (yield this.shell(['dumpsys', 'package', pkg]));
    return (0, _helpers.extractMatchingPermissions)(stdout, ['install', 'runtime'], true);
  });

  return function (_x13) {
    return _ref15.apply(this, arguments);
  };
}();

methods.getDeniedPermissions = function () {
  var _ref16 = (0, _asyncToGenerator2.default)(function* (pkg, cmdOutput = null) {
    _logger.default.debug('Retrieving denied permissions');

    const stdout = cmdOutput || (yield this.shell(['dumpsys', 'package', pkg]));
    return (0, _helpers.extractMatchingPermissions)(stdout, ['install', 'runtime'], false);
  });

  return function (_x14) {
    return _ref16.apply(this, arguments);
  };
}();

methods.getReqPermissions = function () {
  var _ref17 = (0, _asyncToGenerator2.default)(function* (pkg, cmdOutput = null) {
    _logger.default.debug('Retrieving requested permissions');

    const stdout = cmdOutput || (yield this.shell(['dumpsys', 'package', pkg]));
    return (0, _helpers.extractMatchingPermissions)(stdout, ['requested']);
  });

  return function (_x15) {
    return _ref17.apply(this, arguments);
  };
}();

methods.getLocationProviders = (0, _asyncToGenerator2.default)(function* () {
  let stdout = yield this.getSetting('secure', 'location_providers_allowed');
  return stdout.trim().split(',').map(p => p.trim()).filter(Boolean);
});

methods.toggleGPSLocationProvider = function () {
  var _ref19 = (0, _asyncToGenerator2.default)(function* (enabled) {
    yield this.setSetting('secure', 'location_providers_allowed', `${enabled ? "+" : "-"}gps`);
  });

  return function (_x16) {
    return _ref19.apply(this, arguments);
  };
}();

methods.setHiddenApiPolicy = function () {
  var _ref20 = (0, _asyncToGenerator2.default)(function* (value) {
    yield this.setSetting('global', 'hidden_api_policy_pre_p_apps', value);
    yield this.setSetting('global', 'hidden_api_policy_p_apps', value);
  });

  return function (_x17) {
    return _ref20.apply(this, arguments);
  };
}();

methods.setDefaultHiddenApiPolicy = (0, _asyncToGenerator2.default)(function* () {
  yield this.shell(['settings', 'delete', 'global', 'hidden_api_policy_pre_p_apps']);
  yield this.shell(['settings', 'delete', 'global', 'hidden_api_policy_p_apps']);
});

methods.stopAndClear = function () {
  var _ref22 = (0, _asyncToGenerator2.default)(function* (pkg) {
    try {
      yield this.forceStop(pkg);
      yield this.clear(pkg);
    } catch (e) {
      throw new Error(`Cannot stop and clear ${pkg}. Original error: ${e.message}`);
    }
  });

  return function (_x18) {
    return _ref22.apply(this, arguments);
  };
}();

methods.availableIMEs = (0, _asyncToGenerator2.default)(function* () {
  try {
    return (0, _helpers.getIMEListFromOutput)((yield this.shell(['ime', 'list', '-a'])));
  } catch (e) {
    throw new Error(`Error getting available IME's. Original error: ${e.message}`);
  }
});
methods.enabledIMEs = (0, _asyncToGenerator2.default)(function* () {
  try {
    return (0, _helpers.getIMEListFromOutput)((yield this.shell(['ime', 'list'])));
  } catch (e) {
    throw new Error(`Error getting enabled IME's. Original error: ${e.message}`);
  }
});

methods.enableIME = function () {
  var _ref25 = (0, _asyncToGenerator2.default)(function* (imeId) {
    yield this.shell(['ime', 'enable', imeId]);
  });

  return function (_x19) {
    return _ref25.apply(this, arguments);
  };
}();

methods.disableIME = function () {
  var _ref26 = (0, _asyncToGenerator2.default)(function* (imeId) {
    yield this.shell(['ime', 'disable', imeId]);
  });

  return function (_x20) {
    return _ref26.apply(this, arguments);
  };
}();

methods.setIME = function () {
  var _ref27 = (0, _asyncToGenerator2.default)(function* (imeId) {
    yield this.shell(['ime', 'set', imeId]);
  });

  return function (_x21) {
    return _ref27.apply(this, arguments);
  };
}();

methods.defaultIME = (0, _asyncToGenerator2.default)(function* () {
  try {
    let engine = yield this.getSetting('secure', 'default_input_method');
    return engine.trim();
  } catch (e) {
    throw new Error(`Error getting default IME. Original error: ${e.message}`);
  }
});

methods.keyevent = function () {
  var _ref29 = (0, _asyncToGenerator2.default)(function* (keycode) {
    let code = parseInt(keycode, 10);
    yield this.shell(['input', 'keyevent', code]);
  });

  return function (_x22) {
    return _ref29.apply(this, arguments);
  };
}();

methods.inputText = function () {
  var _ref30 = (0, _asyncToGenerator2.default)(function* (text) {
    text = text.replace(/\\/g, '\\\\').replace(/\(/g, '\(').replace(/\)/g, '\)').replace(/</g, '\<').replace(/>/g, '\>').replace(/\|/g, '\|').replace(/;/g, '\;').replace(/&/g, '\&').replace(/\*/g, '\*').replace(/~/g, '\~').replace(/"/g, '\"').replace(/'/g, "\'").replace(/ /g, '%s');
    yield this.shell(['input', 'text', text]);
  });

  return function (_x23) {
    return _ref30.apply(this, arguments);
  };
}();

methods.clearTextField = function () {
  var _ref31 = (0, _asyncToGenerator2.default)(function* (length = 100) {
    _logger.default.debug(`Clearing up to ${length} characters`);

    if (length === 0) {
      return;
    }

    let args = ['input', 'keyevent'];

    for (let i = 0; i < length; i++) {
      args.push('67', '112');
    }

    yield this.shell(args);
  });

  return function () {
    return _ref31.apply(this, arguments);
  };
}();

methods.lock = (0, _asyncToGenerator2.default)(function* () {
  var _this = this;

  if (yield this.isScreenLocked()) {
    _logger.default.debug("Screen is already locked. Doing nothing.");

    return;
  }

  _logger.default.debug("Pressing the KEYCODE_POWER button to lock screen");

  yield this.keyevent(26);
  const timeoutMs = 5000;

  try {
    yield (0, _asyncbox.waitForCondition)((0, _asyncToGenerator2.default)(function* () {
      return yield _this.isScreenLocked();
    }), {
      waitMs: timeoutMs,
      intervalMs: 500
    });
  } catch (e) {
    throw new Error(`The device screen is still locked after ${timeoutMs}ms timeout`);
  }
});
methods.back = (0, _asyncToGenerator2.default)(function* () {
  _logger.default.debug("Pressing the BACK button");

  yield this.keyevent(4);
});
methods.goToHome = (0, _asyncToGenerator2.default)(function* () {
  _logger.default.debug("Pressing the HOME button");

  yield this.keyevent(3);
});

methods.getAdbPath = function () {
  return this.executable.path;
};

methods.getScreenOrientation = (0, _asyncToGenerator2.default)(function* () {
  let stdout = yield this.shell(['dumpsys', 'input']);
  return (0, _helpers.getSurfaceOrientation)(stdout);
});
methods.isScreenLocked = (0, _asyncToGenerator2.default)(function* () {
  let stdout = yield this.shell(['dumpsys', 'window']);

  if (process.env.APPIUM_LOG_DUMPSYS) {
    let dumpsysFile = _path.default.resolve(process.cwd(), "dumpsys.log");

    _logger.default.debug(`Writing dumpsys output to ${dumpsysFile}`);

    yield _appiumSupport.fs.writeFile(dumpsysFile, stdout);
  }

  return (0, _helpers.isShowingLockscreen)(stdout) || (0, _helpers.isCurrentFocusOnKeyguard)(stdout) || !(0, _helpers.isScreenOnFully)(stdout);
});
methods.isSoftKeyboardPresent = (0, _asyncToGenerator2.default)(function* () {
  try {
    const stdout = yield this.shell(['dumpsys', 'input_method']);
    const inputShownMatch = /mInputShown=(\w+)/.exec(stdout);
    const inputViewShownMatch = /mIsInputViewShown=(\w+)/.exec(stdout);
    return {
      isKeyboardShown: !!(inputShownMatch && inputShownMatch[1] === 'true'),
      canCloseKeyboard: !!(inputViewShownMatch && inputViewShownMatch[1] === 'true')
    };
  } catch (e) {
    throw new Error(`Error finding softkeyboard. Original error: ${e.message}`);
  }
});

methods.sendTelnetCommand = function () {
  var _ref39 = (0, _asyncToGenerator2.default)(function* (command) {
    _logger.default.debug(`Sending telnet command to device: ${command}`);

    let port = yield this.getEmulatorPort();
    return yield new _bluebird.default((resolve, reject) => {
      let conn = _net.default.createConnection(port, 'localhost'),
          connected = false,
          readyRegex = /^OK$/m,
          dataStream = "",
          res = null;

      conn.on('connect', () => {
        _logger.default.debug("Socket connection to device created");
      });
      conn.on('data', data => {
        data = data.toString('utf8');

        if (!connected) {
          if (readyRegex.test(data)) {
            connected = true;

            _logger.default.debug("Socket connection to device ready");

            conn.write(`${command}\n`);
          }
        } else {
          dataStream += data;

          if (readyRegex.test(data)) {
            res = dataStream.replace(readyRegex, "").trim();
            res = _lodash.default.last(res.trim().split('\n'));

            _logger.default.debug(`Telnet command got response: ${res}`);

            conn.write("quit\n");
          }
        }
      });
      conn.on('error', err => {
        _logger.default.debug(`Telnet command error: ${err.message}`);

        reject(err);
      });
      conn.on('close', () => {
        if (res === null) {
          reject(new Error("Never got a response from command"));
        } else {
          resolve(res);
        }
      });
    });
  });

  return function (_x24) {
    return _ref39.apply(this, arguments);
  };
}();

methods.isAirplaneModeOn = (0, _asyncToGenerator2.default)(function* () {
  let stdout = yield this.getSetting('global', 'airplane_mode_on');
  return parseInt(stdout, 10) !== 0;
});

methods.setAirplaneMode = function () {
  var _ref41 = (0, _asyncToGenerator2.default)(function* (on) {
    yield this.setSetting('global', 'airplane_mode_on', on ? 1 : 0);
  });

  return function (_x25) {
    return _ref41.apply(this, arguments);
  };
}();

methods.broadcastAirplaneMode = function () {
  var _ref42 = (0, _asyncToGenerator2.default)(function* (on) {
    yield this.shell(['am', 'broadcast', '-a', 'android.intent.action.AIRPLANE_MODE', '--ez', 'state', on ? 'true' : 'false']);
  });

  return function (_x26) {
    return _ref42.apply(this, arguments);
  };
}();

methods.isWifiOn = (0, _asyncToGenerator2.default)(function* () {
  let stdout = yield this.getSetting('global', 'wifi_on');
  return parseInt(stdout, 10) !== 0;
});

methods.setWifiState = function () {
  var _ref44 = (0, _asyncToGenerator2.default)(function* (on, isEmulator = false) {
    if (isEmulator) {
      yield this.shell(['svc', 'wifi', on ? 'enable' : 'disable'], {
        privileged: true
      });
    } else {
      yield this.shell(['am', 'broadcast', '-a', WIFI_CONNECTION_SETTING_ACTION, '-n', WIFI_CONNECTION_SETTING_RECEIVER, '--es', 'setstatus', on ? 'enable' : 'disable']);
    }
  });

  return function (_x27) {
    return _ref44.apply(this, arguments);
  };
}();

methods.isDataOn = (0, _asyncToGenerator2.default)(function* () {
  let stdout = yield this.getSetting('global', 'mobile_data');
  return parseInt(stdout, 10) !== 0;
});

methods.setDataState = function () {
  var _ref46 = (0, _asyncToGenerator2.default)(function* (on, isEmulator = false) {
    if (isEmulator) {
      yield this.shell(['svc', 'data', on ? 'enable' : 'disable'], {
        privileged: true
      });
    } else {
      yield this.shell(['am', 'broadcast', '-a', DATA_CONNECTION_SETTING_ACTION, '-n', DATA_CONNECTION_SETTING_RECEIVER, '--es', 'setstatus', on ? 'enable' : 'disable']);
    }
  });

  return function (_x28) {
    return _ref46.apply(this, arguments);
  };
}();

methods.setWifiAndData = function () {
  var _ref47 = (0, _asyncToGenerator2.default)(function* ({
    wifi,
    data
  }, isEmulator = false) {
    if (_appiumSupport.util.hasValue(wifi)) {
      yield this.setWifiState(wifi, isEmulator);
    }

    if (_appiumSupport.util.hasValue(data)) {
      yield this.setDataState(data, isEmulator);
    }
  });

  return function (_x29) {
    return _ref47.apply(this, arguments);
  };
}();

methods.setAnimationState = function () {
  var _ref48 = (0, _asyncToGenerator2.default)(function* (on) {
    yield this.shell(['am', 'broadcast', '-a', ANIMATION_SETTING_ACTION, '-n', ANIMATION_SETTING_RECEIVER, '--es', 'setstatus', on ? 'enable' : 'disable']);
  });

  return function (_x30) {
    return _ref48.apply(this, arguments);
  };
}();

methods.isAnimationOn = (0, _asyncToGenerator2.default)(function* () {
  let animator_duration_scale = yield this.getSetting('global', 'animator_duration_scale');
  let transition_animation_scale = yield this.getSetting('global', 'transition_animation_scale');
  let window_animation_scale = yield this.getSetting('global', 'window_animation_scale');
  return _lodash.default.some([animator_duration_scale, transition_animation_scale, window_animation_scale], setting => setting !== '0.0');
});

methods.setDeviceSysLocaleViaSettingApp = function () {
  var _ref50 = (0, _asyncToGenerator2.default)(function* (language, country, script = null) {
    const params = ['am', 'broadcast', '-a', LOCALE_SETTING_ACTION, '-n', LOCALE_SETTING_RECEIVER, '--es', 'lang', language.toLowerCase(), '--es', 'country', country.toUpperCase()];

    if (script) {
      params.push('--es', 'script', script);
    }

    yield this.shell(params);
  });

  return function (_x31, _x32) {
    return _ref50.apply(this, arguments);
  };
}();

methods.setGeoLocation = function () {
  var _ref51 = (0, _asyncToGenerator2.default)(function* (location, isEmulator = false) {
    let longitude = parseFloat(location.longitude);

    if (isNaN(longitude)) {
      throw new Error(`location.longitude is expected to be a valid float number. '${location.longitude}' is given instead`);
    }

    longitude = `${_lodash.default.ceil(longitude, 5)}`;
    let latitude = parseFloat(location.latitude);

    if (isNaN(latitude)) {
      throw new Error(`location.latitude is expected to be a valid float number. '${location.latitude}' is given instead`);
    }

    latitude = `${_lodash.default.ceil(latitude, 5)}`;

    if (isEmulator) {
      yield this.resetTelnetAuthToken();
      yield this.adbExec(['emu', 'geo', 'fix', longitude, latitude]);
      yield this.adbExec(['emu', 'geo', 'fix', longitude.replace('.', ','), latitude.replace('.', ',')]);
    } else {
      return yield this.shell(['am', 'startservice', '-e', 'longitude', longitude, '-e', 'latitude', latitude, LOCATION_SERVICE]);
    }
  });

  return function (_x33) {
    return _ref51.apply(this, arguments);
  };
}();

methods.getGeoLocation = (0, _asyncToGenerator2.default)(function* () {
  let output;

  try {
    output = yield this.shell(['am', 'broadcast', '-n', LOCATION_RECEIVER, '-a', LOCATION_RETRIEVAL_ACTION]);
  } catch (err) {
    throw new Error(`Cannot retrieve the current geo coordinates from the device. ` + `Make sure the Appium Settings application is up to date and has location permissions. Also the location ` + `services must be enabled on the device. Original error: ${err.message}`);
  }

  const match = /data="(-?[\d\.]+)\s+(-?[\d\.]+)\s+(-?[\d\.]+)"/.exec(output);

  if (!match) {
    throw new Error(`Cannot parse the actual location values from the command output: ${output}`);
  }

  const location = {
    latitude: match[1],
    longitude: match[2],
    altitude: match[3]
  };

  _logger.default.debug(`Got geo coordinates: ${JSON.stringify(location)}`);

  return location;
});

methods.rimraf = function () {
  var _ref53 = (0, _asyncToGenerator2.default)(function* (path) {
    yield this.shell(['rm', '-rf', path]);
  });

  return function (_x34) {
    return _ref53.apply(this, arguments);
  };
}();

methods.push = function () {
  var _ref54 = (0, _asyncToGenerator2.default)(function* (localPath, remotePath, opts) {
    yield this.adbExec(['push', localPath, remotePath], opts);
  });

  return function (_x35, _x36, _x37) {
    return _ref54.apply(this, arguments);
  };
}();

methods.pull = function () {
  var _ref55 = (0, _asyncToGenerator2.default)(function* (remotePath, localPath) {
    yield this.adbExec(['pull', remotePath, localPath], {
      timeout: 60000
    });
  });

  return function (_x38, _x39) {
    return _ref55.apply(this, arguments);
  };
}();

methods.processExists = function () {
  var _ref56 = (0, _asyncToGenerator2.default)(function* (processName) {
    try {
      if (!this.isValidClass(processName)) {
        throw new Error(`Invalid process name: ${processName}`);
      }

      let stdout = yield this.shell("ps");
      var _iteratorNormalCompletion2 = true;
      var _didIteratorError2 = false;
      var _iteratorError2 = undefined;

      try {
        for (var _iterator2 = stdout.split(/\r?\n/)[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
          let line = _step2.value;
          line = line.trim().split(/\s+/);
          let pkgColumn = line[line.length - 1];

          if (pkgColumn && pkgColumn.indexOf(processName) !== -1) {
            return true;
          }
        }
      } catch (err) {
        _didIteratorError2 = true;
        _iteratorError2 = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion2 && _iterator2.return != null) {
            _iterator2.return();
          }
        } finally {
          if (_didIteratorError2) {
            throw _iteratorError2;
          }
        }
      }

      return false;
    } catch (e) {
      throw new Error(`Error finding if process exists. Original error: ${e.message}`);
    }
  });

  return function (_x40) {
    return _ref56.apply(this, arguments);
  };
}();

methods.getForwardList = (0, _asyncToGenerator2.default)(function* () {
  _logger.default.debug(`List forwarding ports`);

  let connections = yield this.adbExec(['forward', '--list']);
  return connections.split('\n');
});

methods.forwardPort = function () {
  var _ref58 = (0, _asyncToGenerator2.default)(function* (systemPort, devicePort) {
    _logger.default.debug(`Forwarding system: ${systemPort} to device: ${devicePort}`);

    yield this.adbExec(['forward', `tcp:${systemPort}`, `tcp:${devicePort}`]);
  });

  return function (_x41, _x42) {
    return _ref58.apply(this, arguments);
  };
}();

methods.removePortForward = function () {
  var _ref59 = (0, _asyncToGenerator2.default)(function* (systemPort) {
    _logger.default.debug(`Removing forwarded port socket connection: ${systemPort} `);

    yield this.adbExec(['forward', `--remove`, `tcp:${systemPort}`]);
  });

  return function (_x43) {
    return _ref59.apply(this, arguments);
  };
}();

methods.forwardAbstractPort = function () {
  var _ref60 = (0, _asyncToGenerator2.default)(function* (systemPort, devicePort) {
    _logger.default.debug(`Forwarding system: ${systemPort} to abstract device: ${devicePort}`);

    yield this.adbExec(['forward', `tcp:${systemPort}`, `localabstract:${devicePort}`]);
  });

  return function (_x44, _x45) {
    return _ref60.apply(this, arguments);
  };
}();

methods.ping = (0, _asyncToGenerator2.default)(function* () {
  let stdout = yield this.shell(["echo", "ping"]);

  if (stdout.indexOf("ping") === 0) {
    return true;
  }

  throw new Error(`ADB ping failed, returned ${stdout}`);
});
methods.restart = (0, _asyncToGenerator2.default)(function* () {
  try {
    yield this.stopLogcat();
    yield this.restartAdb();
    yield this.waitForDevice(60);
    yield this.startLogcat();
  } catch (e) {
    throw new Error(`Restart failed. Orginial error: ${e.message}`);
  }
});
methods.startLogcat = (0, _asyncToGenerator2.default)(function* () {
  if (!_lodash.default.isEmpty(this.logcat)) {
    throw new Error("Trying to start logcat capture but it's already started!");
  }

  this.logcat = new _logcat.default({
    adb: this.executable,
    debug: false,
    debugTrace: false,
    clearDeviceLogsOnStart: !!this.clearDeviceLogsOnStart
  });
  yield this.logcat.startCapture();
});
methods.stopLogcat = (0, _asyncToGenerator2.default)(function* () {
  if (_lodash.default.isEmpty(this.logcat)) {
    return;
  }

  try {
    yield this.logcat.stopCapture();
  } finally {
    this.logcat = null;
  }
});

methods.getLogcatLogs = function () {
  if (_lodash.default.isEmpty(this.logcat)) {
    throw new Error("Can't get logcat logs since logcat hasn't started");
  }

  return this.logcat.getLogs();
};

methods.setLogcatListener = function (listener) {
  if (_lodash.default.isEmpty(this.logcat)) {
    throw new Error("Logcat process hasn't been started");
  }

  this.logcat.on('output', listener);
};

methods.removeLogcatListener = function (listener) {
  if (_lodash.default.isEmpty(this.logcat)) {
    throw new Error("Logcat process hasn't been started");
  }

  this.logcat.removeListener('output', listener);
};

methods.getPIDsByName = function () {
  var _ref65 = (0, _asyncToGenerator2.default)(function* (name) {
    _logger.default.debug(`Getting all processes with ${name}`);

    try {
      if (name.length > 15) {
        name = name.substr(name.length - 15);
      }

      let stdout = (yield this.shell(["ps"])).trim();
      let pids = [];
      var _iteratorNormalCompletion3 = true;
      var _didIteratorError3 = false;
      var _iteratorError3 = undefined;

      try {
        for (var _iterator3 = stdout.split("\n")[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
          let line = _step3.value;

          if (line.indexOf(name) !== -1) {
            let match = /[^\t ]+[\t ]+([0-9]+)/.exec(line);

            if (match) {
              pids.push(parseInt(match[1], 10));
            } else {
              throw new Error(`Could not extract PID from ps output: ${line}`);
            }
          }
        }
      } catch (err) {
        _didIteratorError3 = true;
        _iteratorError3 = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion3 && _iterator3.return != null) {
            _iterator3.return();
          }
        } finally {
          if (_didIteratorError3) {
            throw _iteratorError3;
          }
        }
      }

      return pids;
    } catch (e) {
      throw new Error(`Unable to get pids for ${name}. Orginial error: ${e.message}`);
    }
  });

  return function (_x46) {
    return _ref65.apply(this, arguments);
  };
}();

methods.killProcessesByName = function () {
  var _ref66 = (0, _asyncToGenerator2.default)(function* (name) {
    try {
      _logger.default.debug(`Attempting to kill all ${name} processes`);

      let pids = yield this.getPIDsByName(name);

      if (_lodash.default.isEmpty(pids)) {
        _logger.default.info(`No '${name}' process has been found`);

        return;
      }

      var _iteratorNormalCompletion4 = true;
      var _didIteratorError4 = false;
      var _iteratorError4 = undefined;

      try {
        for (var _iterator4 = pids[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {
          let pid = _step4.value;
          yield this.killProcessByPID(pid);
        }
      } catch (err) {
        _didIteratorError4 = true;
        _iteratorError4 = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion4 && _iterator4.return != null) {
            _iterator4.return();
          }
        } finally {
          if (_didIteratorError4) {
            throw _iteratorError4;
          }
        }
      }
    } catch (e) {
      throw new Error(`Unable to kill ${name} processes. Original error: ${e.message}`);
    }
  });

  return function (_x47) {
    return _ref66.apply(this, arguments);
  };
}();

methods.killProcessByPID = function () {
  var _ref67 = (0, _asyncToGenerator2.default)(function* (pid) {
    var _this2 = this;

    _logger.default.debug(`Attempting to kill process ${pid}`);

    let wasRoot = false;
    let becameRoot = false;

    try {
      try {
        yield this.shell(['kill', '-0', pid]);
      } catch (e) {
        if (!e.message.includes('Operation not permitted')) {
          throw e;
        }

        try {
          wasRoot = yield this.isRoot();
        } catch (ign) {}

        if (wasRoot) {
          throw e;
        }

        _logger.default.info(`Cannot kill PID ${pid} due to insufficient permissions. Retrying as root`);

        try {
          becameRoot = yield this.root();
        } catch (ign) {}

        yield this.shell(['kill', '-0', pid]);
      }

      const timeoutMs = 1000;
      let stdout;

      try {
        yield (0, _asyncbox.waitForCondition)((0, _asyncToGenerator2.default)(function* () {
          try {
            stdout = yield _this2.shell(['kill', pid]);
            return false;
          } catch (e) {
            return true;
          }
        }), {
          waitMs: timeoutMs,
          intervalMs: 300
        });
      } catch (err) {
        _logger.default.warn(`Cannot kill process ${pid} in ${timeoutMs} ms. Trying to force kill...`);

        stdout = yield this.shell(['kill', '-9', pid]);
      }

      return stdout;
    } finally {
      if (becameRoot) {
        yield this.unroot();
      }
    }
  });

  return function (_x48) {
    return _ref67.apply(this, arguments);
  };
}();

methods.broadcastProcessEnd = function () {
  var _ref69 = (0, _asyncToGenerator2.default)(function* (intent, processName) {
    this.broadcast(intent);
    let start = Date.now();
    let timeoutMs = 40000;

    try {
      while (Date.now() - start < timeoutMs) {
        if (yield this.processExists(processName)) {
          yield (0, _asyncbox.sleep)(400);
          continue;
        }

        return;
      }

      throw new Error(`Process never died within ${timeoutMs} ms`);
    } catch (e) {
      throw new Error(`Unable to broadcast process end. Original error: ${e.message}`);
    }
  });

  return function (_x49, _x50) {
    return _ref69.apply(this, arguments);
  };
}();

methods.broadcast = function () {
  var _ref70 = (0, _asyncToGenerator2.default)(function* (intent) {
    if (!this.isValidClass(intent)) {
      throw new Error(`Invalid intent ${intent}`);
    }

    _logger.default.debug(`Broadcasting: ${intent}`);

    yield this.shell(['am', 'broadcast', '-a', intent]);
  });

  return function (_x51) {
    return _ref70.apply(this, arguments);
  };
}();

methods.endAndroidCoverage = (0, _asyncToGenerator2.default)(function* () {
  if (this.instrumentProc && this.instrumentProc.isRunning) {
    yield this.instrumentProc.stop();
  }
});

methods.instrument = function () {
  var _ref72 = (0, _asyncToGenerator2.default)(function* (pkg, activity, instrumentWith) {
    if (activity[0] !== ".") {
      pkg = "";
    }

    let pkgActivity = (pkg + activity).replace(/\.+/g, '.');
    let stdout = yield this.shell(['am', 'instrument', '-e', 'main_activity', pkgActivity, instrumentWith]);

    if (stdout.indexOf("Exception") !== -1) {
      throw new Error(`Unknown exception during instrumentation. Original error ${stdout.split("\n")[0]}`);
    }
  });

  return function (_x52, _x53, _x54) {
    return _ref72.apply(this, arguments);
  };
}();

methods.androidCoverage = function () {
  var _ref73 = (0, _asyncToGenerator2.default)(function* (instrumentClass, waitPkg, waitActivity) {
    var _this3 = this;

    if (!this.isValidClass(instrumentClass)) {
      throw new Error(`Invalid class ${instrumentClass}`);
    }

    return yield new _bluebird.default(function () {
      var _ref74 = (0, _asyncToGenerator2.default)(function* (resolve, reject) {
        let args = _this3.executable.defaultArgs.concat(['shell', 'am', 'instrument', '-e', 'coverage', 'true', '-w']).concat([instrumentClass]);

        _logger.default.debug(`Collecting coverage data with: ${[_this3.executable.path].concat(args).join(' ')}`);

        try {
          _this3.instrumentProc = new _teen_process.SubProcess(_this3.executable.path, args);
          yield _this3.instrumentProc.start(0);

          _this3.instrumentProc.on('output', (stdout, stderr) => {
            if (stderr) {
              reject(new Error(`Failed to run instrumentation. Original error: ${stderr}`));
            }
          });

          yield _this3.waitForActivity(waitPkg, waitActivity);
          resolve();
        } catch (e) {
          reject(new Error(`Android coverage failed. Original error: ${e.message}`));
        }
      });

      return function (_x58, _x59) {
        return _ref74.apply(this, arguments);
      };
    }());
  });

  return function (_x55, _x56, _x57) {
    return _ref73.apply(this, arguments);
  };
}();

methods.getDeviceProperty = function () {
  var _ref75 = (0, _asyncToGenerator2.default)(function* (property) {
    let stdout = yield this.shell(['getprop', property]);
    let val = stdout.trim();

    _logger.default.debug(`Current device property '${property}': ${val}`);

    return val;
  });

  return function (_x60) {
    return _ref75.apply(this, arguments);
  };
}();

methods.setDeviceProperty = function () {
  var _ref76 = (0, _asyncToGenerator2.default)(function* (prop, val) {
    _logger.default.debug(`Setting device property '${prop}' to '${val}'`);

    yield this.shell(['setprop', prop, val], {
      privileged: true
    });
  });

  return function (_x61, _x62) {
    return _ref76.apply(this, arguments);
  };
}();

methods.getDeviceSysLanguage = (0, _asyncToGenerator2.default)(function* () {
  return yield this.getDeviceProperty("persist.sys.language");
});

methods.setDeviceSysLanguage = function () {
  var _ref78 = (0, _asyncToGenerator2.default)(function* (language) {
    return yield this.setDeviceProperty("persist.sys.language", language.toLowerCase());
  });

  return function (_x63) {
    return _ref78.apply(this, arguments);
  };
}();

methods.getDeviceSysCountry = (0, _asyncToGenerator2.default)(function* () {
  return yield this.getDeviceProperty("persist.sys.country");
});

methods.setDeviceSysCountry = function () {
  var _ref80 = (0, _asyncToGenerator2.default)(function* (country) {
    return yield this.setDeviceProperty("persist.sys.country", country.toUpperCase());
  });

  return function (_x64) {
    return _ref80.apply(this, arguments);
  };
}();

methods.getDeviceSysLocale = (0, _asyncToGenerator2.default)(function* () {
  return yield this.getDeviceProperty("persist.sys.locale");
});

methods.setDeviceSysLocale = function () {
  var _ref82 = (0, _asyncToGenerator2.default)(function* (locale) {
    return yield this.setDeviceProperty("persist.sys.locale", locale);
  });

  return function (_x65) {
    return _ref82.apply(this, arguments);
  };
}();

methods.getDeviceProductLanguage = (0, _asyncToGenerator2.default)(function* () {
  return yield this.getDeviceProperty("ro.product.locale.language");
});
methods.getDeviceProductCountry = (0, _asyncToGenerator2.default)(function* () {
  return yield this.getDeviceProperty("ro.product.locale.region");
});
methods.getDeviceProductLocale = (0, _asyncToGenerator2.default)(function* () {
  return yield this.getDeviceProperty("ro.product.locale");
});
methods.getModel = (0, _asyncToGenerator2.default)(function* () {
  return yield this.getDeviceProperty("ro.product.model");
});
methods.getManufacturer = (0, _asyncToGenerator2.default)(function* () {
  return yield this.getDeviceProperty("ro.product.manufacturer");
});
methods.getScreenSize = (0, _asyncToGenerator2.default)(function* () {
  let stdout = yield this.shell(['wm', 'size']);
  let size = new RegExp(/Physical size: ([^\r?\n]+)*/g).exec(stdout);

  if (size && size.length >= 2) {
    return size[1].trim();
  }

  return null;
});
methods.getScreenDensity = (0, _asyncToGenerator2.default)(function* () {
  let stdout = yield this.shell(['wm', 'density']);
  let density = new RegExp(/Physical density: ([^\r?\n]+)*/g).exec(stdout);

  if (density && density.length >= 2) {
    let densityNumber = parseInt(density[1].trim(), 10);
    return isNaN(densityNumber) ? null : densityNumber;
  }

  return null;
});

methods.setHttpProxy = function () {
  var _ref90 = (0, _asyncToGenerator2.default)(function* (proxyHost, proxyPort) {
    let proxy = `${proxyHost}:${proxyPort}`;

    if (_lodash.default.isUndefined(proxyHost)) {
      throw new Error(`Call to setHttpProxy method with undefined proxy_host: ${proxy}`);
    }

    if (_lodash.default.isUndefined(proxyPort)) {
      throw new Error(`Call to setHttpProxy method with undefined proxy_port ${proxy}`);
    }

    yield this.setSetting('global', 'http_proxy', proxy);
    yield this.setSetting('secure', 'http_proxy', proxy);
    yield this.setSetting('system', 'http_proxy', proxy);
    yield this.setSetting('system', 'global_http_proxy_host', proxyHost);
    yield this.setSetting('system', 'global_http_proxy_port', proxyPort);
  });

  return function (_x66, _x67) {
    return _ref90.apply(this, arguments);
  };
}();

methods.setSetting = function () {
  var _ref91 = (0, _asyncToGenerator2.default)(function* (namespace, setting, value) {
    return yield this.shell(['settings', 'put', namespace, setting, value]);
  });

  return function (_x68, _x69, _x70) {
    return _ref91.apply(this, arguments);
  };
}();

methods.getSetting = function () {
  var _ref92 = (0, _asyncToGenerator2.default)(function* (namespace, setting) {
    return yield this.shell(['settings', 'get', namespace, setting]);
  });

  return function (_x71, _x72) {
    return _ref92.apply(this, arguments);
  };
}();

methods.bugreport = function () {
  var _ref93 = (0, _asyncToGenerator2.default)(function* (timeout = 120000) {
    return yield this.adbExec(['bugreport'], {
      timeout
    });
  });

  return function () {
    return _ref93.apply(this, arguments);
  };
}();

methods.screenrecord = function (destination, options = {}) {
  const cmd = ['screenrecord'];
  const videoSize = options.videoSize,
        bitRate = options.bitRate,
        timeLimit = options.timeLimit,
        bugReport = options.bugReport;

  if (_appiumSupport.util.hasValue(videoSize)) {
    cmd.push('--size', videoSize);
  }

  if (_appiumSupport.util.hasValue(timeLimit)) {
    cmd.push('--time-limit', timeLimit);
  }

  if (_appiumSupport.util.hasValue(bitRate)) {
    cmd.push('--bit-rate', bitRate);
  }

  if (bugReport) {
    cmd.push('--bugreport');
  }

  cmd.push(destination);
  const fullCmd = [...this.executable.defaultArgs, 'shell', ...cmd];

  _logger.default.debug(`Building screenrecord process with the command line: adb ${(0, _shellQuote.quote)(fullCmd)}`);

  return new _teen_process.SubProcess(this.executable.path, fullCmd);
};

methods.performEditorAction = function () {
  var _ref94 = (0, _asyncToGenerator2.default)(function* (action) {
    _logger.default.debug(`Performing editor action: ${action}`);

    const defaultIME = yield this.defaultIME();
    yield this.enableIME(APPIUM_IME);

    try {
      yield this.setIME(APPIUM_IME);
      yield this.shell(['input', 'text', `/${action}/`]);
    } finally {
      yield this.setIME(defaultIME);
    }
  });

  return function (_x73) {
    return _ref94.apply(this, arguments);
  };
}();

var _default = methods;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi90b29scy9hZGItY29tbWFuZHMuanMiXSwibmFtZXMiOlsiU0VUVElOR1NfSEVMUEVSX0lEIiwiV0lGSV9DT05ORUNUSU9OX1NFVFRJTkdfUkVDRUlWRVIiLCJXSUZJX0NPTk5FQ1RJT05fU0VUVElOR19BQ1RJT04iLCJEQVRBX0NPTk5FQ1RJT05fU0VUVElOR19SRUNFSVZFUiIsIkRBVEFfQ09OTkVDVElPTl9TRVRUSU5HX0FDVElPTiIsIkFOSU1BVElPTl9TRVRUSU5HX1JFQ0VJVkVSIiwiQU5JTUFUSU9OX1NFVFRJTkdfQUNUSU9OIiwiTE9DQUxFX1NFVFRJTkdfUkVDRUlWRVIiLCJMT0NBTEVfU0VUVElOR19BQ1RJT04iLCJMT0NBVElPTl9TRVJWSUNFIiwiTE9DQVRJT05fUkVDRUlWRVIiLCJMT0NBVElPTl9SRVRSSUVWQUxfQUNUSU9OIiwiQVBQSVVNX0lNRSIsIk1BWF9TSEVMTF9CVUZGRVJfTEVOR1RIIiwiTk9UX0NIQU5HRUFCTEVfUEVSTV9FUlJPUiIsIm1ldGhvZHMiLCJnZXRBZGJXaXRoQ29ycmVjdEFkYlBhdGgiLCJleGVjdXRhYmxlIiwicGF0aCIsImdldFNka0JpbmFyeVBhdGgiLCJiaW5hcmllcyIsImFkYiIsImluaXRBYXB0IiwiYWFwdCIsImluaXRaaXBBbGlnbiIsInppcGFsaWduIiwiaW5pdEJ1bmRsZXRvb2wiLCJidW5kbGV0b29sIiwiZnMiLCJ3aGljaCIsImVyciIsIkVycm9yIiwiZ2V0QXBpTGV2ZWwiLCJfIiwiaXNJbnRlZ2VyIiwiX2FwaUxldmVsIiwic3RyT3V0cHV0IiwiZ2V0RGV2aWNlUHJvcGVydHkiLCJwYXJzZUludCIsInRyaW0iLCJpc05hTiIsImUiLCJtZXNzYWdlIiwibG9nIiwiZGVidWciLCJnZXRQbGF0Zm9ybVZlcnNpb24iLCJpbmZvIiwiaXNEZXZpY2VDb25uZWN0ZWQiLCJkZXZpY2VzIiwiZ2V0Q29ubmVjdGVkRGV2aWNlcyIsImxlbmd0aCIsIm1rZGlyIiwicmVtb3RlUGF0aCIsInNoZWxsIiwiaXNWYWxpZENsYXNzIiwiY2xhc3NTdHJpbmciLCJSZWdFeHAiLCJleGVjIiwiZm9yY2VTdG9wIiwicGtnIiwia2lsbFBhY2thZ2UiLCJjbGVhciIsImdyYW50QWxsUGVybWlzc2lvbnMiLCJhcGsiLCJhcGlMZXZlbCIsInRhcmdldFNkayIsImR1bXBzeXNPdXRwdXQiLCJ0YXJnZXRTZGtWZXJzaW9uVXNpbmdQS0ciLCJ0YXJnZXRTZGtWZXJzaW9uRnJvbU1hbmlmZXN0Iiwid2FybiIsInJlcXVlc3RlZFBlcm1pc3Npb25zIiwiZ2V0UmVxUGVybWlzc2lvbnMiLCJncmFudGVkUGVybWlzc2lvbnMiLCJnZXRHcmFudGVkUGVybWlzc2lvbnMiLCJwZXJtaXNzaW9uc1RvR3JhbnQiLCJkaWZmZXJlbmNlIiwiaXNFbXB0eSIsImdyYW50UGVybWlzc2lvbnMiLCJwZXJtaXNzaW9ucyIsIkpTT04iLCJzdHJpbmdpZnkiLCJjb21tYW5kcyIsImNtZENodW5rIiwicGVybWlzc2lvbiIsIm5leHRDbWQiLCJqb2luIiwicHVzaCIsImxhc3RFcnJvciIsImNtZCIsImluY2x1ZGVzIiwiZ3JhbnRQZXJtaXNzaW9uIiwiZXJyb3IiLCJyZXZva2VQZXJtaXNzaW9uIiwiY21kT3V0cHV0Iiwic3Rkb3V0IiwiZ2V0RGVuaWVkUGVybWlzc2lvbnMiLCJnZXRMb2NhdGlvblByb3ZpZGVycyIsImdldFNldHRpbmciLCJzcGxpdCIsIm1hcCIsInAiLCJmaWx0ZXIiLCJCb29sZWFuIiwidG9nZ2xlR1BTTG9jYXRpb25Qcm92aWRlciIsImVuYWJsZWQiLCJzZXRTZXR0aW5nIiwic2V0SGlkZGVuQXBpUG9saWN5IiwidmFsdWUiLCJzZXREZWZhdWx0SGlkZGVuQXBpUG9saWN5Iiwic3RvcEFuZENsZWFyIiwiYXZhaWxhYmxlSU1FcyIsImVuYWJsZWRJTUVzIiwiZW5hYmxlSU1FIiwiaW1lSWQiLCJkaXNhYmxlSU1FIiwic2V0SU1FIiwiZGVmYXVsdElNRSIsImVuZ2luZSIsImtleWV2ZW50Iiwia2V5Y29kZSIsImNvZGUiLCJpbnB1dFRleHQiLCJ0ZXh0IiwicmVwbGFjZSIsImNsZWFyVGV4dEZpZWxkIiwiYXJncyIsImkiLCJsb2NrIiwiaXNTY3JlZW5Mb2NrZWQiLCJ0aW1lb3V0TXMiLCJ3YWl0TXMiLCJpbnRlcnZhbE1zIiwiYmFjayIsImdvVG9Ib21lIiwiZ2V0QWRiUGF0aCIsImdldFNjcmVlbk9yaWVudGF0aW9uIiwicHJvY2VzcyIsImVudiIsIkFQUElVTV9MT0dfRFVNUFNZUyIsImR1bXBzeXNGaWxlIiwicmVzb2x2ZSIsImN3ZCIsIndyaXRlRmlsZSIsImlzU29mdEtleWJvYXJkUHJlc2VudCIsImlucHV0U2hvd25NYXRjaCIsImlucHV0Vmlld1Nob3duTWF0Y2giLCJpc0tleWJvYXJkU2hvd24iLCJjYW5DbG9zZUtleWJvYXJkIiwic2VuZFRlbG5ldENvbW1hbmQiLCJjb21tYW5kIiwicG9ydCIsImdldEVtdWxhdG9yUG9ydCIsIkIiLCJyZWplY3QiLCJjb25uIiwibmV0IiwiY3JlYXRlQ29ubmVjdGlvbiIsImNvbm5lY3RlZCIsInJlYWR5UmVnZXgiLCJkYXRhU3RyZWFtIiwicmVzIiwib24iLCJkYXRhIiwidG9TdHJpbmciLCJ0ZXN0Iiwid3JpdGUiLCJsYXN0IiwiaXNBaXJwbGFuZU1vZGVPbiIsInNldEFpcnBsYW5lTW9kZSIsImJyb2FkY2FzdEFpcnBsYW5lTW9kZSIsImlzV2lmaU9uIiwic2V0V2lmaVN0YXRlIiwiaXNFbXVsYXRvciIsInByaXZpbGVnZWQiLCJpc0RhdGFPbiIsInNldERhdGFTdGF0ZSIsInNldFdpZmlBbmREYXRhIiwid2lmaSIsInV0aWwiLCJoYXNWYWx1ZSIsInNldEFuaW1hdGlvblN0YXRlIiwiaXNBbmltYXRpb25PbiIsImFuaW1hdG9yX2R1cmF0aW9uX3NjYWxlIiwidHJhbnNpdGlvbl9hbmltYXRpb25fc2NhbGUiLCJ3aW5kb3dfYW5pbWF0aW9uX3NjYWxlIiwic29tZSIsInNldHRpbmciLCJzZXREZXZpY2VTeXNMb2NhbGVWaWFTZXR0aW5nQXBwIiwibGFuZ3VhZ2UiLCJjb3VudHJ5Iiwic2NyaXB0IiwicGFyYW1zIiwidG9Mb3dlckNhc2UiLCJ0b1VwcGVyQ2FzZSIsInNldEdlb0xvY2F0aW9uIiwibG9jYXRpb24iLCJsb25naXR1ZGUiLCJwYXJzZUZsb2F0IiwiY2VpbCIsImxhdGl0dWRlIiwicmVzZXRUZWxuZXRBdXRoVG9rZW4iLCJhZGJFeGVjIiwiZ2V0R2VvTG9jYXRpb24iLCJvdXRwdXQiLCJtYXRjaCIsImFsdGl0dWRlIiwicmltcmFmIiwibG9jYWxQYXRoIiwib3B0cyIsInB1bGwiLCJ0aW1lb3V0IiwicHJvY2Vzc0V4aXN0cyIsInByb2Nlc3NOYW1lIiwibGluZSIsInBrZ0NvbHVtbiIsImluZGV4T2YiLCJnZXRGb3J3YXJkTGlzdCIsImNvbm5lY3Rpb25zIiwiZm9yd2FyZFBvcnQiLCJzeXN0ZW1Qb3J0IiwiZGV2aWNlUG9ydCIsInJlbW92ZVBvcnRGb3J3YXJkIiwiZm9yd2FyZEFic3RyYWN0UG9ydCIsInBpbmciLCJyZXN0YXJ0Iiwic3RvcExvZ2NhdCIsInJlc3RhcnRBZGIiLCJ3YWl0Rm9yRGV2aWNlIiwic3RhcnRMb2djYXQiLCJsb2djYXQiLCJMb2djYXQiLCJkZWJ1Z1RyYWNlIiwiY2xlYXJEZXZpY2VMb2dzT25TdGFydCIsInN0YXJ0Q2FwdHVyZSIsInN0b3BDYXB0dXJlIiwiZ2V0TG9nY2F0TG9ncyIsImdldExvZ3MiLCJzZXRMb2djYXRMaXN0ZW5lciIsImxpc3RlbmVyIiwicmVtb3ZlTG9nY2F0TGlzdGVuZXIiLCJyZW1vdmVMaXN0ZW5lciIsImdldFBJRHNCeU5hbWUiLCJuYW1lIiwic3Vic3RyIiwicGlkcyIsImtpbGxQcm9jZXNzZXNCeU5hbWUiLCJwaWQiLCJraWxsUHJvY2Vzc0J5UElEIiwid2FzUm9vdCIsImJlY2FtZVJvb3QiLCJpc1Jvb3QiLCJpZ24iLCJyb290IiwidW5yb290IiwiYnJvYWRjYXN0UHJvY2Vzc0VuZCIsImludGVudCIsImJyb2FkY2FzdCIsInN0YXJ0IiwiRGF0ZSIsIm5vdyIsImVuZEFuZHJvaWRDb3ZlcmFnZSIsImluc3RydW1lbnRQcm9jIiwiaXNSdW5uaW5nIiwic3RvcCIsImluc3RydW1lbnQiLCJhY3Rpdml0eSIsImluc3RydW1lbnRXaXRoIiwicGtnQWN0aXZpdHkiLCJhbmRyb2lkQ292ZXJhZ2UiLCJpbnN0cnVtZW50Q2xhc3MiLCJ3YWl0UGtnIiwid2FpdEFjdGl2aXR5IiwiZGVmYXVsdEFyZ3MiLCJjb25jYXQiLCJTdWJQcm9jZXNzIiwic3RkZXJyIiwid2FpdEZvckFjdGl2aXR5IiwicHJvcGVydHkiLCJ2YWwiLCJzZXREZXZpY2VQcm9wZXJ0eSIsInByb3AiLCJnZXREZXZpY2VTeXNMYW5ndWFnZSIsInNldERldmljZVN5c0xhbmd1YWdlIiwiZ2V0RGV2aWNlU3lzQ291bnRyeSIsInNldERldmljZVN5c0NvdW50cnkiLCJnZXREZXZpY2VTeXNMb2NhbGUiLCJzZXREZXZpY2VTeXNMb2NhbGUiLCJsb2NhbGUiLCJnZXREZXZpY2VQcm9kdWN0TGFuZ3VhZ2UiLCJnZXREZXZpY2VQcm9kdWN0Q291bnRyeSIsImdldERldmljZVByb2R1Y3RMb2NhbGUiLCJnZXRNb2RlbCIsImdldE1hbnVmYWN0dXJlciIsImdldFNjcmVlblNpemUiLCJzaXplIiwiZ2V0U2NyZWVuRGVuc2l0eSIsImRlbnNpdHkiLCJkZW5zaXR5TnVtYmVyIiwic2V0SHR0cFByb3h5IiwicHJveHlIb3N0IiwicHJveHlQb3J0IiwicHJveHkiLCJpc1VuZGVmaW5lZCIsIm5hbWVzcGFjZSIsImJ1Z3JlcG9ydCIsInNjcmVlbnJlY29yZCIsImRlc3RpbmF0aW9uIiwib3B0aW9ucyIsInZpZGVvU2l6ZSIsImJpdFJhdGUiLCJ0aW1lTGltaXQiLCJidWdSZXBvcnQiLCJmdWxsQ21kIiwicGVyZm9ybUVkaXRvckFjdGlvbiIsImFjdGlvbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFFQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFHQSxNQUFNQSxrQkFBa0IsR0FBRyxvQkFBM0I7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QUFLSixTQUFMLENBQWVwRyxVQUFmLENBQU47O0FBQ0EsUUFBSTtBQUNGLFlBQU0sS0FBS3VHLE1BQUwsQ0FBWXZHLFVBQVosQ0FBTjtBQUNBLFlBQU0sS0FBS3lDLEtBQUwsQ0FBVyxDQUFDLE9BQUQsRUFBVSxNQUFWLEVBQW1CLElBQUdxUSxNQUFPLEdBQTdCLENBQVgsQ0FBTjtBQUNELEtBSEQsU0FHVTtBQUNSLFlBQU0sS0FBS3ZNLE1BQUwsQ0FBWUMsVUFBWixDQUFOO0FBQ0Q7QUFDRixHQVZEOztBQUFBO0FBQUE7QUFBQTtBQUFBOztlQVllckcsTyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBsb2cgZnJvbSAnLi4vbG9nZ2VyLmpzJztcbmltcG9ydCB7IGdldElNRUxpc3RGcm9tT3V0cHV0LCBpc1Nob3dpbmdMb2Nrc2NyZWVuLCBpc0N1cnJlbnRGb2N1c09uS2V5Z3VhcmQsXG4gICAgICAgICBnZXRTdXJmYWNlT3JpZW50YXRpb24sIGlzU2NyZWVuT25GdWxseSwgZXh0cmFjdE1hdGNoaW5nUGVybWlzc2lvbnMgfSBmcm9tICcuLi9oZWxwZXJzLmpzJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IGZzLCB1dGlsIH0gZnJvbSAnYXBwaXVtLXN1cHBvcnQnO1xuaW1wb3J0IG5ldCBmcm9tICduZXQnO1xuaW1wb3J0IExvZ2NhdCBmcm9tICcuLi9sb2djYXQnO1xuaW1wb3J0IHsgc2xlZXAsIHdhaXRGb3JDb25kaXRpb24gfSBmcm9tICdhc3luY2JveCc7XG5pbXBvcnQgeyBTdWJQcm9jZXNzIH0gZnJvbSAndGVlbl9wcm9jZXNzJztcbmltcG9ydCBCIGZyb20gJ2JsdWViaXJkJztcbmltcG9ydCB7IHF1b3RlIH0gZnJvbSAnc2hlbGwtcXVvdGUnO1xuXG5cbmNvbnN0IFNFVFRJTkdTX0hFTFBFUl9JRCA9ICdpby5hcHBpdW0uc2V0dGluZ3MnO1xuY29uc3QgV0lGSV9DT05ORUNUSU9OX1NFVFRJTkdfUkVDRUlWRVIgPSBgJHtTRVRUSU5HU19IRUxQRVJfSUR9Ly5yZWNlaXZlcnMuV2lGaUNvbm5lY3Rpb25TZXR0aW5nUmVjZWl2ZXJgO1xuY29uc3QgV0lGSV9DT05ORUNUSU9OX1NFVFRJTkdfQUNUSU9OID0gYCR7U0VUVElOR1NfSEVMUEVSX0lEfS53aWZpYDtcbmNvbnN0IERBVEFfQ09OTkVDVElPTl9TRVRUSU5HX1JFQ0VJVkVSID0gYCR7U0VUVElOR1NfSEVMUEVSX0lEfS8ucmVjZWl2ZXJzLkRhdGFDb25uZWN0aW9uU2V0dGluZ1JlY2VpdmVyYDtcbmNvbnN0IERBVEFfQ09OTkVDVElPTl9TRVRUSU5HX0FDVElPTiA9IGAke1NFVFRJTkdTX0hFTFBFUl9JRH0uZGF0YV9jb25uZWN0aW9uYDtcbmNvbnN0IEFOSU1BVElPTl9TRVRUSU5HX1JFQ0VJVkVSID0gYCR7U0VUVElOR1NfSEVMUEVSX0lEfS8ucmVjZWl2ZXJzLkFuaW1hdGlvblNldHRpbmdSZWNlaXZlcmA7XG5jb25zdCBBTklNQVRJT05fU0VUVElOR19BQ1RJT04gPSBgJHtTRVRUSU5HU19IRUxQRVJfSUR9LmFuaW1hdGlvbmA7XG5jb25zdCBMT0NBTEVfU0VUVElOR19SRUNFSVZFUiA9IGAke1NFVFRJTkdTX0hFTFBFUl9JRH0vLnJlY2VpdmVycy5Mb2NhbGVTZXR0aW5nUmVjZWl2ZXJgO1xuY29uc3QgTE9DQUxFX1NFVFRJTkdfQUNUSU9OID0gYCR7U0VUVElOR1NfSEVMUEVSX0lEfS5sb2NhbGVgO1xuY29uc3QgTE9DQVRJT05fU0VSVklDRSA9IGAke1NFVFRJTkdTX0hFTFBFUl9JRH0vLkxvY2F0aW9uU2VydmljZWA7XG5jb25zdCBMT0NBVElPTl9SRUNFSVZFUiA9IGAke1NFVFRJTkdTX0hFTFBFUl9JRH0vLnJlY2VpdmVycy5Mb2NhdGlvbkluZm9SZWNlaXZlcmA7XG5jb25zdCBMT0NBVElPTl9SRVRSSUVWQUxfQUNUSU9OID0gYCR7U0VUVElOR1NfSEVMUEVSX0lEfS5sb2NhdGlvbmA7XG5jb25zdCBBUFBJVU1fSU1FID0gYCR7U0VUVElOR1NfSEVMUEVSX0lEfS8uQXBwaXVtSU1FYDtcbmNvbnN0IE1BWF9TSEVMTF9CVUZGRVJfTEVOR1RIID0gMTAwMDtcbmNvbnN0IE5PVF9DSEFOR0VBQkxFX1BFUk1fRVJST1IgPSAnbm90IGEgY2hhbmdlYWJsZSBwZXJtaXNzaW9uIHR5cGUnO1xuXG5sZXQgbWV0aG9kcyA9IHt9O1xuXG4vKipcbiAqIEdldCB0aGUgcGF0aCB0byBhZGIgZXhlY3V0YWJsZSBhbWQgYXNzaWduIGl0XG4gKiB0byB0aGlzLmV4ZWN1dGFibGUucGF0aCBhbmQgdGhpcy5iaW5hcmllcy5hZGIgcHJvcGVydGllcy5cbiAqXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEZ1bGwgcGF0aCB0byBhZGIgZXhlY3V0YWJsZS5cbiAqL1xubWV0aG9kcy5nZXRBZGJXaXRoQ29ycmVjdEFkYlBhdGggPSBhc3luYyBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuZXhlY3V0YWJsZS5wYXRoID0gYXdhaXQgdGhpcy5nZXRTZGtCaW5hcnlQYXRoKFwiYWRiXCIpO1xuICB0aGlzLmJpbmFyaWVzLmFkYiA9IHRoaXMuZXhlY3V0YWJsZS5wYXRoO1xuICByZXR1cm4gdGhpcy5hZGI7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgZnVsbCBwYXRoIHRvIGFhcHQgdG9vbCBhbmQgYXNzaWduIGl0IHRvXG4gKiB0aGlzLmJpbmFyaWVzLmFhcHQgcHJvcGVydHlcbiAqL1xubWV0aG9kcy5pbml0QWFwdCA9IGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5iaW5hcmllcy5hYXB0ID0gYXdhaXQgdGhpcy5nZXRTZGtCaW5hcnlQYXRoKFwiYWFwdFwiKTtcbn07XG5cbi8qKlxuICogR2V0IHRoZSBmdWxsIHBhdGggdG8gemlwYWxpZ24gdG9vbCBhbmQgYXNzaWduIGl0IHRvXG4gKiB0aGlzLmJpbmFyaWVzLnppcGFsaWduIHByb3BlcnR5XG4gKi9cbm1ldGhvZHMuaW5pdFppcEFsaWduID0gYXN5bmMgZnVuY3Rpb24gKCkge1xuICB0aGlzLmJpbmFyaWVzLnppcGFsaWduID0gYXdhaXQgdGhpcy5nZXRTZGtCaW5hcnlQYXRoKFwiemlwYWxpZ25cIik7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgZnVsbCBwYXRoIHRvIGJ1bmRsZXRvb2wgYmluYXJ5IGFuZCBhc3NpZ24gaXQgdG9cbiAqIHRoaXMuYmluYXJpZXMuYnVuZGxldG9vbCBwcm9wZXJ0eVxuICovXG5tZXRob2RzLmluaXRCdW5kbGV0b29sID0gYXN5bmMgZnVuY3Rpb24gKCkge1xuICB0cnkge1xuICAgIHRoaXMuYmluYXJpZXMuYnVuZGxldG9vbCA9IGF3YWl0IGZzLndoaWNoKCdidW5kbGV0b29sLmphcicpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2J1bmRsZXRvb2wuamFyIGJpbmFyeSBpcyBleHBlY3RlZCB0byBiZSBwcmVzZW50IGluIFBBVEguICcgK1xuICAgICAgJ1Zpc2l0IGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvYnVuZGxldG9vbCBmb3IgbW9yZSBkZXRhaWxzLicpO1xuICB9XG59O1xuXG4vKipcbiAqIFJldHJpZXZlIHRoZSBBUEkgbGV2ZWwgb2YgdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIEFQSSBsZXZlbCBhcyBpbnRlZ2VyIG51bWJlciwgZm9yIGV4YW1wbGUgMjEgZm9yXG4gKiAgICAgICAgICAgICAgICAgIEFuZHJvaWQgTG9sbGlwb3AuIFRoZSByZXN1bHQgb2YgdGhpcyBtZXRob2QgaXMgY2FjaGVkLCBzbyBhbGwgdGhlIGZ1cnRoZXJcbiAqIGNhbGxzIHJldHVybiB0aGUgc2FtZSB2YWx1ZSBhcyB0aGUgZmlyc3Qgb25lLlxuICovXG5tZXRob2RzLmdldEFwaUxldmVsID0gYXN5bmMgZnVuY3Rpb24gKCkge1xuICBpZiAoIV8uaXNJbnRlZ2VyKHRoaXMuX2FwaUxldmVsKSkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzdHJPdXRwdXQgPSBhd2FpdCB0aGlzLmdldERldmljZVByb3BlcnR5KCdyby5idWlsZC52ZXJzaW9uLnNkaycpO1xuICAgICAgdGhpcy5fYXBpTGV2ZWwgPSBwYXJzZUludChzdHJPdXRwdXQudHJpbSgpLCAxMCk7XG4gICAgICBpZiAoaXNOYU4odGhpcy5fYXBpTGV2ZWwpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlIGFjdHVhbCBvdXRwdXQgXCIke3N0ck91dHB1dH1cIiBjYW5ub3QgYmUgY29udmVydGVkIHRvIGFuIGludGVnZXJgKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGdldHRpbmcgZGV2aWNlIEFQSSBsZXZlbC4gT3JpZ2luYWwgZXJyb3I6ICR7ZS5tZXNzYWdlfWApO1xuICAgIH1cbiAgfVxuICBsb2cuZGVidWcoYERldmljZSBBUEkgbGV2ZWw6ICR7dGhpcy5fYXBpTGV2ZWx9YCk7XG4gIHJldHVybiB0aGlzLl9hcGlMZXZlbDtcbn07XG5cbi8qKlxuICogUmV0cmlldmUgdGhlIHBsYXRmb3JtIHZlcnNpb24gb2YgdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHBsYXRmb3JtIHZlcnNpb24gYXMgYSBzdHJpbmcsIGZvciBleGFtcGxlICc1LjAnIGZvclxuICogQW5kcm9pZCBMb2xsaXBvcC5cbiAqL1xubWV0aG9kcy5nZXRQbGF0Zm9ybVZlcnNpb24gPSBhc3luYyBmdW5jdGlvbiAoKSB7XG4gIGxvZy5pbmZvKFwiR2V0dGluZyBkZXZpY2UgcGxhdGZvcm0gdmVyc2lvblwiKTtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXREZXZpY2VQcm9wZXJ0eSgncm8uYnVpbGQudmVyc2lvbi5yZWxlYXNlJyk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGdldHRpbmcgZGV2aWNlIHBsYXRmb3JtIHZlcnNpb24uIE9yaWdpbmFsIGVycm9yOiAke2UubWVzc2FnZX1gKTtcbiAgfVxufTtcblxuLyoqXG4gKiBWZXJpZnkgd2hldGhlciBhIGRldmljZSBpcyBjb25uZWN0ZWQuXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBhdCBsZWFzdCBvbmUgZGV2aWNlIGlzIHZpc2libGUgdG8gYWRiLlxuICovXG5tZXRob2RzLmlzRGV2aWNlQ29ubmVjdGVkID0gYXN5bmMgZnVuY3Rpb24gKCkge1xuICBsZXQgZGV2aWNlcyA9IGF3YWl0IHRoaXMuZ2V0Q29ubmVjdGVkRGV2aWNlcygpO1xuICByZXR1cm4gZGV2aWNlcy5sZW5ndGggPiAwO1xufTtcblxuLyoqXG4gKiBSZWN1cnNpdmVseSBjcmVhdGUgYSBuZXcgZm9sZGVyIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVtb3RlUGF0aCAtIFRoZSBuZXcgcGF0aCB0byBiZSBjcmVhdGVkLlxuICogQHJldHVybiB7c3RyaW5nfSBta2RpciBjb21tYW5kIG91dHB1dC5cbiAqL1xubWV0aG9kcy5ta2RpciA9IGFzeW5jIGZ1bmN0aW9uIChyZW1vdGVQYXRoKSB7XG4gIHJldHVybiBhd2FpdCB0aGlzLnNoZWxsKFsnbWtkaXInLCAnLXAnLCByZW1vdGVQYXRoXSk7XG59O1xuXG4vKipcbiAqIFZlcmlmeSB3aGV0aGVyIHRoZSBnaXZlbiBhcmd1bWVudCBpcyBhXG4gKiB2YWxpZCBjbGFzcyBuYW1lLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc1N0cmluZyAtIFRoZSBhY3R1YWwgY2xhc3MgbmFtZSB0byBiZSB2ZXJpZmllZC5cbiAqIEByZXR1cm4gez9BcnJheS48TWF0Y2g+fSBUaGUgcmVzdWx0IG9mIFJlZ2V4cC5leGVjIG9wZXJhdGlvblxuICogICAgICAgICAgICAgICAgICAgICAgICAgIG9yIF9udWxsXyBpZiBubyBtYXRjaGVzIGFyZSBmb3VuZC5cbiAqL1xubWV0aG9kcy5pc1ZhbGlkQ2xhc3MgPSBmdW5jdGlvbiAoY2xhc3NTdHJpbmcpIHtcbiAgLy8gc29tZS5wYWNrYWdlL3NvbWUucGFja2FnZS5BY3Rpdml0eVxuICByZXR1cm4gbmV3IFJlZ0V4cCgvXlthLXpBLVowLTkuL19dKyQvKS5leGVjKGNsYXNzU3RyaW5nKTtcbn07XG5cbi8qKlxuICogRm9yY2UgYXBwbGljYXRpb24gdG8gc3RvcCBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBrZyAtIFRoZSBwYWNrYWdlIG5hbWUgdG8gYmUgc3RvcHBlZC5cbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIG91dHB1dCBvZiB0aGUgY29ycmVzcG9uZGluZyBhZGIgY29tbWFuZC5cbiAqL1xubWV0aG9kcy5mb3JjZVN0b3AgPSBhc3luYyBmdW5jdGlvbiAocGtnKSB7XG4gIHJldHVybiBhd2FpdCB0aGlzLnNoZWxsKFsnYW0nLCAnZm9yY2Utc3RvcCcsIHBrZ10pO1xufTtcblxuLypcbiAqIEtpbGwgYXBwbGljYXRpb25cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGtnIC0gVGhlIHBhY2thZ2UgbmFtZSB0byBiZSBzdG9wcGVkLlxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgb3V0cHV0IG9mIHRoZSBjb3JyZXNwb25kaW5nIGFkYiBjb21tYW5kLlxuICovXG5tZXRob2RzLmtpbGxQYWNrYWdlID0gYXN5bmMgZnVuY3Rpb24ga2lsbFBhY2thZ2UgKHBrZykge1xuICByZXR1cm4gYXdhaXQgdGhpcy5zaGVsbChbJ2FtJywgJ2tpbGwnLCBwa2ddKTtcbn07XG5cbi8qKlxuICogQ2xlYXIgdGhlIHVzZXIgZGF0YSBvZiB0aGUgcGFydGljdWxhciBhcHBsaWNhdGlvbiBvbiB0aGUgZGV2aWNlXG4gKiB1bmRlciB0ZXN0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwa2cgLSBUaGUgcGFja2FnZSBuYW1lIHRvIGJlIGNsZWFyZWQuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBvdXRwdXQgb2YgdGhlIGNvcnJlc3BvbmRpbmcgYWRiIGNvbW1hbmQuXG4gKi9cbm1ldGhvZHMuY2xlYXIgPSBhc3luYyBmdW5jdGlvbiAocGtnKSB7XG4gIHJldHVybiBhd2FpdCB0aGlzLnNoZWxsKFsncG0nLCAnY2xlYXInLCBwa2ddKTtcbn07XG5cbi8qKlxuICogR3JhbnQgYWxsIHBlcm1pc3Npb25zIHJlcXVlc3RlZCBieSB0aGUgcGFydGljdWxhciBwYWNrYWdlLlxuICogVGhpcyBtZXRob2QgaXMgb25seSB1c2VmdWwgb24gQW5kcm9pZCA2LjArIGFuZCBmb3IgYXBwbGljYXRpb25zXG4gKiB0aGF0IHN1cHBvcnQgY29tcG9uZW50cy1iYXNlZCBwZXJtaXNzaW9ucyBzZXR0aW5nLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwa2cgLSBUaGUgcGFja2FnZSBuYW1lIHRvIGJlIHByb2Nlc3NlZC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBhcGsgLSBUaGUgcGF0aCB0byB0aGUgYWN0dWFsIGFwayBmaWxlLlxuICogQHRocm93cyB7RXJyb3J9IElmIHRoZXJlIHdhcyBhbiBlcnJvciB3aGlsZSBncmFudGluZyBwZXJtaXNzaW9uc1xuICovXG5tZXRob2RzLmdyYW50QWxsUGVybWlzc2lvbnMgPSBhc3luYyBmdW5jdGlvbiAocGtnLCBhcGspIHtcbiAgY29uc3QgYXBpTGV2ZWwgPSBhd2FpdCB0aGlzLmdldEFwaUxldmVsKCk7XG4gIGxldCB0YXJnZXRTZGsgPSAwO1xuICBsZXQgZHVtcHN5c091dHB1dCA9IG51bGw7XG4gIHRyeSB7XG4gICAgaWYgKCFhcGspIHtcbiAgICAgIC8qKlxuICAgICAgICogSWYgYXBrIG5vdCBwcm92aWRlZCwgY29uc2lkZXJpbmcgYXBrIGFscmVhZHkgaW5zdGFsbGVkIG9uIHRoZSBkZXZpY2VcbiAgICAgICAqIGFuZCBmZXRjaGluZyB0YXJnZXRTZGsgdXNpbmcgcGFja2FnZSBuYW1lLlxuICAgICAgICovXG4gICAgICBkdW1wc3lzT3V0cHV0ID0gYXdhaXQgdGhpcy5zaGVsbChbJ2R1bXBzeXMnLCAncGFja2FnZScsIHBrZ10pO1xuICAgICAgdGFyZ2V0U2RrID0gYXdhaXQgdGhpcy50YXJnZXRTZGtWZXJzaW9uVXNpbmdQS0cocGtnLCBkdW1wc3lzT3V0cHV0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGFyZ2V0U2RrID0gYXdhaXQgdGhpcy50YXJnZXRTZGtWZXJzaW9uRnJvbU1hbmlmZXN0KGFwayk7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgLy9hdm9pZGluZyBsb2dnaW5nIGVycm9yIHN0YWNrLCBhcyBjYWxsaW5nIGxpYnJhcnkgZnVuY3Rpb24gd291bGQgaGF2ZSBsb2dnZWRcbiAgICBsb2cud2FybihgUmFuIGludG8gcHJvYmxlbSBnZXR0aW5nIHRhcmdldCBTREsgdmVyc2lvbjsgaWdub3JpbmcuLi5gKTtcbiAgfVxuICBpZiAoYXBpTGV2ZWwgPj0gMjMgJiYgdGFyZ2V0U2RrID49IDIzKSB7XG4gICAgLyoqXG4gICAgICogSWYgdGhlIGRldmljZSBpcyBydW5uaW5nIEFuZHJvaWQgNi4wKEFQSSAyMykgb3IgaGlnaGVyLCBhbmQgeW91ciBhcHAncyB0YXJnZXQgU0RLIGlzIDIzIG9yIGhpZ2hlcjpcbiAgICAgKiBUaGUgYXBwIGhhcyB0byBsaXN0IHRoZSBwZXJtaXNzaW9ucyBpbiB0aGUgbWFuaWZlc3QuXG4gICAgICogcmVmZXI6IGh0dHBzOi8vZGV2ZWxvcGVyLmFuZHJvaWQuY29tL3RyYWluaW5nL3Blcm1pc3Npb25zL3JlcXVlc3RpbmcuaHRtbFxuICAgICAqL1xuICAgIGR1bXBzeXNPdXRwdXQgPSBkdW1wc3lzT3V0cHV0IHx8IGF3YWl0IHRoaXMuc2hlbGwoWydkdW1wc3lzJywgJ3BhY2thZ2UnLCBwa2ddKTtcbiAgICBjb25zdCByZXF1ZXN0ZWRQZXJtaXNzaW9ucyA9IGF3YWl0IHRoaXMuZ2V0UmVxUGVybWlzc2lvbnMocGtnLCBkdW1wc3lzT3V0cHV0KTtcbiAgICBjb25zdCBncmFudGVkUGVybWlzc2lvbnMgPSBhd2FpdCB0aGlzLmdldEdyYW50ZWRQZXJtaXNzaW9ucyhwa2csIGR1bXBzeXNPdXRwdXQpO1xuICAgIGNvbnN0IHBlcm1pc3Npb25zVG9HcmFudCA9IF8uZGlmZmVyZW5jZShyZXF1ZXN0ZWRQZXJtaXNzaW9ucywgZ3JhbnRlZFBlcm1pc3Npb25zKTtcbiAgICBpZiAoXy5pc0VtcHR5KHBlcm1pc3Npb25zVG9HcmFudCkpIHtcbiAgICAgIGxvZy5pbmZvKGAke3BrZ30gY29udGFpbnMgbm8gcGVybWlzc2lvbnMgYXZhaWxhYmxlIGZvciBncmFudGluZ2ApO1xuICAgIH0gZWxzZSB7XG4gICAgICBhd2FpdCB0aGlzLmdyYW50UGVybWlzc2lvbnMocGtnLCBwZXJtaXNzaW9uc1RvR3JhbnQpO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBHcmFudCBtdWx0aXBsZSBwZXJtaXNzaW9ucyBmb3IgdGhlIHBhcnRpY3VsYXIgcGFja2FnZS5cbiAqIFRoaXMgY2FsbCBpcyBtb3JlIHBlcmZvcm1hbnQgdGhhbiBgZ3JhbnRQZXJtaXNzaW9uYCBvbmUsIHNpbmNlIGl0IGNvbWJpbmVzXG4gKiBtdWx0aXBsZSBgYWRiIHNoZWxsYCBjYWxscyBpbnRvIGEgc2luZ2xlIGNvbW1hbmQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBrZyAtIFRoZSBwYWNrYWdlIG5hbWUgdG8gYmUgcHJvY2Vzc2VkLlxuICogQHBhcmFtIHtBcnJheTxzdHJpbmc+fSBwZXJtaXNzaW9ucyAtIFRoZSBsaXN0IG9mIHBlcm1pc3Npb25zIHRvIGJlIGdyYW50ZWQuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlcmUgd2FzIGFuIGVycm9yIHdoaWxlIGNoYW5naW5nIHBlcm1pc3Npb25zLlxuICovXG5tZXRob2RzLmdyYW50UGVybWlzc2lvbnMgPSBhc3luYyBmdW5jdGlvbiAocGtnLCBwZXJtaXNzaW9ucykge1xuICAvLyBBcyBpdCBjb25zdW1lcyBtb3JlIHRpbWUgZm9yIGdyYW50aW5nIGVhY2ggcGVybWlzc2lvbixcbiAgLy8gdHJ5aW5nIHRvIGdyYW50IGFsbCBwZXJtaXNzaW9uIGJ5IGZvcm1pbmcgZXF1aXZhbGVudCBjb21tYW5kLlxuICAvLyBBbHNvLCBpdCBpcyBuZWNlc3NhcnkgdG8gc3BsaXQgbG9uZyBjb21tYW5kcyBpbnRvIGNodW5rcywgc2luY2UgdGhlIG1heGltdW0gbGVuZ3RoIG9mXG4gIC8vIGFkYiBzaGVsbCBidWZmZXIgaXMgbGltaXRlZFxuICBsb2cuZGVidWcoYEdyYW50aW5nIHBlcm1pc3Npb25zICR7SlNPTi5zdHJpbmdpZnkocGVybWlzc2lvbnMpfSB0byAnJHtwa2d9J2ApO1xuICBjb25zdCBjb21tYW5kcyA9IFtdO1xuICBsZXQgY21kQ2h1bmsgPSBbXTtcbiAgZm9yIChjb25zdCBwZXJtaXNzaW9uIG9mIHBlcm1pc3Npb25zKSB7XG4gICAgY29uc3QgbmV4dENtZCA9IFsncG0nLCAnZ3JhbnQnLCBwa2csIHBlcm1pc3Npb24sICc7J107XG4gICAgaWYgKG5leHRDbWQuam9pbignICcpLmxlbmd0aCArIGNtZENodW5rLmpvaW4oJyAnKS5sZW5ndGggPj0gTUFYX1NIRUxMX0JVRkZFUl9MRU5HVEgpIHtcbiAgICAgIGNvbW1hbmRzLnB1c2goY21kQ2h1bmspO1xuICAgICAgY21kQ2h1bmsgPSBbXTtcbiAgICB9XG4gICAgY21kQ2h1bmsgPSBbLi4uY21kQ2h1bmssIC4uLm5leHRDbWRdO1xuICB9XG4gIGlmICghXy5pc0VtcHR5KGNtZENodW5rKSkge1xuICAgIGNvbW1hbmRzLnB1c2goY21kQ2h1bmspO1xuICB9XG4gIGxvZy5kZWJ1ZyhgR290IHRoZSBmb2xsb3dpbmcgY29tbWFuZCBjaHVua3MgdG8gZXhlY3V0ZTogJHtKU09OLnN0cmluZ2lmeShjb21tYW5kcyl9YCk7XG4gIGxldCBsYXN0RXJyb3IgPSBudWxsO1xuICBmb3IgKGNvbnN0IGNtZCBvZiBjb21tYW5kcykge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLnNoZWxsKGNtZCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gdGhpcyBpcyB0byBnaXZlIHRoZSBtZXRob2QgYSBjaGFuY2UgdG8gYXNzaWduIGFsbCB0aGUgcmVxdWVzdGVkIHBlcm1pc3Npb25zXG4gICAgICAvLyBiZWZvcmUgdG8gcXVpdCBpbiBjYXNlIHdlJ2QgbGlrZSB0byBpZ25vcmUgdGhlIGVycm9yIG9uIHRoZSBoaWdoZXIgbGV2ZWxcbiAgICAgIGlmICghZS5tZXNzYWdlLmluY2x1ZGVzKE5PVF9DSEFOR0VBQkxFX1BFUk1fRVJST1IpKSB7XG4gICAgICAgIGxhc3RFcnJvciA9IGU7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmIChsYXN0RXJyb3IpIHtcbiAgICB0aHJvdyBsYXN0RXJyb3I7XG4gIH1cbn07XG5cbi8qKlxuICogR3JhbnQgc2luZ2xlIHBlcm1pc3Npb24gZm9yIHRoZSBwYXJ0aWN1bGFyIHBhY2thZ2UuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBrZyAtIFRoZSBwYWNrYWdlIG5hbWUgdG8gYmUgcHJvY2Vzc2VkLlxuICogQHBhcmFtIHtzdHJpbmd9IHBlcm1pc3Npb24gLSBUaGUgZnVsbCBuYW1lIG9mIHRoZSBwZXJtaXNzaW9uIHRvIGJlIGdyYW50ZWQuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlcmUgd2FzIGFuIGVycm9yIHdoaWxlIGNoYW5naW5nIHBlcm1pc3Npb25zLlxuICovXG5tZXRob2RzLmdyYW50UGVybWlzc2lvbiA9IGFzeW5jIGZ1bmN0aW9uIChwa2csIHBlcm1pc3Npb24pIHtcbiAgdHJ5IHtcbiAgICBhd2FpdCB0aGlzLnNoZWxsKFsncG0nLCAnZ3JhbnQnLCBwa2csIHBlcm1pc3Npb25dKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoIWVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoTk9UX0NIQU5HRUFCTEVfUEVSTV9FUlJPUikpIHtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBSZXZva2Ugc2luZ2xlIHBlcm1pc3Npb24gZnJvbSB0aGUgcGFydGljdWxhciBwYWNrYWdlLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwa2cgLSBUaGUgcGFja2FnZSBuYW1lIHRvIGJlIHByb2Nlc3NlZC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBwZXJtaXNzaW9uIC0gVGhlIGZ1bGwgbmFtZSBvZiB0aGUgcGVybWlzc2lvbiB0byBiZSByZXZva2VkLlxuICogQHRocm93cyB7RXJyb3J9IElmIHRoZXJlIHdhcyBhbiBlcnJvciB3aGlsZSBjaGFuZ2luZyBwZXJtaXNzaW9ucy5cbiAqL1xubWV0aG9kcy5yZXZva2VQZXJtaXNzaW9uID0gYXN5bmMgZnVuY3Rpb24gKHBrZywgcGVybWlzc2lvbikge1xuICB0cnkge1xuICAgIGF3YWl0IHRoaXMuc2hlbGwoWydwbScsICdyZXZva2UnLCBwa2csIHBlcm1pc3Npb25dKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoIWVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoTk9UX0NIQU5HRUFCTEVfUEVSTV9FUlJPUikpIHtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBSZXRyaWV2ZSB0aGUgbGlzdCBvZiBncmFudGVkIHBlcm1pc3Npb25zIGZvciB0aGUgcGFydGljdWxhciBwYWNrYWdlLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwa2cgLSBUaGUgcGFja2FnZSBuYW1lIHRvIGJlIHByb2Nlc3NlZC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBjbWRPdXRwdXQgW251bGxdIC0gT3B0aW9uYWwgcGFyYW1ldGVyIGNvbnRhaW5pbmcgY29tbWFuZCBvdXRwdXQgb2ZcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2R1bXBzeXMgcGFja2FnZV8gY29tbWFuZC4gSXQgbWF5IHNwZWVkIHVwIHRoZSBtZXRob2QgZXhlY3V0aW9uLlxuICogQHJldHVybiB7QXJyYXk8U3RyaW5nPn0gVGhlIGxpc3Qgb2YgZ3JhbnRlZCBwZXJtaXNzaW9ucyBvciBhbiBlbXB0eSBsaXN0LlxuICogQHRocm93cyB7RXJyb3J9IElmIHRoZXJlIHdhcyBhbiBlcnJvciB3aGlsZSBjaGFuZ2luZyBwZXJtaXNzaW9ucy5cbiAqL1xubWV0aG9kcy5nZXRHcmFudGVkUGVybWlzc2lvbnMgPSBhc3luYyBmdW5jdGlvbiAocGtnLCBjbWRPdXRwdXQgPSBudWxsKSB7XG4gIGxvZy5kZWJ1ZygnUmV0cmlldmluZyBncmFudGVkIHBlcm1pc3Npb25zJyk7XG4gIGNvbnN0IHN0ZG91dCA9IGNtZE91dHB1dCB8fCBhd2FpdCB0aGlzLnNoZWxsKFsnZHVtcHN5cycsICdwYWNrYWdlJywgcGtnXSk7XG4gIHJldHVybiBleHRyYWN0TWF0Y2hpbmdQZXJtaXNzaW9ucyhzdGRvdXQsIFsnaW5zdGFsbCcsICdydW50aW1lJ10sIHRydWUpO1xufTtcblxuLyoqXG4gKiBSZXRyaWV2ZSB0aGUgbGlzdCBvZiBkZW5pZWQgcGVybWlzc2lvbnMgZm9yIHRoZSBwYXJ0aWN1bGFyIHBhY2thZ2UuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBrZyAtIFRoZSBwYWNrYWdlIG5hbWUgdG8gYmUgcHJvY2Vzc2VkLlxuICogQHBhcmFtIHtzdHJpbmd9IGNtZE91dHB1dCBbbnVsbF0gLSBPcHRpb25hbCBwYXJhbWV0ZXIgY29udGFpbmluZyBjb21tYW5kIG91dHB1dCBvZlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZHVtcHN5cyBwYWNrYWdlXyBjb21tYW5kLiBJdCBtYXkgc3BlZWQgdXAgdGhlIG1ldGhvZCBleGVjdXRpb24uXG4gKiBAcmV0dXJuIHtBcnJheTxTdHJpbmc+fSBUaGUgbGlzdCBvZiBkZW5pZWQgcGVybWlzc2lvbnMgb3IgYW4gZW1wdHkgbGlzdC5cbiAqL1xubWV0aG9kcy5nZXREZW5pZWRQZXJtaXNzaW9ucyA9IGFzeW5jIGZ1bmN0aW9uIChwa2csIGNtZE91dHB1dCA9IG51bGwpIHtcbiAgbG9nLmRlYnVnKCdSZXRyaWV2aW5nIGRlbmllZCBwZXJtaXNzaW9ucycpO1xuICBjb25zdCBzdGRvdXQgPSBjbWRPdXRwdXQgfHwgYXdhaXQgdGhpcy5zaGVsbChbJ2R1bXBzeXMnLCAncGFja2FnZScsIHBrZ10pO1xuICByZXR1cm4gZXh0cmFjdE1hdGNoaW5nUGVybWlzc2lvbnMoc3Rkb3V0LCBbJ2luc3RhbGwnLCAncnVudGltZSddLCBmYWxzZSk7XG59O1xuXG4vKipcbiAqIFJldHJpZXZlIHRoZSBsaXN0IG9mIHJlcXVlc3RlZCBwZXJtaXNzaW9ucyBmb3IgdGhlIHBhcnRpY3VsYXIgcGFja2FnZS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGtnIC0gVGhlIHBhY2thZ2UgbmFtZSB0byBiZSBwcm9jZXNzZWQuXG4gKiBAcGFyYW0ge3N0cmluZ30gY21kT3V0cHV0IFtudWxsXSAtIE9wdGlvbmFsIHBhcmFtZXRlciBjb250YWluaW5nIGNvbW1hbmQgb3V0cHV0IG9mXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9kdW1wc3lzIHBhY2thZ2VfIGNvbW1hbmQuIEl0IG1heSBzcGVlZCB1cCB0aGUgbWV0aG9kIGV4ZWN1dGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PFN0cmluZz59IFRoZSBsaXN0IG9mIHJlcXVlc3RlZCBwZXJtaXNzaW9ucyBvciBhbiBlbXB0eSBsaXN0LlxuICovXG5tZXRob2RzLmdldFJlcVBlcm1pc3Npb25zID0gYXN5bmMgZnVuY3Rpb24gKHBrZywgY21kT3V0cHV0ID0gbnVsbCkge1xuICBsb2cuZGVidWcoJ1JldHJpZXZpbmcgcmVxdWVzdGVkIHBlcm1pc3Npb25zJyk7XG4gIGNvbnN0IHN0ZG91dCA9IGNtZE91dHB1dCB8fCBhd2FpdCB0aGlzLnNoZWxsKFsnZHVtcHN5cycsICdwYWNrYWdlJywgcGtnXSk7XG4gIHJldHVybiBleHRyYWN0TWF0Y2hpbmdQZXJtaXNzaW9ucyhzdGRvdXQsIFsncmVxdWVzdGVkJ10pO1xufTtcblxuLyoqXG4gKiBSZXRyaWV2ZSB0aGUgbGlzdCBvZiBsb2NhdGlvbiBwcm92aWRlcnMgZm9yIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcmV0dXJuIHtBcnJheS48U3RyaW5nPn0gVGhlIGxpc3Qgb2YgYXZhaWxhYmxlIGxvY2F0aW9uIHByb3ZpZGVycyBvciBhbiBlbXB0eSBsaXN0LlxuICovXG5tZXRob2RzLmdldExvY2F0aW9uUHJvdmlkZXJzID0gYXN5bmMgZnVuY3Rpb24gKCkge1xuICBsZXQgc3Rkb3V0ID0gYXdhaXQgdGhpcy5nZXRTZXR0aW5nKCdzZWN1cmUnLCAnbG9jYXRpb25fcHJvdmlkZXJzX2FsbG93ZWQnKTtcbiAgcmV0dXJuIHN0ZG91dC50cmltKCkuc3BsaXQoJywnKVxuICAgIC5tYXAoKHApID0+IHAudHJpbSgpKVxuICAgIC5maWx0ZXIoQm9vbGVhbik7XG59O1xuXG4vKipcbiAqIFRvZ2dsZSB0aGUgc3RhdGUgb2YgR1BTIGxvY2F0aW9uIHByb3ZpZGVyLlxuICpcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gZW5hYmxlZCAtIFdoZXRoZXIgdG8gZW5hYmxlICh0cnVlKSBvciBkaXNhYmxlIChmYWxzZSkgdGhlIEdQUyBwcm92aWRlci5cbiAqL1xubWV0aG9kcy50b2dnbGVHUFNMb2NhdGlvblByb3ZpZGVyID0gYXN5bmMgZnVuY3Rpb24gKGVuYWJsZWQpIHtcbiAgYXdhaXQgdGhpcy5zZXRTZXR0aW5nKCdzZWN1cmUnLCAnbG9jYXRpb25fcHJvdmlkZXJzX2FsbG93ZWQnLCBgJHtlbmFibGVkID8gXCIrXCIgOiBcIi1cIn1ncHNgKTtcbn07XG5cbi8qKlxuICogU2V0IGhpZGRlbiBhcGkgcG9saWN5IHRvIG1hbmFnZSBhY2Nlc3MgdG8gbm9uLVNESyBBUElzLlxuICogaHR0cHM6Ly9kZXZlbG9wZXIuYW5kcm9pZC5jb20vcHJldmlldy9yZXN0cmljdGlvbnMtbm9uLXNkay1pbnRlcmZhY2VzXG4gKlxuICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfSB2YWx1ZSAtIFRoZSBBUEkgZW5mb3JjZW1lbnQgcG9saWN5LlxuICogICAgIDA6IERpc2FibGUgbm9uLVNESyBBUEkgdXNhZ2UgZGV0ZWN0aW9uLiBUaGlzIHdpbGwgYWxzbyBkaXNhYmxlIGxvZ2dpbmcsIGFuZCBhbHNvIGJyZWFrIHRoZSBzdHJpY3QgbW9kZSBBUEksXG4gKiAgICAgICAgZGV0ZWN0Tm9uU2RrQXBpVXNhZ2UoKS4gTm90IHJlY29tbWVuZGVkLlxuICogICAgIDE6IFwiSnVzdCB3YXJuXCIgLSBwZXJtaXQgYWNjZXNzIHRvIGFsbCBub24tU0RLIEFQSXMsIGJ1dCBrZWVwIHdhcm5pbmdzIGluIHRoZSBsb2cuXG4gKiAgICAgICAgVGhlIHN0cmljdCBtb2RlIEFQSSB3aWxsIGtlZXAgd29ya2luZy5cbiAqICAgICAyOiBEaXNhbGxvdyB1c2FnZSBvZiBkYXJrIGdyZXkgYW5kIGJsYWNrIGxpc3RlZCBBUElzLlxuICogICAgIDM6IERpc2FsbG93IHVzYWdlIG9mIGJsYWNrbGlzdGVkIEFQSXMsIGJ1dCBhbGxvdyB1c2FnZSBvZiBkYXJrIGdyZXkgbGlzdGVkIEFQSXMuXG4gKi9cbm1ldGhvZHMuc2V0SGlkZGVuQXBpUG9saWN5ID0gYXN5bmMgZnVuY3Rpb24gKHZhbHVlKSB7XG4gIGF3YWl0IHRoaXMuc2V0U2V0dGluZygnZ2xvYmFsJywgJ2hpZGRlbl9hcGlfcG9saWN5X3ByZV9wX2FwcHMnLCB2YWx1ZSk7XG4gIGF3YWl0IHRoaXMuc2V0U2V0dGluZygnZ2xvYmFsJywgJ2hpZGRlbl9hcGlfcG9saWN5X3BfYXBwcycsIHZhbHVlKTtcbn07XG5cbi8qKlxuICogUmVzZXQgYWNjZXNzIHRvIG5vbi1TREsgQVBJcyB0byBpdHMgZGVmYXVsdCBzZXR0aW5nLlxuICogaHR0cHM6Ly9kZXZlbG9wZXIuYW5kcm9pZC5jb20vcHJldmlldy9yZXN0cmljdGlvbnMtbm9uLXNkay1pbnRlcmZhY2VzXG4gKi9cbm1ldGhvZHMuc2V0RGVmYXVsdEhpZGRlbkFwaVBvbGljeSA9IGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgYXdhaXQgdGhpcy5zaGVsbChbJ3NldHRpbmdzJywgJ2RlbGV0ZScsICdnbG9iYWwnLCAnaGlkZGVuX2FwaV9wb2xpY3lfcHJlX3BfYXBwcyddKTtcbiAgYXdhaXQgdGhpcy5zaGVsbChbJ3NldHRpbmdzJywgJ2RlbGV0ZScsICdnbG9iYWwnLCAnaGlkZGVuX2FwaV9wb2xpY3lfcF9hcHBzJ10pO1xufTtcblxuLyoqXG4gKiBTdG9wIHRoZSBwYXJ0aWN1bGFyIHBhY2thZ2UgaWYgaXQgaXMgcnVubmluZyBhbmQgY2xlYXJzIGl0cyBhcHBsaWNhdGlvbiBkYXRhLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwa2cgLSBUaGUgcGFja2FnZSBuYW1lIHRvIGJlIHByb2Nlc3NlZC5cbiAqL1xubWV0aG9kcy5zdG9wQW5kQ2xlYXIgPSBhc3luYyBmdW5jdGlvbiAocGtnKSB7XG4gIHRyeSB7XG4gICAgYXdhaXQgdGhpcy5mb3JjZVN0b3AocGtnKTtcbiAgICBhd2FpdCB0aGlzLmNsZWFyKHBrZyk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBzdG9wIGFuZCBjbGVhciAke3BrZ30uIE9yaWdpbmFsIGVycm9yOiAke2UubWVzc2FnZX1gKTtcbiAgfVxufTtcblxuLyoqXG4gKiBSZXRyaWV2ZSB0aGUgbGlzdCBvZiBhdmFpbGFibGUgaW5wdXQgbWV0aG9kcyAoSU1FcykgZm9yIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcmV0dXJuIHtBcnJheS48U3RyaW5nPn0gVGhlIGxpc3Qgb2YgSU1FIG5hbWVzIG9yIGFuIGVtcHR5IGxpc3QuXG4gKi9cbm1ldGhvZHMuYXZhaWxhYmxlSU1FcyA9IGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gZ2V0SU1FTGlzdEZyb21PdXRwdXQoYXdhaXQgdGhpcy5zaGVsbChbJ2ltZScsICdsaXN0JywgJy1hJ10pKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgZ2V0dGluZyBhdmFpbGFibGUgSU1FJ3MuIE9yaWdpbmFsIGVycm9yOiAke2UubWVzc2FnZX1gKTtcbiAgfVxufTtcblxuLyoqXG4gKiBSZXRyaWV2ZSB0aGUgbGlzdCBvZiBlbmFibGVkIGlucHV0IG1ldGhvZHMgKElNRXMpIGZvciB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHJldHVybiB7QXJyYXkuPFN0cmluZz59IFRoZSBsaXN0IG9mIGVuYWJsZWQgSU1FIG5hbWVzIG9yIGFuIGVtcHR5IGxpc3QuXG4gKi9cbm1ldGhvZHMuZW5hYmxlZElNRXMgPSBhc3luYyBmdW5jdGlvbiAoKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGdldElNRUxpc3RGcm9tT3V0cHV0KGF3YWl0IHRoaXMuc2hlbGwoWydpbWUnLCAnbGlzdCddKSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGdldHRpbmcgZW5hYmxlZCBJTUUncy4gT3JpZ2luYWwgZXJyb3I6ICR7ZS5tZXNzYWdlfWApO1xuICB9XG59O1xuXG4vKipcbiAqIEVuYWJsZSB0aGUgcGFydGljdWxhciBpbnB1dCBtZXRob2Qgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBpbWVJZCAtIE9uZSBvZiBleGlzdGluZyBJTUUgaWRzLlxuICovXG5tZXRob2RzLmVuYWJsZUlNRSA9IGFzeW5jIGZ1bmN0aW9uIChpbWVJZCkge1xuICBhd2FpdCB0aGlzLnNoZWxsKFsnaW1lJywgJ2VuYWJsZScsIGltZUlkXSk7XG59O1xuXG4vKipcbiAqIERpc2FibGUgdGhlIHBhcnRpY3VsYXIgaW5wdXQgbWV0aG9kIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gaW1lSWQgLSBPbmUgb2YgZXhpc3RpbmcgSU1FIGlkcy5cbiAqL1xubWV0aG9kcy5kaXNhYmxlSU1FID0gYXN5bmMgZnVuY3Rpb24gKGltZUlkKSB7XG4gIGF3YWl0IHRoaXMuc2hlbGwoWydpbWUnLCAnZGlzYWJsZScsIGltZUlkXSk7XG59O1xuXG4vKipcbiAqIFNldCB0aGUgcGFydGljdWxhciBpbnB1dCBtZXRob2Qgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBpbWVJZCAtIE9uZSBvZiBleGlzdGluZyBJTUUgaWRzLlxuICovXG5tZXRob2RzLnNldElNRSA9IGFzeW5jIGZ1bmN0aW9uIChpbWVJZCkge1xuICBhd2FpdCB0aGlzLnNoZWxsKFsnaW1lJywgJ3NldCcsIGltZUlkXSk7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgZGVmYXVsdCBpbnB1dCBtZXRob2Qgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIG5hbWUgb2YgdGhlIGRlZmF1bHQgaW5wdXQgbWV0aG9kLlxuICovXG5tZXRob2RzLmRlZmF1bHRJTUUgPSBhc3luYyBmdW5jdGlvbiAoKSB7XG4gIHRyeSB7XG4gICAgbGV0IGVuZ2luZSA9IGF3YWl0IHRoaXMuZ2V0U2V0dGluZygnc2VjdXJlJywgJ2RlZmF1bHRfaW5wdXRfbWV0aG9kJyk7XG4gICAgcmV0dXJuIGVuZ2luZS50cmltKCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGdldHRpbmcgZGVmYXVsdCBJTUUuIE9yaWdpbmFsIGVycm9yOiAke2UubWVzc2FnZX1gKTtcbiAgfVxufTtcblxuLyoqXG4gKiBTZW5kIHRoZSBwYXJ0aWN1bGFyIGtleWNvZGUgdG8gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0ga2V5Y29kZSAtIFRoZSBhY3R1YWwga2V5IGNvZGUgdG8gYmUgc2VudC5cbiAqL1xubWV0aG9kcy5rZXlldmVudCA9IGFzeW5jIGZ1bmN0aW9uIChrZXljb2RlKSB7XG4gIC8vIGtleWNvZGUgbXVzdCBiZSBhbiBpbnQuXG4gIGxldCBjb2RlID0gcGFyc2VJbnQoa2V5Y29kZSwgMTApO1xuICBhd2FpdCB0aGlzLnNoZWxsKFsnaW5wdXQnLCAna2V5ZXZlbnQnLCBjb2RlXSk7XG59O1xuXG4vKipcbiAqIFNlbmQgdGhlIHBhcnRpY3VsYXIgdGV4dCB0byB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSBUaGUgYWN0dWFsIHRleHQgdG8gYmUgc2VudC5cbiAqL1xubWV0aG9kcy5pbnB1dFRleHQgPSBhc3luYyBmdW5jdGlvbiAodGV4dCkge1xuICAvKiBlc2xpbnQtZGlzYWJsZSBuby11c2VsZXNzLWVzY2FwZSAqL1xuICAvLyBuZWVkIHRvIGVzY2FwZSB3aGl0ZXNwYWNlIGFuZCAoICkgPCA+IHwgOyAmICogXFwgfiBcIiAnXG4gIHRleHQgPSB0ZXh0XG4gICAgICAgICAgLnJlcGxhY2UoL1xcXFwvZywgJ1xcXFxcXFxcJylcbiAgICAgICAgICAucmVwbGFjZSgvXFwoL2csICdcXCgnKVxuICAgICAgICAgIC5yZXBsYWNlKC9cXCkvZywgJ1xcKScpXG4gICAgICAgICAgLnJlcGxhY2UoLzwvZywgJ1xcPCcpXG4gICAgICAgICAgLnJlcGxhY2UoLz4vZywgJ1xcPicpXG4gICAgICAgICAgLnJlcGxhY2UoL1xcfC9nLCAnXFx8JylcbiAgICAgICAgICAucmVwbGFjZSgvOy9nLCAnXFw7JylcbiAgICAgICAgICAucmVwbGFjZSgvJi9nLCAnXFwmJylcbiAgICAgICAgICAucmVwbGFjZSgvXFwqL2csICdcXConKVxuICAgICAgICAgIC5yZXBsYWNlKC9+L2csICdcXH4nKVxuICAgICAgICAgIC5yZXBsYWNlKC9cIi9nLCAnXFxcIicpXG4gICAgICAgICAgLnJlcGxhY2UoLycvZywgXCJcXCdcIilcbiAgICAgICAgICAucmVwbGFjZSgvIC9nLCAnJXMnKTtcbiAgLyogZXNsaW50LWRpc2FibGUgbm8tdXNlbGVzcy1lc2NhcGUgKi9cbiAgYXdhaXQgdGhpcy5zaGVsbChbJ2lucHV0JywgJ3RleHQnLCB0ZXh0XSk7XG59O1xuXG4vKipcbiAqIENsZWFyIHRoZSBhY3RpdmUgdGV4dCBmaWVsZCBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QgYnkgc2VuZGluZ1xuICogc3BlY2lhbCBrZXlldmVudHMgdG8gaXQuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGxlbmd0aCBbMTAwXSAtIFRoZSBtYXhpbXVtIGxlbmd0aCBvZiB0aGUgdGV4dCBpbiB0aGUgZmllbGQgdG8gYmUgY2xlYXJlZC5cbiAqL1xubWV0aG9kcy5jbGVhclRleHRGaWVsZCA9IGFzeW5jIGZ1bmN0aW9uIChsZW5ndGggPSAxMDApIHtcbiAgLy8gYXNzdW1lcyB0aGF0IHRoZSBFZGl0VGV4dCBmaWVsZCBhbHJlYWR5IGhhcyBmb2N1c1xuICBsb2cuZGVidWcoYENsZWFyaW5nIHVwIHRvICR7bGVuZ3RofSBjaGFyYWN0ZXJzYCk7XG4gIGlmIChsZW5ndGggPT09IDApIHtcbiAgICByZXR1cm47XG4gIH1cbiAgbGV0IGFyZ3MgPSBbJ2lucHV0JywgJ2tleWV2ZW50J107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAvLyB3ZSBjYW5ub3Qga25vdyB3aGVyZSB0aGUgY3Vyc29yIGlzIGluIHRoZSB0ZXh0IGZpZWxkLCBzbyBkZWxldGUgYm90aCBiZWZvcmVcbiAgICAvLyBhbmQgYWZ0ZXIgc28gdGhhdCB3ZSBnZXQgcmlkIG9mIGV2ZXJ5dGhpbmdcbiAgICAvLyBodHRwczovL2RldmVsb3Blci5hbmRyb2lkLmNvbS9yZWZlcmVuY2UvYW5kcm9pZC92aWV3L0tleUV2ZW50Lmh0bWwjS0VZQ09ERV9ERUxcbiAgICAvLyBodHRwczovL2RldmVsb3Blci5hbmRyb2lkLmNvbS9yZWZlcmVuY2UvYW5kcm9pZC92aWV3L0tleUV2ZW50Lmh0bWwjS0VZQ09ERV9GT1JXQVJEX0RFTFxuICAgIGFyZ3MucHVzaCgnNjcnLCAnMTEyJyk7XG4gIH1cbiAgYXdhaXQgdGhpcy5zaGVsbChhcmdzKTtcbn07XG5cbi8qKlxuICogU2VuZCB0aGUgc3BlY2lhbCBrZXljb2RlIHRvIHRoZSBkZXZpY2UgdW5kZXIgdGVzdCBpbiBvcmRlciB0byBsb2NrIGl0LlxuICovXG5tZXRob2RzLmxvY2sgPSBhc3luYyBmdW5jdGlvbiAoKSB7XG4gIGlmIChhd2FpdCB0aGlzLmlzU2NyZWVuTG9ja2VkKCkpIHtcbiAgICBsb2cuZGVidWcoXCJTY3JlZW4gaXMgYWxyZWFkeSBsb2NrZWQuIERvaW5nIG5vdGhpbmcuXCIpO1xuICAgIHJldHVybjtcbiAgfVxuICBsb2cuZGVidWcoXCJQcmVzc2luZyB0aGUgS0VZQ09ERV9QT1dFUiBidXR0b24gdG8gbG9jayBzY3JlZW5cIik7XG4gIGF3YWl0IHRoaXMua2V5ZXZlbnQoMjYpO1xuXG4gIGNvbnN0IHRpbWVvdXRNcyA9IDUwMDA7XG4gIHRyeSB7XG4gICAgYXdhaXQgd2FpdEZvckNvbmRpdGlvbihhc3luYyAoKSA9PiBhd2FpdCB0aGlzLmlzU2NyZWVuTG9ja2VkKCksIHtcbiAgICAgIHdhaXRNczogdGltZW91dE1zLFxuICAgICAgaW50ZXJ2YWxNczogNTAwLFxuICAgIH0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgZGV2aWNlIHNjcmVlbiBpcyBzdGlsbCBsb2NrZWQgYWZ0ZXIgJHt0aW1lb3V0TXN9bXMgdGltZW91dGApO1xuICB9XG59O1xuXG4vKipcbiAqIFNlbmQgdGhlIHNwZWNpYWwga2V5Y29kZSB0byB0aGUgZGV2aWNlIHVuZGVyIHRlc3QgaW4gb3JkZXIgdG8gZW11bGF0ZVxuICogQmFjayBidXR0b24gdGFwLlxuICovXG5tZXRob2RzLmJhY2sgPSBhc3luYyBmdW5jdGlvbiAoKSB7XG4gIGxvZy5kZWJ1ZyhcIlByZXNzaW5nIHRoZSBCQUNLIGJ1dHRvblwiKTtcbiAgYXdhaXQgdGhpcy5rZXlldmVudCg0KTtcbn07XG5cbi8qKlxuICogU2VuZCB0aGUgc3BlY2lhbCBrZXljb2RlIHRvIHRoZSBkZXZpY2UgdW5kZXIgdGVzdCBpbiBvcmRlciB0byBlbXVsYXRlXG4gKiBIb21lIGJ1dHRvbiB0YXAuXG4gKi9cbm1ldGhvZHMuZ29Ub0hvbWUgPSBhc3luYyBmdW5jdGlvbiAoKSB7XG4gIGxvZy5kZWJ1ZyhcIlByZXNzaW5nIHRoZSBIT01FIGJ1dHRvblwiKTtcbiAgYXdhaXQgdGhpcy5rZXlldmVudCgzKTtcbn07XG5cbi8qKlxuICogQHJldHVybiB7c3RyaW5nfSB0aGUgYWN0dWFsIHBhdGggdG8gYWRiIGV4ZWN1dGFibGUuXG4gKi9cbm1ldGhvZHMuZ2V0QWRiUGF0aCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMuZXhlY3V0YWJsZS5wYXRoO1xufTtcblxuLyoqXG4gKiBSZXRyaWV2ZSBjdXJyZW50IHNjcmVlbiBvcmllbnRhdGlvbiBvZiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgY3VycmVudCBvcmllbnRhdGlvbiBlbmNvZGVkIGFzIGFuIGludGVnZXIgbnVtYmVyLlxuICovXG5tZXRob2RzLmdldFNjcmVlbk9yaWVudGF0aW9uID0gYXN5bmMgZnVuY3Rpb24gKCkge1xuICBsZXQgc3Rkb3V0ID0gYXdhaXQgdGhpcy5zaGVsbChbJ2R1bXBzeXMnLCAnaW5wdXQnXSk7XG4gIHJldHVybiBnZXRTdXJmYWNlT3JpZW50YXRpb24oc3Rkb3V0KTtcbn07XG5cbi8qKlxuICogUmV0cmlldmUgdGhlIHNjcmVlbiBsb2NrIHN0YXRlIG9mIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBkZXZpY2UgaXMgbG9ja2VkLlxuICovXG5tZXRob2RzLmlzU2NyZWVuTG9ja2VkID0gYXN5bmMgZnVuY3Rpb24gKCkge1xuICBsZXQgc3Rkb3V0ID0gYXdhaXQgdGhpcy5zaGVsbChbJ2R1bXBzeXMnLCAnd2luZG93J10pO1xuICBpZiAocHJvY2Vzcy5lbnYuQVBQSVVNX0xPR19EVU1QU1lTKSB7XG4gICAgLy8gb3B0aW9uYWwgZGVidWdnaW5nXG4gICAgLy8gaWYgdGhlIG1ldGhvZCBpcyBub3Qgd29ya2luZywgdHVybiBpdCBvbiBhbmQgc2VuZCB1cyB0aGUgb3V0cHV0XG4gICAgbGV0IGR1bXBzeXNGaWxlID0gcGF0aC5yZXNvbHZlKHByb2Nlc3MuY3dkKCksIFwiZHVtcHN5cy5sb2dcIik7XG4gICAgbG9nLmRlYnVnKGBXcml0aW5nIGR1bXBzeXMgb3V0cHV0IHRvICR7ZHVtcHN5c0ZpbGV9YCk7XG4gICAgYXdhaXQgZnMud3JpdGVGaWxlKGR1bXBzeXNGaWxlLCBzdGRvdXQpO1xuICB9XG4gIHJldHVybiAoaXNTaG93aW5nTG9ja3NjcmVlbihzdGRvdXQpIHx8IGlzQ3VycmVudEZvY3VzT25LZXlndWFyZChzdGRvdXQpIHx8XG4gICAgICAgICAgIWlzU2NyZWVuT25GdWxseShzdGRvdXQpKTtcbn07XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gS2V5Ym9hcmRTdGF0ZVxuICogQHByb3BlcnR5IHtib29sZWFufSBpc0tleWJvYXJkU2hvd24gLSBXaGV0aGVyIHNvZnQga2V5Ym9hcmQgaXMgY3VycmVudGx5IHZpc2libGUuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGNhbkNsb3NlS2V5Ym9hcmQgLSBXaGV0aGVyIHRoZSBrZXlib2FyZCBjYW4gYmUgY2xvc2VkLlxuICovXG5cbi8qKlxuICogUmV0cmlldmUgdGhlIHN0YXRlIG9mIHRoZSBzb2Z0d2FyZSBrZXlib2FyZCBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHJldHVybiB7S2V5Ym9hcmRTdGF0ZX0gVGhlIGtleWJvYXJkIHN0YXRlLlxuICovXG5tZXRob2RzLmlzU29mdEtleWJvYXJkUHJlc2VudCA9IGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzdGRvdXQgPSBhd2FpdCB0aGlzLnNoZWxsKFsnZHVtcHN5cycsICdpbnB1dF9tZXRob2QnXSk7XG4gICAgY29uc3QgaW5wdXRTaG93bk1hdGNoID0gL21JbnB1dFNob3duPShcXHcrKS8uZXhlYyhzdGRvdXQpO1xuICAgIGNvbnN0IGlucHV0Vmlld1Nob3duTWF0Y2ggPSAvbUlzSW5wdXRWaWV3U2hvd249KFxcdyspLy5leGVjKHN0ZG91dCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlzS2V5Ym9hcmRTaG93bjogISEoaW5wdXRTaG93bk1hdGNoICYmIGlucHV0U2hvd25NYXRjaFsxXSA9PT0gJ3RydWUnKSxcbiAgICAgIGNhbkNsb3NlS2V5Ym9hcmQ6ICEhKGlucHV0Vmlld1Nob3duTWF0Y2ggJiYgaW5wdXRWaWV3U2hvd25NYXRjaFsxXSA9PT0gJ3RydWUnKSxcbiAgICB9O1xuICB9IGNhdGNoIChlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvciBmaW5kaW5nIHNvZnRrZXlib2FyZC4gT3JpZ2luYWwgZXJyb3I6ICR7ZS5tZXNzYWdlfWApO1xuICB9XG59O1xuXG4vKipcbiAqIFNlbmQgYW4gYXJiaXRyYXJ5IFRlbG5ldCBjb21tYW5kIHRvIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gY29tbWFuZCAtIFRoZSBjb21tYW5kIHRvIGJlIHNlbnQuXG4gKlxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgYWN0dWFsIG91dHB1dCBvZiB0aGUgZ2l2ZW4gY29tbWFuZC5cbiAqL1xubWV0aG9kcy5zZW5kVGVsbmV0Q29tbWFuZCA9IGFzeW5jIGZ1bmN0aW9uIChjb21tYW5kKSB7XG4gIGxvZy5kZWJ1ZyhgU2VuZGluZyB0ZWxuZXQgY29tbWFuZCB0byBkZXZpY2U6ICR7Y29tbWFuZH1gKTtcbiAgbGV0IHBvcnQgPSBhd2FpdCB0aGlzLmdldEVtdWxhdG9yUG9ydCgpO1xuICByZXR1cm4gYXdhaXQgbmV3IEIoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGxldCBjb25uID0gbmV0LmNyZWF0ZUNvbm5lY3Rpb24ocG9ydCwgJ2xvY2FsaG9zdCcpLFxuICAgICAgICBjb25uZWN0ZWQgPSBmYWxzZSxcbiAgICAgICAgcmVhZHlSZWdleCA9IC9eT0skL20sXG4gICAgICAgIGRhdGFTdHJlYW0gPSBcIlwiLFxuICAgICAgICByZXMgPSBudWxsO1xuICAgIGNvbm4ub24oJ2Nvbm5lY3QnLCAoKSA9PiB7XG4gICAgICBsb2cuZGVidWcoXCJTb2NrZXQgY29ubmVjdGlvbiB0byBkZXZpY2UgY3JlYXRlZFwiKTtcbiAgICB9KTtcbiAgICBjb25uLm9uKCdkYXRhJywgKGRhdGEpID0+IHtcbiAgICAgIGRhdGEgPSBkYXRhLnRvU3RyaW5nKCd1dGY4Jyk7XG4gICAgICBpZiAoIWNvbm5lY3RlZCkge1xuICAgICAgICBpZiAocmVhZHlSZWdleC50ZXN0KGRhdGEpKSB7XG4gICAgICAgICAgY29ubmVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICBsb2cuZGVidWcoXCJTb2NrZXQgY29ubmVjdGlvbiB0byBkZXZpY2UgcmVhZHlcIik7XG4gICAgICAgICAgY29ubi53cml0ZShgJHtjb21tYW5kfVxcbmApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkYXRhU3RyZWFtICs9IGRhdGE7XG4gICAgICAgIGlmIChyZWFkeVJlZ2V4LnRlc3QoZGF0YSkpIHtcbiAgICAgICAgICByZXMgPSBkYXRhU3RyZWFtLnJlcGxhY2UocmVhZHlSZWdleCwgXCJcIikudHJpbSgpO1xuICAgICAgICAgIHJlcyA9IF8ubGFzdChyZXMudHJpbSgpLnNwbGl0KCdcXG4nKSk7XG4gICAgICAgICAgbG9nLmRlYnVnKGBUZWxuZXQgY29tbWFuZCBnb3QgcmVzcG9uc2U6ICR7cmVzfWApO1xuICAgICAgICAgIGNvbm4ud3JpdGUoXCJxdWl0XFxuXCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgY29ubi5vbignZXJyb3InLCAoZXJyKSA9PiB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgcHJvbWlzZS9wcmVmZXItYXdhaXQtdG8tY2FsbGJhY2tzXG4gICAgICBsb2cuZGVidWcoYFRlbG5ldCBjb21tYW5kIGVycm9yOiAke2Vyci5tZXNzYWdlfWApO1xuICAgICAgcmVqZWN0KGVycik7XG4gICAgfSk7XG4gICAgY29ubi5vbignY2xvc2UnLCAoKSA9PiB7XG4gICAgICBpZiAocmVzID09PSBudWxsKSB7XG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJOZXZlciBnb3QgYSByZXNwb25zZSBmcm9tIGNvbW1hbmRcIikpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzb2x2ZShyZXMpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn07XG5cbi8qKlxuICogQ2hlY2sgdGhlIHN0YXRlIG9mIEFpcnBsYW5lIG1vZGUgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgQWlycGxhbmUgbW9kZSBpcyBlbmFibGVkLlxuICovXG5tZXRob2RzLmlzQWlycGxhbmVNb2RlT24gPSBhc3luYyBmdW5jdGlvbiAoKSB7XG4gIGxldCBzdGRvdXQgPSBhd2FpdCB0aGlzLmdldFNldHRpbmcoJ2dsb2JhbCcsICdhaXJwbGFuZV9tb2RlX29uJyk7XG4gIHJldHVybiBwYXJzZUludChzdGRvdXQsIDEwKSAhPT0gMDtcbn07XG5cbi8qKlxuICogQ2hhbmdlIHRoZSBzdGF0ZSBvZiBBaXJwbGFuZSBtb2RlIGluIFNldHRpbmdzIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcGFyYW0ge2Jvb2xlYW59IG9uIC0gVHJ1ZSB0byBlbmFibGUgdGhlIEFpcnBsYW5lIG1vZGUgaW4gU2V0dGluZ3MgYW5kIGZhbHNlIHRvIGRpc2FibGUgaXQuXG4gKi9cbm1ldGhvZHMuc2V0QWlycGxhbmVNb2RlID0gYXN5bmMgZnVuY3Rpb24gKG9uKSB7XG4gIGF3YWl0IHRoaXMuc2V0U2V0dGluZygnZ2xvYmFsJywgJ2FpcnBsYW5lX21vZGVfb24nLCBvbiA/IDEgOiAwKTtcbn07XG5cbi8qKlxuICogQnJvYWRjYXN0IHRoZSBzdGF0ZSBvZiBBaXJwbGFuZSBtb2RlIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqIFRoaXMgbWV0aG9kIHNob3VsZCBiZSBjYWxsZWQgYWZ0ZXIge0BsaW5rICNzZXRBaXJwbGFuZU1vZGV9LCBvdGhlcndpc2VcbiAqIHRoZSBtb2RlIGNoYW5nZSBpcyBub3QgZ29pbmcgdG8gYmUgYXBwbGllZCBmb3IgdGhlIGRldmljZS5cbiAqXG4gKiBAcGFyYW0ge2Jvb2xlYW59IG9uIC0gVHJ1ZSB0byBicm9hZGNhc3QgZW5hYmxlIGFuZCBmYWxzZSB0byBicm9hZGNhc3QgZGlzYWJsZS5cbiAqL1xubWV0aG9kcy5icm9hZGNhc3RBaXJwbGFuZU1vZGUgPSBhc3luYyBmdW5jdGlvbiAob24pIHtcbiAgYXdhaXQgdGhpcy5zaGVsbChbXG4gICAgJ2FtJywgJ2Jyb2FkY2FzdCcsXG4gICAgJy1hJywgJ2FuZHJvaWQuaW50ZW50LmFjdGlvbi5BSVJQTEFORV9NT0RFJyxcbiAgICAnLS1leicsICdzdGF0ZScsIG9uID8gJ3RydWUnIDogJ2ZhbHNlJ1xuICBdKTtcbn07XG5cbi8qKlxuICogQ2hlY2sgdGhlIHN0YXRlIG9mIFdpRmkgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgV2lGaSBpcyBlbmFibGVkLlxuICovXG5tZXRob2RzLmlzV2lmaU9uID0gYXN5bmMgZnVuY3Rpb24gKCkge1xuICBsZXQgc3Rkb3V0ID0gYXdhaXQgdGhpcy5nZXRTZXR0aW5nKCdnbG9iYWwnLCAnd2lmaV9vbicpO1xuICByZXR1cm4gKHBhcnNlSW50KHN0ZG91dCwgMTApICE9PSAwKTtcbn07XG5cbi8qKlxuICogQ2hhbmdlIHRoZSBzdGF0ZSBvZiBXaUZpIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcGFyYW0ge2Jvb2xlYW59IG9uIC0gVHJ1ZSB0byBlbmFibGUgYW5kIGZhbHNlIHRvIGRpc2FibGUgaXQuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzRW11bGF0b3IgW2ZhbHNlXSAtIFNldCBpdCB0byB0cnVlIGlmIHRoZSBkZXZpY2UgdW5kZXIgdGVzdFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpcyBhbiBlbXVsYXRvciByYXRoZXIgdGhhbiBhIHJlYWwgZGV2aWNlLlxuICovXG5tZXRob2RzLnNldFdpZmlTdGF0ZSA9IGFzeW5jIGZ1bmN0aW9uIChvbiwgaXNFbXVsYXRvciA9IGZhbHNlKSB7XG4gIGlmIChpc0VtdWxhdG9yKSB7XG4gICAgYXdhaXQgdGhpcy5zaGVsbChbJ3N2YycsICd3aWZpJywgb24gPyAnZW5hYmxlJyA6ICdkaXNhYmxlJ10sIHtcbiAgICAgIHByaXZpbGVnZWQ6IHRydWUsXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgYXdhaXQgdGhpcy5zaGVsbChbXG4gICAgICAnYW0nLCAnYnJvYWRjYXN0JyxcbiAgICAgICctYScsIFdJRklfQ09OTkVDVElPTl9TRVRUSU5HX0FDVElPTixcbiAgICAgICctbicsIFdJRklfQ09OTkVDVElPTl9TRVRUSU5HX1JFQ0VJVkVSLFxuICAgICAgJy0tZXMnLCAnc2V0c3RhdHVzJywgb24gPyAnZW5hYmxlJyA6ICdkaXNhYmxlJ1xuICAgIF0pO1xuICB9XG59O1xuXG4vKipcbiAqIENoZWNrIHRoZSBzdGF0ZSBvZiBEYXRhIHRyYW5zZmVyIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIERhdGEgdHJhbnNmZXIgaXMgZW5hYmxlZC5cbiAqL1xubWV0aG9kcy5pc0RhdGFPbiA9IGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgbGV0IHN0ZG91dCA9IGF3YWl0IHRoaXMuZ2V0U2V0dGluZygnZ2xvYmFsJywgJ21vYmlsZV9kYXRhJyk7XG4gIHJldHVybiAocGFyc2VJbnQoc3Rkb3V0LCAxMCkgIT09IDApO1xufTtcblxuLyoqXG4gKiBDaGFuZ2UgdGhlIHN0YXRlIG9mIERhdGEgdHJhbnNmZXIgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gb24gLSBUcnVlIHRvIGVuYWJsZSBhbmQgZmFsc2UgdG8gZGlzYWJsZSBpdC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNFbXVsYXRvciBbZmFsc2VdIC0gU2V0IGl0IHRvIHRydWUgaWYgdGhlIGRldmljZSB1bmRlciB0ZXN0XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzIGFuIGVtdWxhdG9yIHJhdGhlciB0aGFuIGEgcmVhbCBkZXZpY2UuXG4gKi9cbm1ldGhvZHMuc2V0RGF0YVN0YXRlID0gYXN5bmMgZnVuY3Rpb24gKG9uLCBpc0VtdWxhdG9yID0gZmFsc2UpIHtcbiAgaWYgKGlzRW11bGF0b3IpIHtcbiAgICBhd2FpdCB0aGlzLnNoZWxsKFsnc3ZjJywgJ2RhdGEnLCBvbiA/ICdlbmFibGUnIDogJ2Rpc2FibGUnXSwge1xuICAgICAgcHJpdmlsZWdlZDogdHJ1ZSxcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBhd2FpdCB0aGlzLnNoZWxsKFtcbiAgICAgICdhbScsICdicm9hZGNhc3QnLFxuICAgICAgJy1hJywgREFUQV9DT05ORUNUSU9OX1NFVFRJTkdfQUNUSU9OLFxuICAgICAgJy1uJywgREFUQV9DT05ORUNUSU9OX1NFVFRJTkdfUkVDRUlWRVIsXG4gICAgICAnLS1lcycsICdzZXRzdGF0dXMnLCBvbiA/ICdlbmFibGUnIDogJ2Rpc2FibGUnXG4gICAgXSk7XG4gIH1cbn07XG5cbi8qKlxuICogQ2hhbmdlIHRoZSBzdGF0ZSBvZiBXaUZpIGFuZC9vciBEYXRhIHRyYW5zZmVyIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHdpZmkgLSBUcnVlIHRvIGVuYWJsZSBhbmQgZmFsc2UgdG8gZGlzYWJsZSBXaUZpLlxuICogQHBhcmFtIHtib29sZWFufSBkYXRhIC0gVHJ1ZSB0byBlbmFibGUgYW5kIGZhbHNlIHRvIGRpc2FibGUgRGF0YSB0cmFuc2Zlci5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNFbXVsYXRvciBbZmFsc2VdIC0gU2V0IGl0IHRvIHRydWUgaWYgdGhlIGRldmljZSB1bmRlciB0ZXN0XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzIGFuIGVtdWxhdG9yIHJhdGhlciB0aGFuIGEgcmVhbCBkZXZpY2UuXG4gKi9cbm1ldGhvZHMuc2V0V2lmaUFuZERhdGEgPSBhc3luYyBmdW5jdGlvbiAoe3dpZmksIGRhdGF9LCBpc0VtdWxhdG9yID0gZmFsc2UpIHtcbiAgaWYgKHV0aWwuaGFzVmFsdWUod2lmaSkpIHtcbiAgICBhd2FpdCB0aGlzLnNldFdpZmlTdGF0ZSh3aWZpLCBpc0VtdWxhdG9yKTtcbiAgfVxuICBpZiAodXRpbC5oYXNWYWx1ZShkYXRhKSkge1xuICAgIGF3YWl0IHRoaXMuc2V0RGF0YVN0YXRlKGRhdGEsIGlzRW11bGF0b3IpO1xuICB9XG59O1xuXG4vKipcbiAqIENoYW5nZSB0aGUgc3RhdGUgb2YgYW5pbWF0aW9uIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqIEFuaW1hdGlvbiBvbiB0aGUgZGV2aWNlIGlzIGNvbnRyb2xsZWQgYnkgdGhlIGZvbGxvd2luZyBnbG9iYWwgcHJvcGVydGllczpcbiAqIFtBTklNQVRPUl9EVVJBVElPTl9TQ0FMRV17QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIuYW5kcm9pZC5jb20vcmVmZXJlbmNlL2FuZHJvaWQvcHJvdmlkZXIvU2V0dGluZ3MuR2xvYmFsLmh0bWwjQU5JTUFUT1JfRFVSQVRJT05fU0NBTEV9LFxuICogW1RSQU5TSVRJT05fQU5JTUFUSU9OX1NDQUxFXXtAbGluayBodHRwczovL2RldmVsb3Blci5hbmRyb2lkLmNvbS9yZWZlcmVuY2UvYW5kcm9pZC9wcm92aWRlci9TZXR0aW5ncy5HbG9iYWwuaHRtbCNUUkFOU0lUSU9OX0FOSU1BVElPTl9TQ0FMRX0sXG4gKiBbV0lORE9XX0FOSU1BVElPTl9TQ0FMRV17QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIuYW5kcm9pZC5jb20vcmVmZXJlbmNlL2FuZHJvaWQvcHJvdmlkZXIvU2V0dGluZ3MuR2xvYmFsLmh0bWwjV0lORE9XX0FOSU1BVElPTl9TQ0FMRX0uXG4gKiBUaGlzIG1ldGhvZCBzZXRzIGFsbCB0aGlzIHByb3BlcnRpZXMgdG8gMC4wIHRvIGRpc2FibGUgKDEuMCB0byBlbmFibGUpIGFuaW1hdGlvbi5cbiAqXG4gKiBUdXJuaW5nIG9mZiBhbmltYXRpb24gbWlnaHQgYmUgdXNlZnVsIHRvIGltcHJvdmUgc3RhYmlsaXR5XG4gKiBhbmQgcmVkdWNlIHRlc3RzIGV4ZWN1dGlvbiB0aW1lLlxuICpcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gb24gLSBUcnVlIHRvIGVuYWJsZSBhbmQgZmFsc2UgdG8gZGlzYWJsZSBpdC5cbiAqL1xubWV0aG9kcy5zZXRBbmltYXRpb25TdGF0ZSA9IGFzeW5jIGZ1bmN0aW9uIChvbikge1xuICBhd2FpdCB0aGlzLnNoZWxsKFtcbiAgICAnYW0nLCAnYnJvYWRjYXN0JyxcbiAgICAnLWEnLCBBTklNQVRJT05fU0VUVElOR19BQ1RJT04sXG4gICAgJy1uJywgQU5JTUFUSU9OX1NFVFRJTkdfUkVDRUlWRVIsXG4gICAgJy0tZXMnLCAnc2V0c3RhdHVzJywgb24gPyAnZW5hYmxlJyA6ICdkaXNhYmxlJ1xuICBdKTtcbn07XG5cbi8qKlxuICogQ2hlY2sgdGhlIHN0YXRlIG9mIGFuaW1hdGlvbiBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBhdCBsZWFzdCBvbmUgb2YgYW5pbWF0aW9uIHNjYWxlIHNldHRpbmdzXG4gKiAgICAgICAgICAgICAgICAgICBpcyBub3QgZXF1YWwgdG8gJzAuMCcuXG4gKi9cbm1ldGhvZHMuaXNBbmltYXRpb25PbiA9IGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgbGV0IGFuaW1hdG9yX2R1cmF0aW9uX3NjYWxlID0gYXdhaXQgdGhpcy5nZXRTZXR0aW5nKCdnbG9iYWwnLCAnYW5pbWF0b3JfZHVyYXRpb25fc2NhbGUnKTtcbiAgbGV0IHRyYW5zaXRpb25fYW5pbWF0aW9uX3NjYWxlID0gYXdhaXQgdGhpcy5nZXRTZXR0aW5nKCdnbG9iYWwnLCAndHJhbnNpdGlvbl9hbmltYXRpb25fc2NhbGUnKTtcbiAgbGV0IHdpbmRvd19hbmltYXRpb25fc2NhbGUgPSBhd2FpdCB0aGlzLmdldFNldHRpbmcoJ2dsb2JhbCcsICd3aW5kb3dfYW5pbWF0aW9uX3NjYWxlJyk7XG4gIHJldHVybiBfLnNvbWUoW2FuaW1hdG9yX2R1cmF0aW9uX3NjYWxlLCB0cmFuc2l0aW9uX2FuaW1hdGlvbl9zY2FsZSwgd2luZG93X2FuaW1hdGlvbl9zY2FsZV0sXG4gICAgICAgICAgICAgICAgKHNldHRpbmcpID0+IHNldHRpbmcgIT09ICcwLjAnKTtcbn07XG5cbi8qKlxuICogQ2hhbmdlIHRoZSBsb2NhbGUgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LiBEb24ndCBuZWVkIHRvIHJlYm9vdCB0aGUgZGV2aWNlIGFmdGVyIGNoYW5naW5nIHRoZSBsb2NhbGUuXG4gKiBUaGlzIG1ldGhvZCBzZXRzIGFuIGFyYml0cmFyeSBsb2NhbGUgZm9sbG93aW5nOlxuICogICBodHRwczovL2RldmVsb3Blci5hbmRyb2lkLmNvbS9yZWZlcmVuY2UvamF2YS91dGlsL0xvY2FsZS5odG1sXG4gKiAgIGh0dHBzOi8vZGV2ZWxvcGVyLmFuZHJvaWQuY29tL3JlZmVyZW5jZS9qYXZhL3V0aWwvTG9jYWxlLmh0bWwjTG9jYWxlKGphdmEubGFuZy5TdHJpbmcsJTIwamF2YS5sYW5nLlN0cmluZylcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbGFuZ3VhZ2UgLSBMYW5ndWFnZS4gZS5nLiBlbiwgamFcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb3VudHJ5IC0gQ291bnRyeS4gZS5nLiBVUywgSlBcbiAqIEBwYXJhbSB7P3N0cmluZ30gc2NyaXB0IC0gU2NyaXB0LiBlLmcuIEhhbnMgaW4gYHpoLUhhbnMtQ05gXG4gKi9cbm1ldGhvZHMuc2V0RGV2aWNlU3lzTG9jYWxlVmlhU2V0dGluZ0FwcCA9IGFzeW5jIGZ1bmN0aW9uIChsYW5ndWFnZSwgY291bnRyeSwgc2NyaXB0ID0gbnVsbCkge1xuICBjb25zdCBwYXJhbXMgPSBbXG4gICAgJ2FtJywgJ2Jyb2FkY2FzdCcsXG4gICAgJy1hJywgTE9DQUxFX1NFVFRJTkdfQUNUSU9OLFxuICAgICctbicsIExPQ0FMRV9TRVRUSU5HX1JFQ0VJVkVSLFxuICAgICctLWVzJywgJ2xhbmcnLCBsYW5ndWFnZS50b0xvd2VyQ2FzZSgpLFxuICAgICctLWVzJywgJ2NvdW50cnknLCBjb3VudHJ5LnRvVXBwZXJDYXNlKClcbiAgXTtcblxuICBpZiAoc2NyaXB0KSB7XG4gICAgcGFyYW1zLnB1c2goJy0tZXMnLCAnc2NyaXB0Jywgc2NyaXB0KTtcbiAgfVxuXG4gIGF3YWl0IHRoaXMuc2hlbGwocGFyYW1zKTtcbn07XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gTG9jYXRpb25cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfHN0cmluZ30gbG9uZ2l0dWRlIC0gVmFsaWQgbG9uZ2l0dWRlIHZhbHVlLlxuICogQHByb3BlcnR5IHtudW1iZXJ8c3RyaW5nfSBsYXRpdHVkZSAtIFZhbGlkIGxhdGl0dWRlIHZhbHVlLlxuICogQHByb3BlcnR5IHs/bnVtYmVyfHN0cmluZ30gYWx0aXR1ZGUgLSBWYWxpZCBhbHRpdHVkZSB2YWx1ZS5cbiAqL1xuXG4vKipcbiAqIEVtdWxhdGUgZ2VvbG9jYXRpb24gY29vcmRpbmF0ZXMgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEBwYXJhbSB7TG9jYXRpb259IGxvY2F0aW9uIC0gTG9jYXRpb24gb2JqZWN0LiBUaGUgYGFsdGl0dWRlYCB2YWx1ZSBpcyBpZ25vcmVkXG4gKiB3aGlsZSBtb2NraW5nIHRoZSBwb3NpdGlvbi5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNFbXVsYXRvciBbZmFsc2VdIC0gU2V0IGl0IHRvIHRydWUgaWYgdGhlIGRldmljZSB1bmRlciB0ZXN0XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzIGFuIGVtdWxhdG9yIHJhdGhlciB0aGFuIGEgcmVhbCBkZXZpY2UuXG4gKi9cbm1ldGhvZHMuc2V0R2VvTG9jYXRpb24gPSBhc3luYyBmdW5jdGlvbiAobG9jYXRpb24sIGlzRW11bGF0b3IgPSBmYWxzZSkge1xuICBsZXQgbG9uZ2l0dWRlID0gcGFyc2VGbG9hdChsb2NhdGlvbi5sb25naXR1ZGUpO1xuICBpZiAoaXNOYU4obG9uZ2l0dWRlKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgbG9jYXRpb24ubG9uZ2l0dWRlIGlzIGV4cGVjdGVkIHRvIGJlIGEgdmFsaWQgZmxvYXQgbnVtYmVyLiAnJHtsb2NhdGlvbi5sb25naXR1ZGV9JyBpcyBnaXZlbiBpbnN0ZWFkYCk7XG4gIH1cbiAgbG9uZ2l0dWRlID0gYCR7Xy5jZWlsKGxvbmdpdHVkZSwgNSl9YDtcbiAgbGV0IGxhdGl0dWRlID0gcGFyc2VGbG9hdChsb2NhdGlvbi5sYXRpdHVkZSk7XG4gIGlmIChpc05hTihsYXRpdHVkZSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYGxvY2F0aW9uLmxhdGl0dWRlIGlzIGV4cGVjdGVkIHRvIGJlIGEgdmFsaWQgZmxvYXQgbnVtYmVyLiAnJHtsb2NhdGlvbi5sYXRpdHVkZX0nIGlzIGdpdmVuIGluc3RlYWRgKTtcbiAgfVxuICBsYXRpdHVkZSA9IGAke18uY2VpbChsYXRpdHVkZSwgNSl9YDtcbiAgaWYgKGlzRW11bGF0b3IpIHtcbiAgICBhd2FpdCB0aGlzLnJlc2V0VGVsbmV0QXV0aFRva2VuKCk7XG4gICAgYXdhaXQgdGhpcy5hZGJFeGVjKFsnZW11JywgJ2dlbycsICdmaXgnLCBsb25naXR1ZGUsIGxhdGl0dWRlXSk7XG4gICAgLy8gQSB3b3JrYXJvdW5kIGZvciBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2FuZHJvaWQvaXNzdWVzL2RldGFpbD9pZD0yMDYxODBcbiAgICBhd2FpdCB0aGlzLmFkYkV4ZWMoWydlbXUnLCAnZ2VvJywgJ2ZpeCcsIGxvbmdpdHVkZS5yZXBsYWNlKCcuJywgJywnKSwgbGF0aXR1ZGUucmVwbGFjZSgnLicsICcsJyldKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5zaGVsbChbXG4gICAgICAnYW0nLCAnc3RhcnRzZXJ2aWNlJyxcbiAgICAgICctZScsICdsb25naXR1ZGUnLCBsb25naXR1ZGUsXG4gICAgICAnLWUnLCAnbGF0aXR1ZGUnLCBsYXRpdHVkZSxcbiAgICAgIExPQ0FUSU9OX1NFUlZJQ0UsXG4gICAgXSk7XG4gIH1cbn07XG5cbi8qKlxuICogR2V0IHRoZSBjdXJyZW50IGdlbyBsb2NhdGlvbiBmcm9tIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcmV0dXJucyB7TG9jYXRpb259IFRoZSBjdXJyZW50IGxvY2F0aW9uXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIGN1cnJlbnQgbG9jYXRpb24gY2Fubm90IGJlIHJldHJpZXZlZFxuICovXG5tZXRob2RzLmdldEdlb0xvY2F0aW9uID0gYXN5bmMgZnVuY3Rpb24gKCkge1xuICBsZXQgb3V0cHV0O1xuICB0cnkge1xuICAgIG91dHB1dCA9IGF3YWl0IHRoaXMuc2hlbGwoW1xuICAgICAgJ2FtJywgJ2Jyb2FkY2FzdCcsXG4gICAgICAnLW4nLCBMT0NBVElPTl9SRUNFSVZFUixcbiAgICAgICctYScsIExPQ0FUSU9OX1JFVFJJRVZBTF9BQ1RJT04sXG4gICAgXSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHJldHJpZXZlIHRoZSBjdXJyZW50IGdlbyBjb29yZGluYXRlcyBmcm9tIHRoZSBkZXZpY2UuIGAgK1xuICAgICAgYE1ha2Ugc3VyZSB0aGUgQXBwaXVtIFNldHRpbmdzIGFwcGxpY2F0aW9uIGlzIHVwIHRvIGRhdGUgYW5kIGhhcyBsb2NhdGlvbiBwZXJtaXNzaW9ucy4gQWxzbyB0aGUgbG9jYXRpb24gYCArXG4gICAgICBgc2VydmljZXMgbXVzdCBiZSBlbmFibGVkIG9uIHRoZSBkZXZpY2UuIE9yaWdpbmFsIGVycm9yOiAke2Vyci5tZXNzYWdlfWApO1xuICB9XG5cbiAgY29uc3QgbWF0Y2ggPSAvZGF0YT1cIigtP1tcXGRcXC5dKylcXHMrKC0/W1xcZFxcLl0rKVxccysoLT9bXFxkXFwuXSspXCIvLmV4ZWMob3V0cHV0KTtcbiAgaWYgKCFtYXRjaCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHBhcnNlIHRoZSBhY3R1YWwgbG9jYXRpb24gdmFsdWVzIGZyb20gdGhlIGNvbW1hbmQgb3V0cHV0OiAke291dHB1dH1gKTtcbiAgfVxuICBjb25zdCBsb2NhdGlvbiA9IHtcbiAgICBsYXRpdHVkZTogbWF0Y2hbMV0sXG4gICAgbG9uZ2l0dWRlOiBtYXRjaFsyXSxcbiAgICBhbHRpdHVkZTogbWF0Y2hbM10sXG4gIH07XG4gIGxvZy5kZWJ1ZyhgR290IGdlbyBjb29yZGluYXRlczogJHtKU09OLnN0cmluZ2lmeShsb2NhdGlvbil9YCk7XG4gIHJldHVybiBsb2NhdGlvbjtcbn07XG5cbi8qKlxuICogRm9yY2VmdWxseSByZWN1cnNpdmVseSByZW1vdmUgYSBwYXRoIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqIEJlIGNhcmVmdWwgd2hpbGUgY2FsbGluZyB0aGlzIG1ldGhvZC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGF0aCAtIFRoZSBwYXRoIHRvIGJlIHJlbW92ZWQgcmVjdXJzaXZlbHkuXG4gKi9cbm1ldGhvZHMucmltcmFmID0gYXN5bmMgZnVuY3Rpb24gKHBhdGgpIHtcbiAgYXdhaXQgdGhpcy5zaGVsbChbJ3JtJywgJy1yZicsIHBhdGhdKTtcbn07XG5cbi8qKlxuICogU2VuZCBhIGZpbGUgdG8gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBsb2NhbFBhdGggLSBUaGUgcGF0aCB0byB0aGUgZmlsZSBvbiB0aGUgbG9jYWwgZmlsZSBzeXN0ZW0uXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVtb3RlUGF0aCAtIFRoZSBkZXN0aW5hdGlvbiBwYXRoIG9uIHRoZSByZW1vdGUgZGV2aWNlLlxuICogQHBhcmFtIHtvYmplY3R9IG9wdHMgLSBBZGRpdGlvbmFsIG9wdGlvbnMgbWFwcGluZy4gU2VlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9hcHBpdW0vbm9kZS10ZWVuX3Byb2Nlc3MsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgIF9leGVjXyBtZXRob2Qgb3B0aW9ucywgZm9yIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgYXZhaWxhYmxlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuXG4gKi9cbm1ldGhvZHMucHVzaCA9IGFzeW5jIGZ1bmN0aW9uIChsb2NhbFBhdGgsIHJlbW90ZVBhdGgsIG9wdHMpIHtcbiAgYXdhaXQgdGhpcy5hZGJFeGVjKFsncHVzaCcsIGxvY2FsUGF0aCwgcmVtb3RlUGF0aF0sIG9wdHMpO1xufTtcblxuLyoqXG4gKiBSZWNlaXZlIGEgZmlsZSBmcm9tIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVtb3RlUGF0aCAtIFRoZSBzb3VyY2UgcGF0aCBvbiB0aGUgcmVtb3RlIGRldmljZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBsb2NhbFBhdGggLSBUaGUgZGVzdGluYXRpb24gcGF0aCB0byB0aGUgZmlsZSBvbiB0aGUgbG9jYWwgZmlsZSBzeXN0ZW0uXG4gKi9cbm1ldGhvZHMucHVsbCA9IGFzeW5jIGZ1bmN0aW9uIChyZW1vdGVQYXRoLCBsb2NhbFBhdGgpIHtcbiAgLy8gcHVsbCBmb2xkZXIgY2FuIHRha2UgbW9yZSB0aW1lLCBpbmNyZWFzaW5nIHRpbWUgb3V0IHRvIDYwIHNlY3NcbiAgYXdhaXQgdGhpcy5hZGJFeGVjKFsncHVsbCcsIHJlbW90ZVBhdGgsIGxvY2FsUGF0aF0sIHt0aW1lb3V0OiA2MDAwMH0pO1xufTtcblxuLyoqXG4gKiBDaGVjayB3aGV0aGVyIHRoZSBwcm9jZXNzIHdpdGggdGhlIHBhcnRpY3VsYXIgbmFtZSBpcyBydW5uaW5nIG9uIHRoZSBkZXZpY2VcbiAqIHVuZGVyIHRlc3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHByb2Nlc3NOYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHByb2Nlc3MgdG8gYmUgY2hlY2tlZC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGdpdmVuIHByb2Nlc3MgaXMgcnVubmluZy5cbiAqIEB0aHJvd3Mge2Vycm9yfSBJZiB0aGUgZ2l2ZW4gcHJvY2VzcyBuYW1lIGlzIG5vdCBhIHZhbGlkIGNsYXNzIG5hbWUuXG4gKi9cbm1ldGhvZHMucHJvY2Vzc0V4aXN0cyA9IGFzeW5jIGZ1bmN0aW9uIChwcm9jZXNzTmFtZSkge1xuICB0cnkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkQ2xhc3MocHJvY2Vzc05hbWUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgcHJvY2VzcyBuYW1lOiAke3Byb2Nlc3NOYW1lfWApO1xuICAgIH1cbiAgICBsZXQgc3Rkb3V0ID0gYXdhaXQgdGhpcy5zaGVsbChcInBzXCIpO1xuICAgIGZvciAobGV0IGxpbmUgb2Ygc3Rkb3V0LnNwbGl0KC9cXHI/XFxuLykpIHtcbiAgICAgIGxpbmUgPSBsaW5lLnRyaW0oKS5zcGxpdCgvXFxzKy8pO1xuICAgICAgbGV0IHBrZ0NvbHVtbiA9IGxpbmVbbGluZS5sZW5ndGggLSAxXTtcbiAgICAgIGlmIChwa2dDb2x1bW4gJiYgcGtnQ29sdW1uLmluZGV4T2YocHJvY2Vzc05hbWUpICE9PSAtMSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IGNhdGNoIChlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvciBmaW5kaW5nIGlmIHByb2Nlc3MgZXhpc3RzLiBPcmlnaW5hbCBlcnJvcjogJHtlLm1lc3NhZ2V9YCk7XG4gIH1cbn07XG5cbi8qKlxuICogR2V0IFRDUCBwb3J0IGZvcndhcmRpbmcgd2l0aCBhZGIgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICogQHJldHVybiB7QXJyYXkuPFN0cmluZz59IFRoZSBvdXRwdXQgb2YgdGhlIGNvcnJlc3BvbmRpbmcgYWRiIGNvbW1hbmQuIEFuIGFycmF5IGNvbnRhaW5zIGVhY2ggZm9yd2FyZGluZyBsaW5lIG9mIG91dHB1dFxuICovXG5tZXRob2RzLmdldEZvcndhcmRMaXN0ID0gYXN5bmMgZnVuY3Rpb24gKCkge1xuICBsb2cuZGVidWcoYExpc3QgZm9yd2FyZGluZyBwb3J0c2ApO1xuICBsZXQgY29ubmVjdGlvbnMgPSBhd2FpdCB0aGlzLmFkYkV4ZWMoWydmb3J3YXJkJywgJy0tbGlzdCddKTtcbiAgcmV0dXJuIGNvbm5lY3Rpb25zLnNwbGl0KCdcXG4nKTtcbn07XG5cbi8qKlxuICogU2V0dXAgVENQIHBvcnQgZm9yd2FyZGluZyB3aXRoIGFkYiBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBzeXN0ZW1Qb3J0IC0gVGhlIG51bWJlciBvZiB0aGUgbG9jYWwgc3lzdGVtIHBvcnQuXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IGRldmljZVBvcnQgLSBUaGUgbnVtYmVyIG9mIHRoZSByZW1vdGUgZGV2aWNlIHBvcnQuXG4gKi9cbm1ldGhvZHMuZm9yd2FyZFBvcnQgPSBhc3luYyBmdW5jdGlvbiAoc3lzdGVtUG9ydCwgZGV2aWNlUG9ydCkge1xuICBsb2cuZGVidWcoYEZvcndhcmRpbmcgc3lzdGVtOiAke3N5c3RlbVBvcnR9IHRvIGRldmljZTogJHtkZXZpY2VQb3J0fWApO1xuICBhd2FpdCB0aGlzLmFkYkV4ZWMoWydmb3J3YXJkJywgYHRjcDoke3N5c3RlbVBvcnR9YCwgYHRjcDoke2RldmljZVBvcnR9YF0pO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgVENQIHBvcnQgZm9yd2FyZGluZyB3aXRoIGFkYiBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuIFRoZSBmb3J3YXJkaW5nXG4gKiBmb3IgdGhlIGdpdmVuIHBvcnQgc2hvdWxkIGJlIHNldHVwIHdpdGgge0BsaW5rICNmb3J3YXJkUG9ydH0gZmlyc3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBzeXN0ZW1Qb3J0IC0gVGhlIG51bWJlciBvZiB0aGUgbG9jYWwgc3lzdGVtIHBvcnRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIHJlbW92ZSBmb3J3YXJkaW5nIG9uLlxuICovXG5tZXRob2RzLnJlbW92ZVBvcnRGb3J3YXJkID0gYXN5bmMgZnVuY3Rpb24gKHN5c3RlbVBvcnQpIHtcbiAgbG9nLmRlYnVnKGBSZW1vdmluZyBmb3J3YXJkZWQgcG9ydCBzb2NrZXQgY29ubmVjdGlvbjogJHtzeXN0ZW1Qb3J0fSBgKTtcbiAgYXdhaXQgdGhpcy5hZGJFeGVjKFsnZm9yd2FyZCcsIGAtLXJlbW92ZWAsIGB0Y3A6JHtzeXN0ZW1Qb3J0fWBdKTtcbn07XG5cbi8qKlxuICogU2V0dXAgVENQIHBvcnQgZm9yd2FyZGluZyB3aXRoIGFkYiBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuIFRoZSBkaWZmZXJlbmNlXG4gKiBiZXR3ZWVuIHtAbGluayAjZm9yd2FyZFBvcnR9IGlzIHRoYXQgdGhpcyBtZXRob2QgZG9lcyBzZXR1cCBmb3IgYW4gYWJzdHJhY3RcbiAqIGxvY2FsIHBvcnQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBzeXN0ZW1Qb3J0IC0gVGhlIG51bWJlciBvZiB0aGUgbG9jYWwgc3lzdGVtIHBvcnQuXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IGRldmljZVBvcnQgLSBUaGUgbnVtYmVyIG9mIHRoZSByZW1vdGUgZGV2aWNlIHBvcnQuXG4gKi9cbm1ldGhvZHMuZm9yd2FyZEFic3RyYWN0UG9ydCA9IGFzeW5jIGZ1bmN0aW9uIChzeXN0ZW1Qb3J0LCBkZXZpY2VQb3J0KSB7XG4gIGxvZy5kZWJ1ZyhgRm9yd2FyZGluZyBzeXN0ZW06ICR7c3lzdGVtUG9ydH0gdG8gYWJzdHJhY3QgZGV2aWNlOiAke2RldmljZVBvcnR9YCk7XG4gIGF3YWl0IHRoaXMuYWRiRXhlYyhbJ2ZvcndhcmQnLCBgdGNwOiR7c3lzdGVtUG9ydH1gLCBgbG9jYWxhYnN0cmFjdDoke2RldmljZVBvcnR9YF0pO1xufTtcblxuLyoqXG4gKiBFeGVjdXRlIHBpbmcgc2hlbGwgY29tbWFuZCBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgY29tbWFuZCBvdXRwdXQgY29udGFpbnMgJ3BpbmcnIHN1YnN0cmluZy5cbiAqIEB0aHJvd3Mge2Vycm9yfSBJZiB0aGVyZSB3YXMgYW4gZXJyb3Igd2hpbGUgZXhlY3V0aW5nICdwaW5nJyBjb21tYW5kIG9uIHRoZVxuICogICAgICAgICAgICAgICAgIGRldmljZSB1bmRlciB0ZXN0LlxuICovXG5tZXRob2RzLnBpbmcgPSBhc3luYyBmdW5jdGlvbiAoKSB7XG4gIGxldCBzdGRvdXQgPSBhd2FpdCB0aGlzLnNoZWxsKFtcImVjaG9cIiwgXCJwaW5nXCJdKTtcbiAgaWYgKHN0ZG91dC5pbmRleE9mKFwicGluZ1wiKSA9PT0gMCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHRocm93IG5ldyBFcnJvcihgQURCIHBpbmcgZmFpbGVkLCByZXR1cm5lZCAke3N0ZG91dH1gKTtcbn07XG5cbi8qKlxuICogUmVzdGFydCB0aGUgZGV2aWNlIHVuZGVyIHRlc3QgdXNpbmcgYWRiIGNvbW1hbmRzLlxuICpcbiAqIEB0aHJvd3Mge2Vycm9yfSBJZiBzdGFydCBmYWlscy5cbiAqL1xubWV0aG9kcy5yZXN0YXJ0ID0gYXN5bmMgZnVuY3Rpb24gKCkge1xuICB0cnkge1xuICAgIGF3YWl0IHRoaXMuc3RvcExvZ2NhdCgpO1xuICAgIGF3YWl0IHRoaXMucmVzdGFydEFkYigpO1xuICAgIGF3YWl0IHRoaXMud2FpdEZvckRldmljZSg2MCk7XG4gICAgYXdhaXQgdGhpcy5zdGFydExvZ2NhdCgpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBSZXN0YXJ0IGZhaWxlZC4gT3JnaW5pYWwgZXJyb3I6ICR7ZS5tZXNzYWdlfWApO1xuICB9XG59O1xuXG4vKipcbiAqIFN0YXJ0IHRoZSBsb2djYXQgcHJvY2VzcyB0byBnYXRoZXIgbG9ncy5cbiAqXG4gKiBAdGhyb3dzIHtlcnJvcn0gSWYgcmVzdGFydCBmYWlscy5cbiAqL1xubWV0aG9kcy5zdGFydExvZ2NhdCA9IGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgaWYgKCFfLmlzRW1wdHkodGhpcy5sb2djYXQpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVHJ5aW5nIHRvIHN0YXJ0IGxvZ2NhdCBjYXB0dXJlIGJ1dCBpdCdzIGFscmVhZHkgc3RhcnRlZCFcIik7XG4gIH1cbiAgdGhpcy5sb2djYXQgPSBuZXcgTG9nY2F0KHtcbiAgICBhZGI6IHRoaXMuZXhlY3V0YWJsZSxcbiAgICBkZWJ1ZzogZmFsc2UsXG4gICAgZGVidWdUcmFjZTogZmFsc2UsXG4gICAgY2xlYXJEZXZpY2VMb2dzT25TdGFydDogISF0aGlzLmNsZWFyRGV2aWNlTG9nc09uU3RhcnQsXG4gIH0pO1xuICBhd2FpdCB0aGlzLmxvZ2NhdC5zdGFydENhcHR1cmUoKTtcbn07XG5cbi8qKlxuICogU3RvcCB0aGUgYWN0aXZlIGxvZ2NhdCBwcm9jZXNzIHdoaWNoIGdhdGhlcnMgbG9ncy5cbiAqIFRoZSBjYWxsIHdpbGwgYmUgaWdub3JlZCBpZiBubyBsb2djYXQgcHJvY2VzcyBpcyBydW5uaW5nLlxuICovXG5tZXRob2RzLnN0b3BMb2djYXQgPSBhc3luYyBmdW5jdGlvbiAoKSB7XG4gIGlmIChfLmlzRW1wdHkodGhpcy5sb2djYXQpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHRyeSB7XG4gICAgYXdhaXQgdGhpcy5sb2djYXQuc3RvcENhcHR1cmUoKTtcbiAgfSBmaW5hbGx5IHtcbiAgICB0aGlzLmxvZ2NhdCA9IG51bGw7XG4gIH1cbn07XG5cbi8qKlxuICogUmV0cmlldmUgdGhlIG91dHB1dCBmcm9tIHRoZSBjdXJyZW50bHkgcnVubmluZyBsb2djYXQgcHJvY2Vzcy5cbiAqIFRoZSBsb2djYXQgcHJvY2VzcyBzaG91bGQgYmUgZXhlY3V0ZWQgYnkgezJsaW5rICNzdGFydExvZ2NhdH0gbWV0aG9kLlxuICpcbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGNvbGxlY3RlZCBsb2djYXQgb3V0cHV0LlxuICogQHRocm93cyB7RXJyb3J9IElmIGxvZ2NhdCBwcm9jZXNzIGlzIG5vdCBydW5uaW5nLlxuICovXG5tZXRob2RzLmdldExvZ2NhdExvZ3MgPSBmdW5jdGlvbiAoKSB7XG4gIGlmIChfLmlzRW1wdHkodGhpcy5sb2djYXQpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FuJ3QgZ2V0IGxvZ2NhdCBsb2dzIHNpbmNlIGxvZ2NhdCBoYXNuJ3Qgc3RhcnRlZFwiKTtcbiAgfVxuICByZXR1cm4gdGhpcy5sb2djYXQuZ2V0TG9ncygpO1xufTtcblxuLyoqXG4gKiBTZXQgdGhlIGNhbGxiYWNrIGZvciB0aGUgbG9nY2F0IG91dHB1dCBldmVudC5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciAtIFRoZSBsaXN0ZW5lciBmdW5jdGlvbiwgd2hpY2ggYWNjZXB0cyBvbmUgYXJndW1lbnQuIFRoZSBhcmd1bWVudCBpc1xuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhIGxvZyByZWNvcmQgb2JqZWN0IHdpdGggYHRpbWVzdGFtcGAsIGBsZXZlbGAgYW5kIGBtZXNzYWdlYCBwcm9wZXJ0aWVzLlxuICogQHRocm93cyB7RXJyb3J9IElmIGxvZ2NhdCBwcm9jZXNzIGlzIG5vdCBydW5uaW5nLlxuICovXG5tZXRob2RzLnNldExvZ2NhdExpc3RlbmVyID0gZnVuY3Rpb24gKGxpc3RlbmVyKSB7XG4gIGlmIChfLmlzRW1wdHkodGhpcy5sb2djYXQpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTG9nY2F0IHByb2Nlc3MgaGFzbid0IGJlZW4gc3RhcnRlZFwiKTtcbiAgfVxuICB0aGlzLmxvZ2NhdC5vbignb3V0cHV0JywgbGlzdGVuZXIpO1xufTtcblxuLyoqXG4gKiBSZW1vdmVzIHRoZSBwcmV2aW91c2x5IHNldCBjYWxsYmFjayBmb3IgdGhlIGxvZ2NhdCBvdXRwdXQgZXZlbnQuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gbGlzdGVuZXIgLSBUaGUgbGlzdGVuZXIgZnVuY3Rpb24sIHdoaWNoIGhhcyBiZWVuIHByZXZpb3VzbHlcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc2VkIHRvIGBzZXRMb2djYXRMaXN0ZW5lcmBcbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiBsb2djYXQgcHJvY2VzcyBpcyBub3QgcnVubmluZy5cbiAqL1xubWV0aG9kcy5yZW1vdmVMb2djYXRMaXN0ZW5lciA9IGZ1bmN0aW9uIChsaXN0ZW5lcikge1xuICBpZiAoXy5pc0VtcHR5KHRoaXMubG9nY2F0KSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkxvZ2NhdCBwcm9jZXNzIGhhc24ndCBiZWVuIHN0YXJ0ZWRcIik7XG4gIH1cbiAgdGhpcy5sb2djYXQucmVtb3ZlTGlzdGVuZXIoJ291dHB1dCcsIGxpc3RlbmVyKTtcbn07XG5cbi8qKlxuICogR2V0IHRoZSBsaXN0IG9mIHByb2Nlc3MgaWRzIGZvciB0aGUgcGFydGljdWxhciBwcm9jZXNzIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIFRoZSBwYXJ0IG9mIHByb2Nlc3MgbmFtZS5cbiAqIEByZXR1cm4ge0FycmF5LjxudW1iZXI+fSBUaGUgbGlzdCBvZiBtYXRjaGVkIHByb2Nlc3MgSURzIG9yIGFuIGVtcHR5IGxpc3QuXG4gKi9cbm1ldGhvZHMuZ2V0UElEc0J5TmFtZSA9IGFzeW5jIGZ1bmN0aW9uIChuYW1lKSB7XG4gIGxvZy5kZWJ1ZyhgR2V0dGluZyBhbGwgcHJvY2Vzc2VzIHdpdGggJHtuYW1lfWApO1xuICB0cnkge1xuICAgIC8vIHBzIDxjb21tPiB3aGVyZSBjb21tIGlzIGxhc3QgMTUgY2hhcmFjdGVycyBvZiBwYWNrYWdlIG5hbWVcbiAgICBpZiAobmFtZS5sZW5ndGggPiAxNSkge1xuICAgICAgbmFtZSA9IG5hbWUuc3Vic3RyKG5hbWUubGVuZ3RoIC0gMTUpO1xuICAgIH1cbiAgICBsZXQgc3Rkb3V0ID0gKGF3YWl0IHRoaXMuc2hlbGwoW1wicHNcIl0pKS50cmltKCk7XG4gICAgbGV0IHBpZHMgPSBbXTtcbiAgICBmb3IgKGxldCBsaW5lIG9mIHN0ZG91dC5zcGxpdChcIlxcblwiKSkge1xuICAgICAgaWYgKGxpbmUuaW5kZXhPZihuYW1lKSAhPT0gLTEpIHtcbiAgICAgICAgbGV0IG1hdGNoID0gL1teXFx0IF0rW1xcdCBdKyhbMC05XSspLy5leGVjKGxpbmUpO1xuICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICBwaWRzLnB1c2gocGFyc2VJbnQobWF0Y2hbMV0sIDEwKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZXh0cmFjdCBQSUQgZnJvbSBwcyBvdXRwdXQ6ICR7bGluZX1gKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcGlkcztcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIGdldCBwaWRzIGZvciAke25hbWV9LiBPcmdpbmlhbCBlcnJvcjogJHtlLm1lc3NhZ2V9YCk7XG4gIH1cbn07XG5cbi8qKlxuICogR2V0IHRoZSBsaXN0IG9mIHByb2Nlc3MgaWRzIGZvciB0aGUgcGFydGljdWxhciBwcm9jZXNzIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIFRoZSBwYXJ0IG9mIHByb2Nlc3MgbmFtZS5cbiAqIEByZXR1cm4ge0FycmF5LjxudW1iZXI+fSBUaGUgbGlzdCBvZiBtYXRjaGVkIHByb2Nlc3MgSURzIG9yIGFuIGVtcHR5IGxpc3QuXG4gKi9cbm1ldGhvZHMua2lsbFByb2Nlc3Nlc0J5TmFtZSA9IGFzeW5jIGZ1bmN0aW9uIChuYW1lKSB7XG4gIHRyeSB7XG4gICAgbG9nLmRlYnVnKGBBdHRlbXB0aW5nIHRvIGtpbGwgYWxsICR7bmFtZX0gcHJvY2Vzc2VzYCk7XG4gICAgbGV0IHBpZHMgPSBhd2FpdCB0aGlzLmdldFBJRHNCeU5hbWUobmFtZSk7XG4gICAgaWYgKF8uaXNFbXB0eShwaWRzKSkge1xuICAgICAgbG9nLmluZm8oYE5vICcke25hbWV9JyBwcm9jZXNzIGhhcyBiZWVuIGZvdW5kYCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGZvciAobGV0IHBpZCBvZiBwaWRzKSB7XG4gICAgICBhd2FpdCB0aGlzLmtpbGxQcm9jZXNzQnlQSUQocGlkKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byBraWxsICR7bmFtZX0gcHJvY2Vzc2VzLiBPcmlnaW5hbCBlcnJvcjogJHtlLm1lc3NhZ2V9YCk7XG4gIH1cbn07XG5cbi8qKlxuICogS2lsbCB0aGUgcGFydGljdWxhciBwcm9jZXNzIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqIFRoZSBjdXJyZW50IHVzZXIgaXMgYXV0b21hdGljYWxseSBzd2l0Y2hlZCB0byByb290IGlmIG5lY2Vzc2FyeSBpbiBvcmRlclxuICogdG8gcHJvcGVybHkga2lsbCB0aGUgcHJvY2Vzcy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IHBpZCAtIFRoZSBJRCBvZiB0aGUgcHJvY2VzcyB0byBiZSBraWxsZWQuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEtpbGwgY29tbWFuZCBzdGRvdXQuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHByb2Nlc3Mgd2l0aCBnaXZlbiBJRCBpcyBub3QgcHJlc2VudCBvciBjYW5ub3QgYmUga2lsbGVkLlxuICovXG5tZXRob2RzLmtpbGxQcm9jZXNzQnlQSUQgPSBhc3luYyBmdW5jdGlvbiAocGlkKSB7XG4gIGxvZy5kZWJ1ZyhgQXR0ZW1wdGluZyB0byBraWxsIHByb2Nlc3MgJHtwaWR9YCk7XG4gIGxldCB3YXNSb290ID0gZmFsc2U7XG4gIGxldCBiZWNhbWVSb290ID0gZmFsc2U7XG4gIHRyeSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIENoZWNrIGlmIHRoZSBwcm9jZXNzIGV4aXN0cyBhbmQgdGhyb3cgYW4gZXhjZXB0aW9uIG90aGVyd2lzZVxuICAgICAgYXdhaXQgdGhpcy5zaGVsbChbJ2tpbGwnLCAnLTAnLCBwaWRdKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBpZiAoIWUubWVzc2FnZS5pbmNsdWRlcygnT3BlcmF0aW9uIG5vdCBwZXJtaXR0ZWQnKSkge1xuICAgICAgICB0aHJvdyBlO1xuICAgICAgfVxuICAgICAgdHJ5IHtcbiAgICAgICAgd2FzUm9vdCA9IGF3YWl0IHRoaXMuaXNSb290KCk7XG4gICAgICB9IGNhdGNoIChpZ24pIHt9XG4gICAgICBpZiAod2FzUm9vdCkge1xuICAgICAgICB0aHJvdyBlO1xuICAgICAgfVxuICAgICAgbG9nLmluZm8oYENhbm5vdCBraWxsIFBJRCAke3BpZH0gZHVlIHRvIGluc3VmZmljaWVudCBwZXJtaXNzaW9ucy4gUmV0cnlpbmcgYXMgcm9vdGApO1xuICAgICAgdHJ5IHtcbiAgICAgICAgYmVjYW1lUm9vdCA9IGF3YWl0IHRoaXMucm9vdCgpO1xuICAgICAgfSBjYXRjaCAoaWduKSB7fVxuICAgICAgYXdhaXQgdGhpcy5zaGVsbChbJ2tpbGwnLCAnLTAnLCBwaWRdKTtcbiAgICB9XG4gICAgY29uc3QgdGltZW91dE1zID0gMTAwMDtcbiAgICBsZXQgc3Rkb3V0O1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB3YWl0Rm9yQ29uZGl0aW9uKGFzeW5jICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBzdGRvdXQgPSBhd2FpdCB0aGlzLnNoZWxsKFsna2lsbCcsIHBpZF0pO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIC8vIGtpbGwgcmV0dXJucyBub24temVybyBjb2RlIGlmIHRoZSBwcm9jZXNzIGlzIGFscmVhZHkga2lsbGVkXG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0sIHt3YWl0TXM6IHRpbWVvdXRNcywgaW50ZXJ2YWxNczogMzAwfSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBsb2cud2FybihgQ2Fubm90IGtpbGwgcHJvY2VzcyAke3BpZH0gaW4gJHt0aW1lb3V0TXN9IG1zLiBUcnlpbmcgdG8gZm9yY2Uga2lsbC4uLmApO1xuICAgICAgc3Rkb3V0ID0gYXdhaXQgdGhpcy5zaGVsbChbJ2tpbGwnLCAnLTknLCBwaWRdKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0ZG91dDtcbiAgfSBmaW5hbGx5IHtcbiAgICBpZiAoYmVjYW1lUm9vdCkge1xuICAgICAgYXdhaXQgdGhpcy51bnJvb3QoKTtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogQnJvYWRjYXN0IHByb2Nlc3Mga2lsbGluZyBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGludGVudCAtIFRoZSBuYW1lIG9mIHRoZSBpbnRlbnQgdG8gYnJvYWRjYXN0IHRvLlxuICogQHBhcmFtIHtzdHJpbmd9IHByb2Nlc3NOYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGtpbGxlZCBwcm9jZXNzLlxuICogQHRocm93cyB7ZXJyb3J9IElmIHRoZSBwcm9jZXNzIHdhcyBub3Qga2lsbGVkLlxuICovXG5tZXRob2RzLmJyb2FkY2FzdFByb2Nlc3NFbmQgPSBhc3luYyBmdW5jdGlvbiAoaW50ZW50LCBwcm9jZXNzTmFtZSkge1xuICAvLyBzdGFydCB0aGUgYnJvYWRjYXN0IHdpdGhvdXQgd2FpdGluZyBmb3IgaXQgdG8gZmluaXNoLlxuICB0aGlzLmJyb2FkY2FzdChpbnRlbnQpO1xuICAvLyB3YWl0IGZvciB0aGUgcHJvY2VzcyB0byBlbmRcbiAgbGV0IHN0YXJ0ID0gRGF0ZS5ub3coKTtcbiAgbGV0IHRpbWVvdXRNcyA9IDQwMDAwO1xuICB0cnkge1xuICAgIHdoaWxlICgoRGF0ZS5ub3coKSAtIHN0YXJ0KSA8IHRpbWVvdXRNcykge1xuICAgICAgaWYgKGF3YWl0IHRoaXMucHJvY2Vzc0V4aXN0cyhwcm9jZXNzTmFtZSkpIHtcbiAgICAgICAgLy8gY29vbCBkb3duXG4gICAgICAgIGF3YWl0IHNsZWVwKDQwMCk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoYFByb2Nlc3MgbmV2ZXIgZGllZCB3aXRoaW4gJHt0aW1lb3V0TXN9IG1zYCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byBicm9hZGNhc3QgcHJvY2VzcyBlbmQuIE9yaWdpbmFsIGVycm9yOiAke2UubWVzc2FnZX1gKTtcbiAgfVxufTtcblxuLyoqXG4gKiBCcm9hZGNhc3QgYSBtZXNzYWdlIHRvIHRoZSBnaXZlbiBpbnRlbnQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGludGVudCAtIFRoZSBuYW1lIG9mIHRoZSBpbnRlbnQgdG8gYnJvYWRjYXN0IHRvLlxuICogQHRocm93cyB7ZXJyb3J9IElmIGludGVudCBuYW1lIGlzIG5vdCBhIHZhbGlkIGNsYXNzIG5hbWUuXG4gKi9cbm1ldGhvZHMuYnJvYWRjYXN0ID0gYXN5bmMgZnVuY3Rpb24gKGludGVudCkge1xuICBpZiAoIXRoaXMuaXNWYWxpZENsYXNzKGludGVudCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgaW50ZW50ICR7aW50ZW50fWApO1xuICB9XG4gIGxvZy5kZWJ1ZyhgQnJvYWRjYXN0aW5nOiAke2ludGVudH1gKTtcbiAgYXdhaXQgdGhpcy5zaGVsbChbJ2FtJywgJ2Jyb2FkY2FzdCcsICctYScsIGludGVudF0pO1xufTtcblxuLyoqXG4gKiBLaWxsIEFuZHJvaWQgaW5zdHJ1bWVudHMgaWYgdGhleSBhcmUgY3VycmVudGx5IHJ1bm5pbmcuXG4gKi9cbm1ldGhvZHMuZW5kQW5kcm9pZENvdmVyYWdlID0gYXN5bmMgZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5pbnN0cnVtZW50UHJvYyAmJiB0aGlzLmluc3RydW1lbnRQcm9jLmlzUnVubmluZykge1xuICAgIGF3YWl0IHRoaXMuaW5zdHJ1bWVudFByb2Muc3RvcCgpO1xuICB9XG59O1xuXG4vKipcbiAqIEluc3RydW1lbnQgdGhlIHBhcnRpY3VsYXIgYWN0aXZpdHkuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBrZyAtIFRoZSBuYW1lIG9mIHRoZSBwYWNrYWdlIHRvIGJlIGluc3RydW1lbnRlZC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBhY3Rpdml0eSAtIFRoZSBuYW1lIG9mIHRoZSBtYWluIGFjdGl2aXR5IGluIHRoaXMgcGFja2FnZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpbnN0cnVtZW50V2l0aCAtIFRoZSBuYW1lIG9mIHRoZSBwYWNrYWdlIHRvIGluc3RydW1lbnRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSBhY3Rpdml0eSB3aXRoLlxuICogQHRocm93cyB7ZXJyb3J9IElmIGFueSBleGNlcHRpb24gaXMgcmVwb3J0ZWQgYnkgYWRiIHNoZWxsLlxuICovXG5tZXRob2RzLmluc3RydW1lbnQgPSBhc3luYyBmdW5jdGlvbiAocGtnLCBhY3Rpdml0eSwgaW5zdHJ1bWVudFdpdGgpIHtcbiAgaWYgKGFjdGl2aXR5WzBdICE9PSBcIi5cIikge1xuICAgIHBrZyA9IFwiXCI7XG4gIH1cbiAgbGV0IHBrZ0FjdGl2aXR5ID0gKHBrZyArIGFjdGl2aXR5KS5yZXBsYWNlKC9cXC4rL2csICcuJyk7IC8vIEZpeCBwa2cuLmFjdGl2aXR5IGVycm9yXG4gIGxldCBzdGRvdXQgPSBhd2FpdCB0aGlzLnNoZWxsKFtcbiAgICAnYW0nLCAnaW5zdHJ1bWVudCcsXG4gICAgJy1lJywgJ21haW5fYWN0aXZpdHknLFxuICAgIHBrZ0FjdGl2aXR5LFxuICAgIGluc3RydW1lbnRXaXRoLFxuICBdKTtcbiAgaWYgKHN0ZG91dC5pbmRleE9mKFwiRXhjZXB0aW9uXCIpICE9PSAtMSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBleGNlcHRpb24gZHVyaW5nIGluc3RydW1lbnRhdGlvbi4gT3JpZ2luYWwgZXJyb3IgJHtzdGRvdXQuc3BsaXQoXCJcXG5cIilbMF19YCk7XG4gIH1cbn07XG5cbi8qKlxuICogQ29sbGVjdCBBbmRyb2lkIGNvdmVyYWdlIGJ5IGluc3RydW1lbnRpbmcgdGhlIHBhcnRpY3VsYXIgYWN0aXZpdHkuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGluc3RydW1lbnRDbGFzcyAtIFRoZSBuYW1lIG9mIHRoZSBpbnN0cnVtZW50YXRpb24gY2xhc3MuXG4gKiBAcGFyYW0ge3N0cmluZ30gd2FpdFBrZyAtIFRoZSBuYW1lIG9mIHRoZSBwYWNrYWdlIHRvIGJlIGluc3RydW1lbnRlZC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB3YWl0QWN0aXZpdHkgLSBUaGUgbmFtZSBvZiB0aGUgbWFpbiBhY3Rpdml0eSBpbiB0aGlzIHBhY2thZ2UuXG4gKlxuICogQHJldHVybiB7cHJvbWlzZX0gVGhlIHByb21pc2UgaXMgc3VjY2Vzc2Z1bGx5IHJlc29sdmVkIGlmIHRoZSBpbnN0cnVtZW50YXRpb24gc3RhcnRzXG4gKiAgICAgICAgICAgICAgICAgICB3aXRob3V0IGVycm9ycy5cbiAqL1xubWV0aG9kcy5hbmRyb2lkQ292ZXJhZ2UgPSBhc3luYyBmdW5jdGlvbiAoaW5zdHJ1bWVudENsYXNzLCB3YWl0UGtnLCB3YWl0QWN0aXZpdHkpIHtcbiAgaWYgKCF0aGlzLmlzVmFsaWRDbGFzcyhpbnN0cnVtZW50Q2xhc3MpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGNsYXNzICR7aW5zdHJ1bWVudENsYXNzfWApO1xuICB9XG4gIHJldHVybiBhd2FpdCBuZXcgQihhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgbGV0IGFyZ3MgPSB0aGlzLmV4ZWN1dGFibGUuZGVmYXVsdEFyZ3NcbiAgICAgIC5jb25jYXQoWydzaGVsbCcsICdhbScsICdpbnN0cnVtZW50JywgJy1lJywgJ2NvdmVyYWdlJywgJ3RydWUnLCAnLXcnXSlcbiAgICAgIC5jb25jYXQoW2luc3RydW1lbnRDbGFzc10pO1xuICAgIGxvZy5kZWJ1ZyhgQ29sbGVjdGluZyBjb3ZlcmFnZSBkYXRhIHdpdGg6ICR7W3RoaXMuZXhlY3V0YWJsZS5wYXRoXS5jb25jYXQoYXJncykuam9pbignICcpfWApO1xuICAgIHRyeSB7XG4gICAgICAvLyBhbSBpbnN0cnVtZW50IHJ1bnMgZm9yIHRoZSBsaWZlIG9mIHRoZSBhcHAgcHJvY2Vzcy5cbiAgICAgIHRoaXMuaW5zdHJ1bWVudFByb2MgPSBuZXcgU3ViUHJvY2Vzcyh0aGlzLmV4ZWN1dGFibGUucGF0aCwgYXJncyk7XG4gICAgICBhd2FpdCB0aGlzLmluc3RydW1lbnRQcm9jLnN0YXJ0KDApO1xuICAgICAgdGhpcy5pbnN0cnVtZW50UHJvYy5vbignb3V0cHV0JywgKHN0ZG91dCwgc3RkZXJyKSA9PiB7XG4gICAgICAgIGlmIChzdGRlcnIpIHtcbiAgICAgICAgICByZWplY3QobmV3IEVycm9yKGBGYWlsZWQgdG8gcnVuIGluc3RydW1lbnRhdGlvbi4gT3JpZ2luYWwgZXJyb3I6ICR7c3RkZXJyfWApKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBhd2FpdCB0aGlzLndhaXRGb3JBY3Rpdml0eSh3YWl0UGtnLCB3YWl0QWN0aXZpdHkpO1xuICAgICAgcmVzb2x2ZSgpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoYEFuZHJvaWQgY292ZXJhZ2UgZmFpbGVkLiBPcmlnaW5hbCBlcnJvcjogJHtlLm1lc3NhZ2V9YCkpO1xuICAgIH1cbiAgfSk7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgcGFydGljdWxhciBwcm9wZXJ0eSBvZiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IC0gVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5LiBUaGlzIG5hbWUgc2hvdWxkXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZSBrbm93biB0byBfYWRiIHNoZWxsIGdldHByb3BfIHRvb2wuXG4gKlxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgdmFsdWUgb2YgdGhlIGdpdmVuIHByb3BlcnR5LlxuICovXG5tZXRob2RzLmdldERldmljZVByb3BlcnR5ID0gYXN5bmMgZnVuY3Rpb24gKHByb3BlcnR5KSB7XG4gIGxldCBzdGRvdXQgPSBhd2FpdCB0aGlzLnNoZWxsKFsnZ2V0cHJvcCcsIHByb3BlcnR5XSk7XG4gIGxldCB2YWwgPSBzdGRvdXQudHJpbSgpO1xuICBsb2cuZGVidWcoYEN1cnJlbnQgZGV2aWNlIHByb3BlcnR5ICcke3Byb3BlcnR5fSc6ICR7dmFsfWApO1xuICByZXR1cm4gdmFsO1xufTtcblxuLyoqXG4gKiBTZXQgdGhlIHBhcnRpY3VsYXIgcHJvcGVydHkgb2YgdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eSAtIFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eS4gVGhpcyBuYW1lIHNob3VsZFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmUga25vd24gdG8gX2FkYiBzaGVsbCBzZXRwcm9wXyB0b29sLlxuICogQHBhcmFtIHtzdHJpbmd9IHZhbCAtIFRoZSBuZXcgcHJvcGVydHkgdmFsdWUuXG4gKlxuICogQHRocm93cyB7ZXJyb3J9IElmIF9zZXRwcm9wXyB1dGlsaXR5IGZhaWxzIHRvIGNoYW5nZSBwcm9wZXJ0eSB2YWx1ZS5cbiAqL1xubWV0aG9kcy5zZXREZXZpY2VQcm9wZXJ0eSA9IGFzeW5jIGZ1bmN0aW9uIChwcm9wLCB2YWwpIHtcbiAgbG9nLmRlYnVnKGBTZXR0aW5nIGRldmljZSBwcm9wZXJ0eSAnJHtwcm9wfScgdG8gJyR7dmFsfSdgKTtcbiAgYXdhaXQgdGhpcy5zaGVsbChbJ3NldHByb3AnLCBwcm9wLCB2YWxdLCB7XG4gICAgcHJpdmlsZWdlZDogdHJ1ZSxcbiAgfSk7XG59O1xuXG4vKipcbiAqIEByZXR1cm4ge3N0cmluZ30gQ3VycmVudCBzeXN0ZW0gbGFuZ3VhZ2Ugb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICovXG5tZXRob2RzLmdldERldmljZVN5c0xhbmd1YWdlID0gYXN5bmMgZnVuY3Rpb24gKCkge1xuICByZXR1cm4gYXdhaXQgdGhpcy5nZXREZXZpY2VQcm9wZXJ0eShcInBlcnNpc3Quc3lzLmxhbmd1YWdlXCIpO1xufTtcblxuLyoqXG4gKiBTZXQgdGhlIG5ldyBzeXN0ZW0gbGFuZ3VhZ2Ugb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBsYW5ndWFnZSAtIFRoZSBuZXcgbGFuZ3VhZ2UgdmFsdWUuXG4gKi9cbm1ldGhvZHMuc2V0RGV2aWNlU3lzTGFuZ3VhZ2UgPSBhc3luYyBmdW5jdGlvbiAobGFuZ3VhZ2UpIHtcbiAgcmV0dXJuIGF3YWl0IHRoaXMuc2V0RGV2aWNlUHJvcGVydHkoXCJwZXJzaXN0LnN5cy5sYW5ndWFnZVwiLCBsYW5ndWFnZS50b0xvd2VyQ2FzZSgpKTtcbn07XG5cbi8qKlxuICogQHJldHVybiB7c3RyaW5nfSBDdXJyZW50IGNvdW50cnkgbmFtZSBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKi9cbm1ldGhvZHMuZ2V0RGV2aWNlU3lzQ291bnRyeSA9IGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0RGV2aWNlUHJvcGVydHkoXCJwZXJzaXN0LnN5cy5jb3VudHJ5XCIpO1xufTtcblxuLyoqXG4gKiBTZXQgdGhlIG5ldyBzeXN0ZW0gY291bnRyeSBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGNvdW50cnkgLSBUaGUgbmV3IGNvdW50cnkgdmFsdWUuXG4gKi9cbm1ldGhvZHMuc2V0RGV2aWNlU3lzQ291bnRyeSA9IGFzeW5jIGZ1bmN0aW9uIChjb3VudHJ5KSB7XG4gIHJldHVybiBhd2FpdCB0aGlzLnNldERldmljZVByb3BlcnR5KFwicGVyc2lzdC5zeXMuY291bnRyeVwiLCBjb3VudHJ5LnRvVXBwZXJDYXNlKCkpO1xufTtcblxuLyoqXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEN1cnJlbnQgc3lzdGVtIGxvY2FsZSBuYW1lIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqL1xubWV0aG9kcy5nZXREZXZpY2VTeXNMb2NhbGUgPSBhc3luYyBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBhd2FpdCB0aGlzLmdldERldmljZVByb3BlcnR5KFwicGVyc2lzdC5zeXMubG9jYWxlXCIpO1xufTtcblxuLyoqXG4gKiBTZXQgdGhlIG5ldyBzeXN0ZW0gbG9jYWxlIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbG9jYWxlIC0gVGhlIG5ldyBsb2NhbGUgdmFsdWUuXG4gKi9cbm1ldGhvZHMuc2V0RGV2aWNlU3lzTG9jYWxlID0gYXN5bmMgZnVuY3Rpb24gKGxvY2FsZSkge1xuICByZXR1cm4gYXdhaXQgdGhpcy5zZXREZXZpY2VQcm9wZXJ0eShcInBlcnNpc3Quc3lzLmxvY2FsZVwiLCBsb2NhbGUpO1xufTtcblxuLyoqXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEN1cnJlbnQgcHJvZHVjdCBsYW5ndWFnZSBuYW1lIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqL1xubWV0aG9kcy5nZXREZXZpY2VQcm9kdWN0TGFuZ3VhZ2UgPSBhc3luYyBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBhd2FpdCB0aGlzLmdldERldmljZVByb3BlcnR5KFwicm8ucHJvZHVjdC5sb2NhbGUubGFuZ3VhZ2VcIik7XG59O1xuXG4vKipcbiAqIEByZXR1cm4ge3N0cmluZ30gQ3VycmVudCBwcm9kdWN0IGNvdW50cnkgbmFtZSBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKi9cbm1ldGhvZHMuZ2V0RGV2aWNlUHJvZHVjdENvdW50cnkgPSBhc3luYyBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBhd2FpdCB0aGlzLmdldERldmljZVByb3BlcnR5KFwicm8ucHJvZHVjdC5sb2NhbGUucmVnaW9uXCIpO1xufTtcblxuLyoqXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEN1cnJlbnQgcHJvZHVjdCBsb2NhbGUgbmFtZSBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKi9cbm1ldGhvZHMuZ2V0RGV2aWNlUHJvZHVjdExvY2FsZSA9IGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0RGV2aWNlUHJvcGVydHkoXCJyby5wcm9kdWN0LmxvY2FsZVwiKTtcbn07XG5cbi8qKlxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgbW9kZWwgbmFtZSBvZiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKi9cbm1ldGhvZHMuZ2V0TW9kZWwgPSBhc3luYyBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBhd2FpdCB0aGlzLmdldERldmljZVByb3BlcnR5KFwicm8ucHJvZHVjdC5tb2RlbFwiKTtcbn07XG5cbi8qKlxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgbWFudWZhY3R1cmVyIG5hbWUgb2YgdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICovXG5tZXRob2RzLmdldE1hbnVmYWN0dXJlciA9IGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0RGV2aWNlUHJvcGVydHkoXCJyby5wcm9kdWN0Lm1hbnVmYWN0dXJlclwiKTtcbn07XG5cbi8qKlxuICogR2V0IHRoZSBjdXJyZW50IHNjcmVlbiBzaXplLlxuICpcbiAqIEByZXR1cm4ge3N0cmluZ30gRGV2aWNlIHNjcmVlbiBzaXplIGFzIHN0cmluZyBpbiBmb3JtYXQgJ1d4SCcgb3JcbiAqICAgICAgICAgICAgICAgICAgX251bGxfIGlmIGl0IGNhbm5vdCBiZSBkZXRlcm1pbmVkLlxuICovXG5tZXRob2RzLmdldFNjcmVlblNpemUgPSBhc3luYyBmdW5jdGlvbiAoKSB7XG4gIGxldCBzdGRvdXQgPSBhd2FpdCB0aGlzLnNoZWxsKFsnd20nLCAnc2l6ZSddKTtcbiAgbGV0IHNpemUgPSBuZXcgUmVnRXhwKC9QaHlzaWNhbCBzaXplOiAoW15cXHI/XFxuXSspKi9nKS5leGVjKHN0ZG91dCk7XG4gIGlmIChzaXplICYmIHNpemUubGVuZ3RoID49IDIpIHtcbiAgICByZXR1cm4gc2l6ZVsxXS50cmltKCk7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgY3VycmVudCBzY3JlZW4gZGVuc2l0eSBpbiBkcGlcbiAqXG4gKiBAcmV0dXJuIHs/bnVtYmVyfSBEZXZpY2Ugc2NyZWVuIGRlbnNpdHkgYXMgYSBudW1iZXIgb3IgX251bGxfIGlmIGl0XG4gKiAgICAgICAgICAgICAgICAgIGNhbm5vdCBiZSBkZXRlcm1pbmVkXG4gKi9cbm1ldGhvZHMuZ2V0U2NyZWVuRGVuc2l0eSA9IGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgbGV0IHN0ZG91dCA9IGF3YWl0IHRoaXMuc2hlbGwoWyd3bScsICdkZW5zaXR5J10pO1xuICBsZXQgZGVuc2l0eSA9IG5ldyBSZWdFeHAoL1BoeXNpY2FsIGRlbnNpdHk6IChbXlxccj9cXG5dKykqL2cpLmV4ZWMoc3Rkb3V0KTtcbiAgaWYgKGRlbnNpdHkgJiYgZGVuc2l0eS5sZW5ndGggPj0gMikge1xuICAgIGxldCBkZW5zaXR5TnVtYmVyID0gcGFyc2VJbnQoZGVuc2l0eVsxXS50cmltKCksIDEwKTtcbiAgICByZXR1cm4gaXNOYU4oZGVuc2l0eU51bWJlcikgPyBudWxsIDogZGVuc2l0eU51bWJlcjtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn07XG5cbi8qKlxuICogU2V0dXAgSFRUUCBwcm94eSBpbiBkZXZpY2Ugc2V0dGluZ3MuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHByb3h5SG9zdCAtIFRoZSBob3N0IG5hbWUgb2YgdGhlIHByb3h5LlxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBwcm94eVBvcnQgLSBUaGUgcG9ydCBudW1iZXIgdG8gYmUgc2V0LlxuICovXG5tZXRob2RzLnNldEh0dHBQcm94eSA9IGFzeW5jIGZ1bmN0aW9uIChwcm94eUhvc3QsIHByb3h5UG9ydCkge1xuICBsZXQgcHJveHkgPSBgJHtwcm94eUhvc3R9OiR7cHJveHlQb3J0fWA7XG4gIGlmIChfLmlzVW5kZWZpbmVkKHByb3h5SG9zdCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENhbGwgdG8gc2V0SHR0cFByb3h5IG1ldGhvZCB3aXRoIHVuZGVmaW5lZCBwcm94eV9ob3N0OiAke3Byb3h5fWApO1xuICB9XG4gIGlmIChfLmlzVW5kZWZpbmVkKHByb3h5UG9ydCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENhbGwgdG8gc2V0SHR0cFByb3h5IG1ldGhvZCB3aXRoIHVuZGVmaW5lZCBwcm94eV9wb3J0ICR7cHJveHl9YCk7XG4gIH1cbiAgYXdhaXQgdGhpcy5zZXRTZXR0aW5nKCdnbG9iYWwnLCAnaHR0cF9wcm94eScsIHByb3h5KTtcbiAgYXdhaXQgdGhpcy5zZXRTZXR0aW5nKCdzZWN1cmUnLCAnaHR0cF9wcm94eScsIHByb3h5KTtcbiAgYXdhaXQgdGhpcy5zZXRTZXR0aW5nKCdzeXN0ZW0nLCAnaHR0cF9wcm94eScsIHByb3h5KTtcbiAgYXdhaXQgdGhpcy5zZXRTZXR0aW5nKCdzeXN0ZW0nLCAnZ2xvYmFsX2h0dHBfcHJveHlfaG9zdCcsIHByb3h5SG9zdCk7XG4gIGF3YWl0IHRoaXMuc2V0U2V0dGluZygnc3lzdGVtJywgJ2dsb2JhbF9odHRwX3Byb3h5X3BvcnQnLCBwcm94eVBvcnQpO1xufTtcblxuLyoqXG4gKiBTZXQgZGV2aWNlIHByb3BlcnR5LlxuICogW2FuZHJvaWQucHJvdmlkZXIuU2V0dGluZ3Nde0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLmFuZHJvaWQuY29tL3JlZmVyZW5jZS9hbmRyb2lkL3Byb3ZpZGVyL1NldHRpbmdzLmh0bWx9XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWVzcGFjZSAtIG9uZSBvZiB7c3lzdGVtLCBzZWN1cmUsIGdsb2JhbH0sIGNhc2UtaW5zZW5zaXRpdmUuXG4gKiBAcGFyYW0ge3N0cmluZ30gc2V0dGluZyAtIHByb3BlcnR5IG5hbWUuXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IHZhbHVlIC0gcHJvcGVydHkgdmFsdWUuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IGNvbW1hbmQgb3V0cHV0LlxuICovXG5tZXRob2RzLnNldFNldHRpbmcgPSBhc3luYyBmdW5jdGlvbiAobmFtZXNwYWNlLCBzZXR0aW5nLCB2YWx1ZSkge1xuICByZXR1cm4gYXdhaXQgdGhpcy5zaGVsbChbJ3NldHRpbmdzJywgJ3B1dCcsIG5hbWVzcGFjZSwgc2V0dGluZywgdmFsdWVdKTtcbn07XG5cbi8qKlxuICogR2V0IGRldmljZSBwcm9wZXJ0eS5cbiAqIFthbmRyb2lkLnByb3ZpZGVyLlNldHRpbmdzXXtAbGluayBodHRwczovL2RldmVsb3Blci5hbmRyb2lkLmNvbS9yZWZlcmVuY2UvYW5kcm9pZC9wcm92aWRlci9TZXR0aW5ncy5odG1sfVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lc3BhY2UgLSBvbmUgb2Yge3N5c3RlbSwgc2VjdXJlLCBnbG9iYWx9LCBjYXNlLWluc2Vuc2l0aXZlLlxuICogQHBhcmFtIHtzdHJpbmd9IHNldHRpbmcgLSBwcm9wZXJ0eSBuYW1lLlxuICogQHJldHVybiB7c3RyaW5nfSBwcm9wZXJ0eSB2YWx1ZS5cbiAqL1xubWV0aG9kcy5nZXRTZXR0aW5nID0gYXN5bmMgZnVuY3Rpb24gKG5hbWVzcGFjZSwgc2V0dGluZykge1xuICByZXR1cm4gYXdhaXQgdGhpcy5zaGVsbChbJ3NldHRpbmdzJywgJ2dldCcsIG5hbWVzcGFjZSwgc2V0dGluZ10pO1xufTtcblxuLyoqXG4gKiBSZXRyaWV2ZSB0aGUgYGFkYiBidWdyZXBvcnRgIGNvbW1hbmQgb3V0cHV0LiBUaGlzXG4gKiBvcGVyYXRpb24gbWF5IHRha2UgdXAgdG8gc2V2ZXJhbCBtaW51dGVzLlxuICpcbiAqIEBwYXJhbSB7P251bWJlcn0gdGltZW91dCBbMTIwMDAwXSAtIENvbW1hbmQgdGltZW91dCBpbiBtaWxsaXNlY29uZHNcbiAqIEByZXR1cm5zIHtzdHJpbmd9IENvbW1hbmQgc3Rkb3V0XG4gKi9cbm1ldGhvZHMuYnVncmVwb3J0ID0gYXN5bmMgZnVuY3Rpb24gKHRpbWVvdXQgPSAxMjAwMDApIHtcbiAgcmV0dXJuIGF3YWl0IHRoaXMuYWRiRXhlYyhbJ2J1Z3JlcG9ydCddLCB7dGltZW91dH0pO1xufTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBTY3JlZW5yZWNvcmRPcHRpb25zXG4gKiBAcHJvcGVydHkgez9zdHJpbmd9IHZpZGVvU2l6ZSAtIFRoZSBmb3JtYXQgaXMgd2lkdGh4aGVpZ2h0LlxuICogICAgICAgICAgICAgICAgICBUaGUgZGVmYXVsdCB2YWx1ZSBpcyB0aGUgZGV2aWNlJ3MgbmF0aXZlIGRpc3BsYXkgcmVzb2x1dGlvbiAoaWYgc3VwcG9ydGVkKSxcbiAqICAgICAgICAgICAgICAgICAgMTI4MHg3MjAgaWYgbm90LiBGb3IgYmVzdCByZXN1bHRzLFxuICogICAgICAgICAgICAgICAgICB1c2UgYSBzaXplIHN1cHBvcnRlZCBieSB5b3VyIGRldmljZSdzIEFkdmFuY2VkIFZpZGVvIENvZGluZyAoQVZDKSBlbmNvZGVyLlxuICogICAgICAgICAgICAgICAgICBGb3IgZXhhbXBsZSwgXCIxMjgweDcyMFwiXG4gKiBAcHJvcGVydHkgez9ib29sZWFufSBidWdSZXBvcnQgLSBTZXQgaXQgdG8gYHRydWVgIGluIG9yZGVyIHRvIGRpc3BsYXkgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiBvbiB0aGUgdmlkZW8gb3ZlcmxheSxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2ggYXMgYSB0aW1lc3RhbXAsIHRoYXQgaXMgaGVscGZ1bCBpbiB2aWRlb3MgY2FwdHVyZWQgdG8gaWxsdXN0cmF0ZSBidWdzLlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGhpcyBvcHRpb24gaXMgb25seSBzdXBwb3J0ZWQgc2luY2UgQVBJIGxldmVsIDI3IChBbmRyb2lkIFApLlxuICogQHByb3BlcnR5IHs/c3RyaW5nfG51bWJlcn0gdGltZUxpbWl0IC0gVGhlIG1heGltdW0gcmVjb3JkaW5nIHRpbWUsIGluIHNlY29uZHMuXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaGUgZGVmYXVsdCAoYW5kIG1heGltdW0pIHZhbHVlIGlzIDE4MCAoMyBtaW51dGVzKS5cbiAqIEBwcm9wZXJ0eSB7P3N0cmluZ3xudW1iZXJ9IGJpdFJhdGUgLSBUaGUgdmlkZW8gYml0IHJhdGUgZm9yIHRoZSB2aWRlbywgaW4gbWVnYWJpdHMgcGVyIHNlY29uZC5cbiAqICAgICAgICAgICAgICAgIFRoZSBkZWZhdWx0IHZhbHVlIGlzIDQuIFlvdSBjYW4gaW5jcmVhc2UgdGhlIGJpdCByYXRlIHRvIGltcHJvdmUgdmlkZW8gcXVhbGl0eSxcbiAqICAgICAgICAgICAgICAgIGJ1dCBkb2luZyBzbyByZXN1bHRzIGluIGxhcmdlciBtb3ZpZSBmaWxlcy5cbiAqL1xuXG4vKipcbiAqIEluaXRpYXRlIHNjcmVlbnJlY29yZCB1dGlsaXR5IG9uIHRoZSBkZXZpY2VcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZGVzdGluYXRpb24gLSBGdWxsIHBhdGggdG8gdGhlIHdyaXRhYmxlIG1lZGlhIGZpbGUgZGVzdGluYXRpb25cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uIHRoZSBkZXZpY2UgZmlsZSBzeXN0ZW0uXG4gKiBAcGFyYW0gez9TY3JlZW5yZWNvcmRPcHRpb25zfSBvcHRpb25zIFt7fV1cbiAqIEByZXR1cm5zIHtTdWJQcm9jZXNzfSBzY3JlZW5yZWNvcmQgcHJvY2Vzcywgd2hpY2ggY2FuIGJlIHRoZW4gY29udHJvbGxlZCBieSB0aGUgY2xpZW50IGNvZGVcbiAqL1xubWV0aG9kcy5zY3JlZW5yZWNvcmQgPSBmdW5jdGlvbiAoZGVzdGluYXRpb24sIG9wdGlvbnMgPSB7fSkge1xuICBjb25zdCBjbWQgPSBbJ3NjcmVlbnJlY29yZCddO1xuICBjb25zdCB7XG4gICAgdmlkZW9TaXplLFxuICAgIGJpdFJhdGUsXG4gICAgdGltZUxpbWl0LFxuICAgIGJ1Z1JlcG9ydCxcbiAgfSA9IG9wdGlvbnM7XG4gIGlmICh1dGlsLmhhc1ZhbHVlKHZpZGVvU2l6ZSkpIHtcbiAgICBjbWQucHVzaCgnLS1zaXplJywgdmlkZW9TaXplKTtcbiAgfVxuICBpZiAodXRpbC5oYXNWYWx1ZSh0aW1lTGltaXQpKSB7XG4gICAgY21kLnB1c2goJy0tdGltZS1saW1pdCcsIHRpbWVMaW1pdCk7XG4gIH1cbiAgaWYgKHV0aWwuaGFzVmFsdWUoYml0UmF0ZSkpIHtcbiAgICBjbWQucHVzaCgnLS1iaXQtcmF0ZScsIGJpdFJhdGUpO1xuICB9XG4gIGlmIChidWdSZXBvcnQpIHtcbiAgICBjbWQucHVzaCgnLS1idWdyZXBvcnQnKTtcbiAgfVxuICBjbWQucHVzaChkZXN0aW5hdGlvbik7XG5cbiAgY29uc3QgZnVsbENtZCA9IFtcbiAgICAuLi50aGlzLmV4ZWN1dGFibGUuZGVmYXVsdEFyZ3MsXG4gICAgJ3NoZWxsJyxcbiAgICAuLi5jbWRcbiAgXTtcbiAgbG9nLmRlYnVnKGBCdWlsZGluZyBzY3JlZW5yZWNvcmQgcHJvY2VzcyB3aXRoIHRoZSBjb21tYW5kIGxpbmU6IGFkYiAke3F1b3RlKGZ1bGxDbWQpfWApO1xuICByZXR1cm4gbmV3IFN1YlByb2Nlc3ModGhpcy5leGVjdXRhYmxlLnBhdGgsIGZ1bGxDbWQpO1xufTtcblxuLyoqXG4gKiBQZXJmb3JtcyB0aGUgZ2l2ZW4gZWRpdG9yIGFjdGlvbiBvbiB0aGUgZm9jdXNlZCBpbnB1dCBmaWVsZC5cbiAqIFRoaXMgbWV0aG9kIHJlcXVpcmVzIEFwcGl1bSBTZXR0aW5ncyBoZWxwZXIgdG8gYmUgaW5zdGFsbGVkIG9uIHRoZSBkZXZpY2UuXG4gKiBObyBleGNlcHRpb24gaXMgdGhyb3duIGlmIHRoZXJlIHdhcyBhIGZhaWx1cmUgd2hpbGUgcGVyZm9ybWluZyB0aGUgYWN0aW9uLlxuICogWW91IG11c3QgaW52ZXN0aWdhdGUgdGhlIGxvZ2NhdCBvdXRwdXQgaWYgc29tZXRoaW5nIGRpZCBub3Qgd29yayBhcyBleHBlY3RlZC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IGFjdGlvbiAtIEVpdGhlciBhY3Rpb24gY29kZSBvciBuYW1lLiBUaGUgZm9sbG93aW5nIGFjdGlvblxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lcyBhcmUgc3VwcG9ydGVkOiBgbm9ybWFsLCB1bnNwZWNpZmllZCwgbm9uZSxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ28sIHNlYXJjaCwgc2VuZCwgbmV4dCwgZG9uZSwgcHJldmlvdXNgXG4gKi9cbm1ldGhvZHMucGVyZm9ybUVkaXRvckFjdGlvbiA9IGFzeW5jIGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgbG9nLmRlYnVnKGBQZXJmb3JtaW5nIGVkaXRvciBhY3Rpb246ICR7YWN0aW9ufWApO1xuICBjb25zdCBkZWZhdWx0SU1FID0gYXdhaXQgdGhpcy5kZWZhdWx0SU1FKCk7XG4gIGF3YWl0IHRoaXMuZW5hYmxlSU1FKEFQUElVTV9JTUUpO1xuICB0cnkge1xuICAgIGF3YWl0IHRoaXMuc2V0SU1FKEFQUElVTV9JTUUpO1xuICAgIGF3YWl0IHRoaXMuc2hlbGwoWydpbnB1dCcsICd0ZXh0JywgYC8ke2FjdGlvbn0vYF0pO1xuICB9IGZpbmFsbHkge1xuICAgIGF3YWl0IHRoaXMuc2V0SU1FKGRlZmF1bHRJTUUpO1xuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBtZXRob2RzO1xuIl0sImZpbGUiOiJsaWIvdG9vbHMvYWRiLWNvbW1hbmRzLmpzIiwic291cmNlUm9vdCI6Ii4uLy4uLy4uIn0=
